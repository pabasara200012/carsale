/*! For license information please see main.86adc52f.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,N={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,s)&&!E.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:N.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+T(l,0):i,x(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),I(a,t,s,"",function(e){return e})):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var u=i+T(o=e[c],c);l+=I(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,s,u=i+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:N};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=N.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,R(_);else{var t=r(u);null!==t&&D(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var i=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),w(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(x,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,E=!1,S=null,k=-1,C=5,T=-1;function I(){return!(t.unstable_now()-T<C)}function j(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?N():(E=!1,S=null)}}else E=!1}if("function"===typeof b)N=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=j,N=function(){P.postMessage(null)}}else N=function(){y(j,0)};function R(e){S=e,E||(E=!0,N())}function D(e,n){k=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(k),k=-1):g=!0,D(x,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,R(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(dr){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ne=null,Ee=null;function Se(e){if(e=ws(e)){if("function"!==typeof _e)throw Error(i(280));var t=e.stateNode;t&&(t=_s(t),_e(e.stateNode,e.type,t))}}function ke(e){Ne?Ee?Ee.push(e):Ee=[e]:Ne=e}function Ce(){if(Ne){var e=Ne,t=Ee;if(Ee=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Ie(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Te(e,t,n)}finally{je=!1,(null!==Ne||null!==Ee)&&(Ie(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_s(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Oe(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,s,i,a,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(i(188))}function We(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return He(s),e;if(a===r)return He(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=s.unstable_scheduleCallback,Qe=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,$e=s.unstable_requestPaint,Xe=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=dt(o):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~s)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,Nt,Et,St,kt=!1,Ct=[],Tt=null,It=null,jt=null,At=new Map,Pt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=ws(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=bs(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ws(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==Tt&&Ut(Tt)&&(Tt=null),null!==It&&Ut(It)&&(It=null),null!==jt&&Ut(jt)&&(jt=null),At.forEach(Ft),Pt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==It&&zt(It,e),null!==jt&&zt(jt,e),At.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var qt=w.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Kt(e,t,n,r){var s=bt,i=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=s,qt.transition=i}}function Gt(e,t,n,r){if(Ht){var s=Yt(e,t,n,r);if(null===s)Wr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,s),!0;case"dragenter":return It=Lt(It,e,t,n,r,s),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return At.set(i,Lt(At.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Pt.set(i,Lt(Pt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==s;){var i=ws(s);if(null!==i&&xt(i),null===(i=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=bs(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,s="value"in Xt?Xt.value:Xt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Sn(){return En}var kn=M({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),Tn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),jn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(An),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Dn||On&&8<On&&11>=On),Un=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Yn(e){if(G(xs(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,xe(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ir(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,yr=null,vr=null,br=null,wr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Gr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Sr={};function kr(e){if(Er[e])return Er[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var Cr=kr("animationend"),Tr=kr("animationiteration"),Ir=kr("animationstart"),jr=kr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Ir,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(jr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Ur(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Ur(s,o,c),i=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Vr(e,t){var n=t[gs];void 0===n&&(n=t[gs]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,a.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch($t(t)){case 1:var s=Wt;break;case 4:s=Kt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=bs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=i,s=xe(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Cr:case Tr:case Ir:l=yn;break;case jr:l=jn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Kr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!bs(c)&&!c[ms])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bs(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:xs(l),f=null==c?o:xs(c),(o=new u(m,p+"leave",l,n,s)).target=d,o.relatedTarget=f,m=null,bs(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Qr(f))p++;for(f=0,m=h;m;m=Qr(m))f++;for(;0<p-f;)u=Qr(u),p--;for(;0<f-p;)h=Qr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Qr(u),h=Qr(h)}u=null}else u=null;null!==l&&Yr(a,o,l,u,!1),null!==c&&null!==d&&Yr(a,d,c,u,!0)}if("select"===(l=(o=r?xs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$n;else if(Hn(o))if(Xn)g=ar;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Wn(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xs(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(yr=y,vr=r,br=null);break;case"focusout":br=vr=yr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,xr(a,n,s);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(a,n,s)}var v;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in(Xt=s)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Gr(r,b)).length&&(b=new wn(b,e,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(s=new wn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Fr(a,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Pe(e,n))&&r.unshift(Kr(e,i,s)),null!=(i=Pe(e,t))&&r.push(Kr(e,i,s))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Pe(n,i))&&a.unshift(Kr(n,l,o)):s||null!=(l=Pe(n,i))&&a.push(Kr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $r=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function es(){}var ts=null,ns=null;function rs(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ss="function"===typeof setTimeout?setTimeout:void 0,is="function"===typeof clearTimeout?clearTimeout:void 0,as="function"===typeof Promise?Promise:void 0,os="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof as?function(e){return as.resolve(null).then(e).catch(ls)}:ss;function ls(e){setTimeout(function(){throw e})}function cs(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function us(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),fs="__reactFiber$"+hs,ps="__reactProps$"+hs,ms="__reactContainer$"+hs,gs="__reactEvents$"+hs,ys="__reactListeners$"+hs,vs="__reactHandles$"+hs;function bs(e){var t=e[fs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[fs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[fs])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function ws(e){return!(e=e[fs]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function _s(e){return e[ps]||null}var Ns=[],Es=-1;function Ss(e){return{current:e}}function ks(e){0>Es||(e.current=Ns[Es],Ns[Es]=null,Es--)}function Cs(e,t){Es++,Ns[Es]=e.current,e.current=t}var Ts={},Is=Ss(Ts),js=Ss(!1),As=Ts;function Ps(e,t){var n=e.type.contextTypes;if(!n)return Ts;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Rs(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ds(){ks(js),ks(Is)}function Os(e,t,n){if(Is.current!==Ts)throw Error(i(168));Cs(Is,t),Cs(js,n)}function Ls(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,q(e)||"Unknown",s));return M({},n,r)}function Ms(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ts,As=Is.current,Cs(Is,e),Cs(js,js.current),!0}function Us(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ls(e,t,As),r.__reactInternalMemoizedMergedChildContext=e,ks(js),ks(Is),Cs(Is,e)):ks(js),Cs(js,n)}var Fs=null,Vs=!1,zs=!1;function Bs(e){null===Fs?Fs=[e]:Fs.push(e)}function qs(){if(!zs&&null!==Fs){zs=!0;var e=0,t=bt;try{var n=Fs;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Vs=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ge(Ze,qs),s}finally{bt=t,zs=!1}}return null}var Hs=[],Ws=0,Ks=null,Gs=0,Qs=[],Ys=0,$s=null,Xs=1,Js="";function Zs(e,t){Hs[Ws++]=Gs,Hs[Ws++]=Ks,Ks=e,Gs=t}function ei(e,t,n){Qs[Ys++]=Xs,Qs[Ys++]=Js,Qs[Ys++]=$s,$s=e;var r=Xs;e=Js;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Xs=1<<32-at(t)+s|n<<s|r,Js=i+e}else Xs=1<<i|n<<s|r,Js=e}function ti(e){null!==e.return&&(Zs(e,1),ei(e,1,0))}function ni(e){for(;e===Ks;)Ks=Hs[--Ws],Hs[Ws]=null,Gs=Hs[--Ws],Hs[Ws]=null;for(;e===$s;)$s=Qs[--Ys],Qs[Ys]=null,Js=Qs[--Ys],Qs[Ys]=null,Xs=Qs[--Ys],Qs[Ys]=null}var ri=null,si=null,ii=!1,ai=null;function oi(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,si=us(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,si=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$s?{id:Xs,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,si=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=si;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=us(n.nextSibling);var r=ri;t&&li(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function hi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rs(e.type,e.memoizedProps)),t&&(t=si)){if(ci(e))throw fi(),Error(i(418));for(;t;)oi(e,t),t=us(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){si=us(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}si=null}}else si=ri?us(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=si;e;)e=us(e.nextSibling)}function pi(){si=ri=null,ii=!1}function mi(e){null===ai?ai=[e]:ai.push(e)}var gi=w.ReactCurrentBatchConfig;function yi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===N?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===P&&bi(i)===t.type)?((r=s(t,n.props)).ref=yi(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=yi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=yi(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Lc(t,e.mode,n,null)).return=e,t;vi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?c(e,t,n,r):null;case _:return n.key===s?u(e,t,n,r):null;case P:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:d(e,t,n,r,null);vi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case P:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,s,null);vi(t,r)}return null}function m(s,i,o,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(s,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(s,d),ii&&Zs(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(i=a(d,i,m),null===u?c=d:u.sibling=d,u=d);return ii&&Zs(s,m),c}for(d=r(s,d);m<o.length;m++)null!==(g=p(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=a(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),ii&&Zs(s,m),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(s,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(s,m),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(s,m),ii&&Zs(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return ii&&Zs(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),ii&&Zs(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===N&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===N){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&bi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=yi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===N?((i=Lc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Oc(a.type,a.key,a.props,null,r.mode,l)).ref=yi(r,i,a),l.return=r,r=l)}return o(r);case _:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fc(a,r.mode,l)).return=r,r=i}return o(r);case P:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return m(r,i,a,l);if(O(a))return g(r,i,a,l);vi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Uc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var xi=wi(!0),_i=wi(!1),Ni=Ss(null),Ei=null,Si=null,ki=null;function Ci(){ki=Si=Ei=null}function Ti(e){var t=Ni.current;ks(Ni),e._currentValue=t}function Ii(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ji(e,t){Ei=e,ki=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Ai(e){var t=e._currentValue;if(ki!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===Ei)throw Error(i(308));Si=e,Ei.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Pi=null;function Ri(e){null===Pi?Pi=[e]:Pi.push(e)}function Di(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ri(t)):(n.next=s.next,s.next=n),t.interleaved=n,Oi(e,r)}function Oi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Li=!1;function Mi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ui(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Oi(e,n)}return null===(s=r.interleaved)?(t.next=t,Ri(r)):(t.next=s.next,s.next=t),r.interleaved=t,Oi(e,n)}function zi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qi(e,t,n,r){var s=e.updateQueue;Li=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Li=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ml|=a,e.lanes=a,e.memoizedState=d}}function Hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Wi={},Ki=Ss(Wi),Gi=Ss(Wi),Qi=Ss(Wi);function Yi(e){if(e===Wi)throw Error(i(174));return e}function $i(e,t){switch(Cs(Qi,t),Cs(Gi,e),Cs(Ki,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ks(Ki),Cs(Ki,t)}function Xi(){ks(Ki),ks(Gi),ks(Qi)}function Ji(e){Yi(Qi.current);var t=Yi(Ki.current),n=le(t,e.type);t!==n&&(Cs(Gi,e),Cs(Ki,n))}function Zi(e){Gi.current===e&&(ks(Ki),ks(Gi))}var ea=Ss(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var sa=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,aa=0,oa=null,la=null,ca=null,ua=!1,da=!1,ha=0,fa=0;function pa(){throw Error(i(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,s,a){if(aa=a,oa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=null===e||null===e.memoizedState?Za:eo,e=n(r,s),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(i(301));a+=1,ca=la=null,t.updateQueue=null,sa.current=to,e=n(r,s)}while(da)}if(sa.current=Ja,t=null!==la&&null!==la.next,aa=0,ca=la=oa=null,ua=!1,t)throw Error(i(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?oa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=oa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?oa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(i(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?oa.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=la,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,oa.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,oa.lanes|=a,Ml|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function Ea(e,t){var n=oa,r=ba(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,wo=!0),r=r.queue,La(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Aa(9,ka.bind(null,n,r,s,t),void 0,null),null===jl)throw Error(i(349));0!==(30&aa)||Sa(n,t,s)}return s}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ka(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&Ia(e)}function Ca(e,t,n){return n(function(){Ta(t)&&Ia(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ia(e){var t=Oi(e,1);null!==t&&rc(t,e,1,-1)}function ja(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,oa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return ba().memoizedState}function Ra(e,t,n,r){var s=va();oa.flags|=e,s.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var s=ba();r=void 0===r?null:r;var i=void 0;if(null!==la){var a=la.memoizedState;if(i=a.destroy,null!==r&&ma(r,a.deps))return void(s.memoizedState=Aa(t,n,i,r))}oa.flags|=e,s.memoizedState=Aa(1|t,n,i,r)}function Oa(e,t){return Ra(8390656,8,e,t)}function La(e,t){return Da(2048,8,e,t)}function Ma(e,t){return Da(4,2,e,t)}function Ua(e,t){return Da(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,Fa.bind(null,t,e),n)}function za(){}function Ba(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),oa.lanes|=n,Ml|=n,e.baseState=!0),t)}function Wa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Ka(){return ba().memoizedState}function Ga(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))$a(t,n);else if(null!==(n=Di(e,t,n,r))){rc(n,e,r,tc()),Xa(n,t,r)}}function Qa(e,t,n){var r=nc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))$a(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Ri(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Di(e,t,s,r))&&(rc(n,e,r,s=tc()),Xa(n,t,r))}}function Ya(e){var t=e.alternate;return e===oa||null!==t&&t===oa}function $a(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ja={readContext:Ai,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:Ai,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ai,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,oa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:ja,useDebugValue:za,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=ja(!1),t=e[0];return e=Wa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oa,s=va();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===jl)throw Error(i(349));0!==(30&aa)||Sa(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Oa(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,ka.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=jl.identifierPrefix;if(ii){var n=Js;t=":"+t+"R"+(n=(Xs&~(1<<32-at(Xs)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:Ai,useCallback:Ba,useContext:Ai,useEffect:La,useImperativeHandle:Va,useInsertionEffect:Ma,useLayoutEffect:Ua,useMemo:qa,useReducer:xa,useRef:Pa,useState:function(){return xa(wa)},useDebugValue:za,useDeferredValue:function(e){return Ha(ba(),la.memoizedState,e)},useTransition:function(){return[xa(wa)[0],ba().memoizedState]},useMutableSource:Na,useSyncExternalStore:Ea,useId:Ka,unstable_isNewReconciler:!1},to={readContext:Ai,useCallback:Ba,useContext:Ai,useEffect:La,useImperativeHandle:Va,useInsertionEffect:Ma,useLayoutEffect:Ua,useMemo:qa,useReducer:_a,useRef:Pa,useState:function(){return _a(wa)},useDebugValue:za,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[_a(wa)[0],ba().memoizedState]},useMutableSource:Na,useSyncExternalStore:Ea,useId:Ka,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),s=nc(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Vi(e,i,s))&&(rc(t,e,s,r),zi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),s=nc(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Vi(e,i,s))&&(rc(t,e,s,r),zi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Vi(e,s,r))&&(rc(t,e,r,n),zi(t,e,r))}};function io(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function ao(e,t,n){var r=!1,s=Ts,i=t.contextType;return"object"===typeof i&&null!==i?i=Ai(i):(s=Rs(t)?As:Is.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ps(e,s):Ts),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function oo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Mi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ai(i):(i=Rs(t)?As:Is.current,s.context=Ps(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ro(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&so.enqueueReplaceState(s,s.state,null),qi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Kl=r),ho(0,t)},n}function mo(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ho(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Vi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var bo=w.ReactCurrentOwner,wo=!1;function xo(e,t,n,r){t.child=null===e?_i(t,null,n,r):xi(t,e.child,n,r)}function _o(e,t,n,r,s){n=n.render;var i=t.ref;return ji(t,s),r=ga(e,t,n,r,i,s),n=ya(),null===e||wo?(ii&&n&&ti(t),t.flags|=1,xo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function No(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Rc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Eo(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Wo(e,t,s)}return t.flags|=1,(e=Dc(i,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Wo(e,t,s);0!==(131072&e.flags)&&(wo=!0)}}return Co(e,t,n,r,s)}function So(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cs(Dl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cs(Dl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Cs(Dl,Rl),Rl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Cs(Dl,Rl),Rl|=r;return xo(e,t,s,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,s){var i=Rs(n)?As:Is.current;return i=Ps(t,i),ji(t,s),n=ga(e,t,n,r,i,s),r=ya(),null===e||wo?(ii&&r&&ti(t),t.flags|=1,xo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function To(e,t,n,r,s){if(Rs(n)){var i=!0;Ms(t)}else i=!1;if(ji(t,s),null===t.stateNode)Ho(e,t),ao(t,n,r),lo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ai(c):c=Ps(t,c=Rs(n)?As:Is.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&oo(t,a,r,c),Li=!1;var h=t.memoizedState;a.state=h,qi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||js.current||Li?("function"===typeof u&&(ro(t,n,u,r),l=t.memoizedState),(o=Li||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ui(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:no(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ai(l):l=Ps(t,l=Rs(n)?As:Is.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&oo(t,a,r,l),Li=!1,h=t.memoizedState,a.state=h,qi(t,r,a,s);var p=t.memoizedState;o!==d||h!==p||js.current||Li?("function"===typeof f&&(ro(t,n,f,r),p=t.memoizedState),(c=Li||io(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,i,s)}function Io(e,t,n,r,s,i){ko(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Us(t,n,!1),Wo(e,t,i);r=t.stateNode,bo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,o,i)):xo(e,t,o,i),t.memoizedState=r.state,s&&Us(t,n,!0),t.child}function jo(e){var t=e.stateNode;t.pendingContext?Os(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Os(0,t.context,!1),$i(e,t.containerInfo)}function Ao(e,t,n,r,s){return pi(),mi(s),t.flags|=256,xo(e,t,n,r),t.child}var Po,Ro,Do,Oo,Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var r,s=t.pendingProps,a=ea.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Cs(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Mc(l,s,0,null),e=Lc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Lo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=uo(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Mc({mode:"visible",children:r.children},s,0,null),(a=Lc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&xi(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Lo,a);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=uo(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=jl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Oi(e,s),rc(r,e,s,-1))}return gc(),Vo(e,t,o,r=uo(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,si=us(s.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Qs[Ys++]=Xs,Qs[Ys++]=Js,Qs[Ys++]=$s,Xs=e.id,Js=e.overflow,$s=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Dc(r,o):(o=Lc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,s}return e=(o=e.child).sibling,s=Dc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&mi(r),xi(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ii(e.return,t,n)}function Bo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function qo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Cs(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ta(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,i);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qo(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Rs(t.type)&&Ds(),Go(t),null;case 3:return r=t.stateNode,Xi(),ks(js),ks(Is),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(oc(ai),ai=null))),Ro(e,t),Go(t),null;case 5:Zi(t);var s=Yi(Qi.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Go(t),null}if(e=Yi(Ki.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fs]=t,r[ps]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(s=0;s<Lr.length;s++)Vr(Lr[s],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":se(r,a),Vr("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=es)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fs]=t,e[ps]=r,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),s=r;break;case"iframe":case"object":case"embed":Vr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Lr.length;s++)Vr(Lr[s],e);s=r;break;case"source":Vr("error",e),s=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),s=r;break;case"details":Vr("toggle",e),s=r;break;case"input":$(e,r),s=Y(e,r),Vr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Vr("invalid",e)}for(a in ve(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Vr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=es)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Qi.current),Yi(Ki.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[fs]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fs]=t,t.stateNode=r}return Go(t),null;case 13:if(ks(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==si&&0!==(1&t.mode)&&0===(128&t.flags))fi(),pi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[fs]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),a=!1}else null!==ai&&(oc(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ol&&(Ol=3):gc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Xi(),Ro(e,t),null===e&&qr(t.stateNode.containerInfo),Go(t),null;case 10:return Ti(t.type._context),Go(t),null;case 19:if(ks(ea),null===(a=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ko(a,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Ko(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cs(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>ql&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ii)return Go(t),null}else 2*Xe()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ea.current,Cs(ea,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Yo(e,t){switch(ni(t),t.tag){case 1:return Rs(t.type)&&Ds(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),ks(js),ks(Is),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(ks(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ks(ea),null;case 4:return Xi(),null;case 10:return Ti(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Do=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Yi(Ki.current);var i,a=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=es)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Oo=function(e,t,n,r){n!==r&&(t.flags|=4)};var $o=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&tl(t,n,i)}s=s.next}while(s!==r)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fs],delete t[ps],delete t[gs],delete t[ys],delete t[vs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=es));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Xo||el(n,t);case 6:var r=dl,s=hl;dl=null,fl(e,t,n),hl=s,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?cs(e.parentNode,n):1===e.nodeType&&cs(e,n),Bt(e)):cs(dl,n.stateNode));break;case 4:r=dl,s=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=s;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&tl(n,t,a),s=s.next}while(s!==r)}fl(e,t,n);break;case 1:if(!Xo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,fl(e,t,n),Xo=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(a,o,s),dl=null,hl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){Sc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),sl(3,e)}catch(g){Sc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):b(s,d,h,u)}switch(l){case"input":J(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[ps]=a}catch(g){Sc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Sc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Bl=Xe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(u=Xo)||d,gl(t,e),Xo=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){_l(h);continue}}null!==p?(p.return=f,Zo=p):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),ul(e,ll(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(i(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zo=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var s=Zo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||$o;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=$o;var c=Xo;if($o=a,(Xo=l)&&!c)for(Zo=s;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?Nl(s):null!==l?(l.return=a,Zo=l):Nl(s);for(;null!==i;)Zo=i,wl(i,t,n),i=i.sibling;Zo=s,$o=o,Xo=c}xl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Zo=i):xl(e)}}function xl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||sl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}Xo||512&t.flags&&il(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function _l(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function Nl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Sc(t,s,l)}}var i=t.return;try{il(t)}catch(l){Sc(t,i,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var El,Sl=Math.ceil,kl=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,Il=0,jl=null,Al=null,Pl=0,Rl=0,Dl=Ss(0),Ol=0,Ll=null,Ml=0,Ul=0,Fl=0,Vl=null,zl=null,Bl=0,ql=1/0,Hl=null,Wl=!1,Kl=null,Gl=null,Ql=!1,Yl=null,$l=0,Xl=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Il)?Xe():-1!==Zl?Zl:Zl=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Pl?Pl&-Pl:null!==gi.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(i(185));yt(e,n,r),0!==(2&Il)&&e===jl||(e===jl&&(0===(2&Il)&&(Ul|=n),4===Ol&&lc(e,Pl)),sc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(ql=Xe()+500,Vs&&qs()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===jl?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vs=!0,Bs(e)}(cc.bind(null,e)):Bs(cc.bind(null,e)),os(function(){0===(6&Il)&&qs()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=jc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,ec=0,0!==(6&Il))throw Error(i(327));var n=e.callbackNode;if(Nc()&&e.callbackNode!==n)return null;var r=ht(e,e===jl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var s=Il;Il|=2;var a=mc();for(jl===e&&Pl===t||(Hl=null,ql=Xe()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}Ci(),kl.current=a,Il=s,null!==Al?t=0:(jl=null,Pl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=ac(e,s))),1===t)throw n=Ll,fc(e,0),lc(e,r),sc(e,Xe()),n;if(6===t)lc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=yc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ac(e,a))),1===t))throw n=Ll,fc(e,0),lc(e,r),sc(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:_c(e,zl,Hl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ss(_c.bind(null,e,zl,Hl),t);break}_c(e,zl,Hl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ss(_c.bind(null,e,zl,Hl),r);break}_c(e,zl,Hl);break;default:throw Error(i(329))}}}return sc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zl,zl=n,null!==t&&oc(t)),e}function oc(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~Fl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Il))throw Error(i(327));Nc();var t=ht(e,0);if(0===(1&t))return sc(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),sc(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zl,Hl),sc(e,Xe()),null}function uc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(ql=Xe()+500,Vs&&qs())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Il)&&Nc();var t=Il;Il|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(Il=t))&&qs()}}function hc(){Rl=Dl.current,ks(Dl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,is(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ds();break;case 3:Xi(),ks(js),ks(Is),ra();break;case 5:Zi(r);break;case 4:Xi();break;case 13:case 19:ks(ea);break;case 10:Ti(r.type._context);break;case 22:case 23:hc()}n=n.return}if(jl=e,Al=e=Dc(e.current,null),Pl=Rl=t,Ol=0,Ll=null,Fl=Ul=Ml=0,zl=Vl=null,null!==Pi){for(t=0;t<Pi.length;t++)if(null!==(r=(n=Pi[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Pi=null}return e}function pc(e,t){for(;;){var n=Al;try{if(Ci(),sa.current=Ja,ua){for(var r=oa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=oa=null,da=!1,ha=0,Cl.current=null,null===n||null===n.return){Ol=1,Ll=t,Al=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&go(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){go(a,u,t),gc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vo(y,o,l,0,t),mi(co(c,l));break e}}a=c=co(c,l),4!==Ol&&(Ol=2),null===Vl?Vl=[a]:Vl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,po(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function mc(){var e=kl.current;return kl.current=Ja,null===e?Ja:e}function gc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===jl||0===(268435455&Ml)&&0===(268435455&Ul)||lc(jl,Pl)}function yc(e,t){var n=Il;Il|=2;var r=mc();for(jl===e&&Pl===t||(Hl=null,fc(e,t));;)try{vc();break}catch(s){pc(e,s)}if(Ci(),Il=n,kl.current=r,null!==Al)throw Error(i(261));return jl=null,Pl=0,Ol}function vc(){for(;null!==Al;)wc(Al)}function bc(){for(;null!==Al&&!Ye();)wc(Al)}function wc(e){var t=El(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?xc(e):Al=t,Cl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qo(n,t,Rl)))return void(Al=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ol=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ol&&(Ol=5)}function _c(e,t,n){var r=bt,s=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{Nc()}while(null!==Yl);if(0!==(6&Il))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===jl&&(Al=jl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,jc(tt,function(){return Nc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var o=bt;bt=1;var l=Il;Il|=4,Cl.current=null,function(e,t){if(ts=Ht,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ns={focusedElem:e,selectionRange:n},Ht=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,n),yl(n,e),mr(ns),Ht=!!ts,ns=ts=null,e.current=n,bl(n,e,s),$e(),Il=l,bt=o,Tl.transition=a}else e.current=n;if(Ql&&(Ql=!1,Yl=e,$l=s),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=Kl,Kl=null,e;0!==(1&$l)&&0!==e.tag&&Nc(),a=e.pendingLanes,0!==(1&a)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,qs()}(e,t,n,r)}finally{Tl.transition=s,bt=r}return null}function Nc(){if(null!==Yl){var e=wt($l),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Il))throw Error(i(331));var s=Il;for(Il|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var f=(d=Zo).sibling,p=d.return;if(al(d),d===u){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zo=v;break e}Zo=a.return}}var b=e.current;for(Zo=b;null!==Zo;){var w=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Zo=w;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(_){Sc(l,l.return,_)}if(l===o){Zo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Zo=x;break e}Zo=l.return}}if(Il=s,qs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(_){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Ec(e,t,n){e=Vi(e,t=po(0,t=co(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),sc(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Vi(t,e=mo(t,e=co(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),sc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,jl===e&&(Pl&n)===n&&(4===Ol||3===Ol&&(130023424&Pl)===Pl&&500>Xe()-Bl?fc(e,0):Fl|=n),sc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Oi(e,t))&&(yt(e,t,n),sc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cc(e,n)}function jc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Lc(n.children,s,a,t);case E:o=8,s|=8;break;case S:return(e=Pc(12,n,t,2|s)).elementType=S,e.lanes=a,e;case I:return(e=Pc(13,n,t,s)).elementType=I,e.lanes=a,e;case j:return(e=Pc(19,n,t,s)).elementType=j,e.lanes=a,e;case R:return Mc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:o=10;break e;case C:o=9;break e;case T:o=11;break e;case A:o=14;break e;case P:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,s,i,a,o,l){return e=new Vc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Pc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mi(i),e}function Bc(e){if(!e)return Ts;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Rs(n))return Ls(e,n,t)}return t}function qc(e,t,n,r,s,i,a,o,l){return(e=zc(n,r,!0,e,0,i,0,o,l)).context=Bc(null),n=e.current,(i=Fi(r=tc(),s=nc(n))).callback=void 0!==t&&null!==t?t:null,Vi(n,i,s),e.current.lanes=s,yt(e,s,r),sc(e,r),e}function Hc(e,t,n,r){var s=t.current,i=tc(),a=nc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vi(s,t,a))&&(rc(e,s,a,i),zi(e,s,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||js.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:jo(t),pi();break;case 5:Ji(t);break;case 1:Rs(t.type)&&Ms(t);break;case 4:$i(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Cs(Ni,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Cs(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(Cs(ea,1&ea.current),null!==(e=Wo(e,t,n))?e.sibling:null);Cs(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Cs(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Wo(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,ii&&0!==(1048576&t.flags)&&ei(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var s=Ps(t,Is.current);ji(t,n),s=ga(null,t,r,e,s,n);var a=ya();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rs(r)?(a=!0,Ms(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Mi(t),s.updater=so,t.stateNode=s,s._reactInternals=t,lo(t,r,e,n),t=Io(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),xo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=no(r,e),s){case 0:t=Co(null,t,r,e,n);break e;case 1:t=To(null,t,r,e,n);break e;case 11:t=_o(null,t,r,e,n);break e;case 14:t=No(null,t,r,no(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:no(r,s),n);case 1:return r=t.type,s=t.pendingProps,To(e,t,r,s=t.elementType===r?s:no(r,s),n);case 3:e:{if(jo(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Ui(e,t),qi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,s=co(Error(i(423)),t));break e}if(r!==s){t=Ao(e,t,r,n,s=co(Error(i(424)),t));break e}for(si=us(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=_i(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===s){t=Wo(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return Ji(t),null===e&&ui(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,rs(r,s)?o=null:null!==a&&rs(r,a)&&(t.flags|=32),ko(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Uo(e,t,n);case 4:return $i(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xi(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,_o(e,t,r,s=t.elementType===r?s:no(r,s),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Cs(Ni,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!js.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ii(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ii(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}xo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ji(t,n),r=r(s=Ai(s)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return s=no(r=t.type,t.pendingProps),No(e,t,r,s=no(r.type,s),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:no(r,s),Ho(e,t),t.tag=1,Rs(r)?(e=!0,Ms(t)):e=!1,ji(t,n),ao(t,r,s),lo(t,r,s,n),Io(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return So(e,t,n)}throw Error(i(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Wc(a);o.call(e)}}Hc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Wc(a);i.call(e)}}var a=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[ms]=a.current,qr(8===e.nodeType?e.parentNode:e),dc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[ms]=l.current,qr(8===e.nodeType?e.parentNode:e),dc(function(){Hc(t,l,n,r)}),l}(n,t,e,s,r);return Wc(a)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Hc(null,e,null,null)}),t[ms]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),sc(t,Xe()),0===(6&Il)&&(ql=Xe()+500,qs()))}break;case 13:dc(function(){var t=Oi(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}}),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Oi(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=nc(e),n=Oi(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},Et=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=_s(r);if(!s)throw Error(i(90));G(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uc,Ie=dc;var tu={usingClientEntryPoint:!1,Events:[ws,xs,_s,ke,Ce,uc]},nu={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{st=su.inject(ru),it=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(i(299));var n=!1,r="",s=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,s),e[ms]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ms]=t.current,qr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc(function(){eu(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return eu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,s=n(43),i=n.t(s,2),a=n(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,u=i.history,p=r.Pop,m=null,g=y();function y(){return(u.state||{idx:null}).idx}function v(){p=r.Pop;let e=y(),t=null==e?null:e-g;g=e,m&&m({action:p,location:w.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let w={get action(){return p},get location(){return e(i,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(l,v),m=e,()=>{i.removeEventListener(l,v),m=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p=r.Push;let s=h(w.location,e,t);n&&n(s,e),g=y()+1;let o=d(s,g),l=w.createHref(s);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;i.location.assign(l)}a&&m&&m({action:p,location:w.location,delta:1})},replace:function(e,t){p=r.Replace;let s=h(w.location,e,t);n&&n(s,e),g=y();let i=d(s,g),o=w.createHref(s);u.replaceState(i,"",o),a&&m&&m({action:p,location:w.location,delta:0})},go:e=>u.go(e)};return w}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),v(e,t,n,!1)}function v(e,t,n,r){let s=P(("string"===typeof t?p(t):t).pathname||"/",n);if(null==s)return null;let i=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=A(s);a=I(i[o],e,r)}return a}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=M([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))s(e,t,r);else s(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=w(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const x=/^:[\w-]+$/,_=3,N=2,E=1,S=10,k=-2,C=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=k),t&&(r+=N),n.filter(e=>!C(e)).reduce((e,t)=>e+(x.test(t)?_:""===t?E:S),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:M([i,u.pathname]),pathnameBase:U(M([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=M([i,u.pathnameBase]))}return a}function j(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function O(e,t){let n=D(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=p(e):(s=o({},e),c(!s.pathname||!s.pathname.includes("?"),R("?","pathname","search",s)),c(!s.pathname||!s.pathname.includes("#"),R("#","pathname","hash",s)),c(!s.search||!s.search.includes("#"),R("#","search","hash",s)));let i,a=""===e||""===s.pathname,l=a?"/":s.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?p(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:F(r),hash:V(s)}}(s,i),d=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const W=s.createContext(null);const K=s.createContext(null);const G=s.createContext(null);const Q=s.createContext(null);const Y=s.createContext({outlet:null,matches:[],isDataRoute:!1});const $=s.createContext(null);function X(){return null!=s.useContext(Q)}function J(){return X()||c(!1),s.useContext(Q).location}function Z(e){s.useContext(G).static||s.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=s.useContext(Y);return e?function(){let{router:e}=ue(le.UseNavigateStable),t=he(ce.UseNavigateStable),n=s.useRef(!1);return Z(()=>{n.current=!0}),s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},s)))},[e,t])}():function(){X()||c(!1);let e=s.useContext(W),{basename:t,future:n,navigator:r}=s.useContext(G),{matches:i}=s.useContext(Y),{pathname:a}=J(),o=JSON.stringify(O(i,n.v7_relativeSplatPath)),l=s.useRef(!1);return Z(()=>{l.current=!0}),s.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=L(n,JSON.parse(o),a,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:M([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,o,a,e])}()}function te(){let{matches:e}=s.useContext(Y),t=e[e.length-1];return t?t.params:{}}function ne(e,t,n,i){X()||c(!1);let{navigator:a}=s.useContext(G),{matches:o}=s.useContext(Y),l=o[o.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=J();if(t){var m;let e="string"===typeof t?p(t):t;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=y(e,{pathname:v});let w=oe(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:M([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,i);return t&&w?s.createElement(Q.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},w):w}function re(){let e=function(){var e;let t=s.useContext($),n=de(ce.UseRouteError),r=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const se=s.createElement(re,null);class ie extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(Y.Provider,{value:this.props.routeContext},s.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(W);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(Y.Provider,{value:t},r)}function oe(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,r,i)=>{let a,c=!1,h=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||se,u&&(d<0&&0===i?(p="route-fallback",!1||fe[p]||(fe[p]=!0),c=!0,f=null):d===i&&(c=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?h:c?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ae,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(ie,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let t=s.useContext(W);return t||c(!1),t}function de(e){let t=s.useContext(K);return t||c(!1),t}function he(e){let t=function(){let e=s.useContext(Y);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const fe={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function me(e){let{to:t,replace:n,state:r,relative:i}=e;X()||c(!1);let{future:a,static:o}=s.useContext(G),{matches:l}=s.useContext(Y),{pathname:u}=J(),d=ee(),h=L(t,O(l,a.v7_relativeSplatPath),u,"path"===i),f=JSON.stringify(h);return s.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:i}),[d,f,i,n,r]),null}function ge(e){c(!1)}function ye(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.Pop,navigator:o,static:l=!1,future:u}=e;X()&&c(!1);let d=t.replace(/^\/*/,"/"),h=s.useMemo(()=>({basename:d,navigator:o,static:l,future:H({v7_relativeSplatPath:!1},u)}),[d,u,o,l]);"string"===typeof i&&(i=p(i));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:v="default"}=i,b=s.useMemo(()=>{let e=P(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:a}},[d,f,m,g,y,v,a]);return null==b?null:s.createElement(G.Provider,{value:h},s.createElement(Q.Provider,{children:n,value:b}))}function ve(e){let{children:t,location:n}=e;return ne(be(t),n)}new Promise(()=>{});s.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,be(e.props.children,i));e.type!==ge&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,i)),n.push(a)}),n}var we=n(950),xe=n.t(we,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Em){}new Map;const _e=i.startTransition;xe.flushSync,i.useId;function Ne(e){let{basename:t,children:n,future:r,window:i}=e,a=s.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),m(function(e,t){let{pathname:n="/",search:r="",hash:s=""}=p(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:f(t))},function(e,t){u("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=a.current,[c,d]=s.useState({action:l.action,location:l.location}),{v7_startTransition:g}=r||{},y=s.useCallback(e=>{g&&_e?_e(()=>d(e)):d(e)},[d,g]);return s.useLayoutEffect(()=>l.listen(y),[l,y]),s.useEffect(()=>pe(r),[r]),s.createElement(ye,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ee,Se;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ee||(Ee={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Se||(Se={}));function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Ce(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}function Te(e,t,n){return(t=Ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach(function(t){Te(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Ae=new class{constructor(){this.currentUser=null,this.listeners=[]}async signInWithEmailAndPassword(e,t){const n={uid:"demo-user-"+Date.now(),email:e,displayName:e.split("@")[0]};return this.currentUser=n,this.notifyListeners(),{user:n}}async createUserWithEmailAndPassword(e,t){const n={uid:"demo-user-"+Date.now(),email:e,displayName:e.split("@")[0]};return this.currentUser=n,this.notifyListeners(),{user:n}}async signOut(){this.currentUser=null,this.notifyListeners()}getCurrentUser(){return this.currentUser}onAuthStateChanged(e){return this.listeners.push(e),e(this.currentUser),()=>{const t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}notifyListeners(){this.listeners.forEach(e=>e(this.currentUser))}};var Pe=n(579);const Re=(0,s.createContext)(void 0),De=()=>{const e=(0,s.useContext)(Re);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Oe="admin@carsale.com",Le=e=>{let{children:t}=e;const[n,r]=(0,s.useState)(null),[i,a]=(0,s.useState)(!0);(0,s.useEffect)(()=>Ae.onAuthStateChanged(e=>{if(e){const t={uid:e.uid,email:e.email,displayName:e.displayName,role:e.email===Oe?"admin":"user",createdAt:new Date};r(t)}else r(null);a(!1)}),[]);const o={currentUser:n,login:async e=>{try{console.log("Using mock authentication");const t=(await Ae.signInWithEmailAndPassword(e.email,e.password)).user,n={uid:t.uid,email:t.email,displayName:t.displayName,role:e.email===Oe?"admin":"user",createdAt:new Date};r(n)}catch(t){throw t}},register:async e=>{try{console.log("Using mock registration");const t=(await Ae.createUserWithEmailAndPassword(e.email,e.password)).user,n={uid:t.uid,email:t.email,displayName:e.displayName,role:"user",createdAt:new Date};r(n)}catch(t){throw t}},logout:async()=>{try{await Ae.signOut(),r(null)}catch(e){throw e}},updateUserProfile:async e=>{if(!n)throw new Error("No user is currently logged in");r(je(je({},n),e))},updateUserEmail:async e=>{if(!n)throw new Error("No user is currently logged in");r(je(je({},n),{},{email:e}))},updateUserPassword:async e=>{console.log("Password update not supported in demo mode")},loading:i,isAdmin:"admin"===(null===n||void 0===n?void 0:n.role)};return(0,Pe.jsx)(Re.Provider,{value:o,children:!i&&t})},Me=()=>(0,Pe.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,Pe.jsx)("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,Pe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Pe.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,Pe.jsxs)("div",{className:"flex items-center",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,Pe.jsx)("span",{className:"text-white font-bold text-sm",children:"CS"})}),(0,Pe.jsx)("span",{className:"ml-3 text-xl font-semibold text-gray-900",children:"Car Sale System"})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Pe.jsx)("a",{href:"/login",className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-all duration-200",children:"Sign In"}),(0,Pe.jsx)("a",{href:"/register",className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-all duration-200",children:"Get Started"})]})]})})}),(0,Pe.jsxs)("div",{className:"relative overflow-hidden",children:[(0,Pe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsxs)("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",children:["Professional Vehicle",(0,Pe.jsx)("span",{className:"text-blue-600 block",children:"Management System"})]}),(0,Pe.jsx)("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Streamline your car dealership operations with our comprehensive inventory management, analytics, and sales tracking platform."}),(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,Pe.jsx)("a",{href:"/register",className:"px-8 py-4 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-all duration-200 transform hover:-translate-y-1 shadow-lg hover:shadow-xl",children:"Start Free Trial"}),(0,Pe.jsx)("a",{href:"/login",className:"px-8 py-4 bg-white text-blue-600 font-semibold rounded-lg border-2 border-blue-600 hover:bg-blue-50 transition-all duration-200",children:"Sign In"})]})]})}),(0,Pe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,Pe.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,Pe.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:(0,Pe.jsx)("span",{className:"text-2xl",children:"\ud83d\ude97"})}),(0,Pe.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Vehicle Management"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Complete vehicle inventory management with detailed tracking, images, and status updates."})]}),(0,Pe.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,Pe.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4",children:(0,Pe.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"})}),(0,Pe.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Analytics & Reports"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Advanced analytics dashboard with sales insights, profit tracking, and performance metrics."})]}),(0,Pe.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[(0,Pe.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:(0,Pe.jsx)("span",{className:"text-2xl",children:"\u2699\ufe0f"})}),(0,Pe.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Admin Controls"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Comprehensive admin panel with user management, settings, and system configuration."})]})]})})]}),(0,Pe.jsx)("footer",{className:"bg-white border-t border-gray-200",children:(0,Pe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,Pe.jsx)("span",{className:"text-white font-bold text-sm",children:"CS"})}),(0,Pe.jsx)("span",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Car Sale System"})]}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"\xa9 2025 Car Sale System. All rights reserved."})]})})})]}),Ue=()=>{const{login:e}=De(),[t,n]=(0,s.useState)({email:"",password:""}),[r,i]=(0,s.useState)(!1),[a,o]=(0,s.useState)(""),l=e=>{n(je(je({},t),{},{[e.target.name]:e.target.value}))};return(0,Pe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,Pe.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsx)("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mb-6",children:(0,Pe.jsx)("span",{className:"text-2xl text-white",children:"\ud83d\ude97"})}),(0,Pe.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Sign in to your car sale account"})]}),(0,Pe.jsxs)("div",{className:"bg-white shadow-xl rounded-xl border border-gray-100 p-8",children:[a&&(0,Pe.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[(0,Pe.jsx)("span",{className:"text-red-500 mr-2",children:"\u26a0\ufe0f"}),a]}),(0,Pe.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),i(!0),o("");try{await e(t)}catch(a){o(a.message||"Login failed")}finally{i(!1)}},className:"space-y-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Pe.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t.email,onChange:l,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Pe.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t.password,onChange:l,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password"})]}),(0,Pe.jsx)("button",{type:"submit",disabled:r,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:r?(0,Pe.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Pe.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Pe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Pe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):"Sign In"})]}),(0,Pe.jsx)("div",{className:"mt-6 text-center",children:(0,Pe.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,Pe.jsx)("a",{href:"/register",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200",children:"Sign up here"})]})})]}),(0,Pe.jsx)("div",{className:"text-center",children:(0,Pe.jsx)("p",{className:"text-xs text-gray-500",children:"\xa9 2024 Car Sale System. All rights reserved."})})]})})},Fe=()=>{const{register:e}=De(),[t,n]=(0,s.useState)({email:"",password:"",displayName:"",confirmPassword:""}),[r,i]=(0,s.useState)(!1),[a,o]=(0,s.useState)(""),l=e=>{n(je(je({},t),{},{[e.target.name]:e.target.value}))};return(0,Pe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:(0,Pe.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsx)("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl flex items-center justify-center mb-6",children:(0,Pe.jsx)("span",{className:"text-2xl text-white",children:"\ud83d\ude97"})}),(0,Pe.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Join the car sale community today"})]}),(0,Pe.jsxs)("div",{className:"bg-white shadow-xl rounded-xl border border-gray-100 p-8",children:[a&&(0,Pe.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[(0,Pe.jsx)("span",{className:"text-red-500 mr-2",children:"\u26a0\ufe0f"}),a]}),(0,Pe.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),i(!0),o(""),t.password!==t.confirmPassword)return o("Passwords do not match"),void i(!1);if(t.password.length<6)return o("Password must be at least 6 characters long"),void i(!1);try{await e(t)}catch(a){o(a.message||"Registration failed")}finally{i(!1)}},className:"space-y-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,Pe.jsx)("input",{id:"displayName",name:"displayName",type:"text",autoComplete:"name",required:!0,value:t.displayName,onChange:l,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your full name"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Pe.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t.email,onChange:l,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,Pe.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:t.password,onChange:l,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Create a password"}),(0,Pe.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 6 characters long"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),(0,Pe.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:t.confirmPassword,onChange:l,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"Confirm your password"})]}),(0,Pe.jsx)("button",{type:"submit",disabled:r,className:"w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-medium rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:r?(0,Pe.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Pe.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Pe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Pe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})]}),(0,Pe.jsx)("div",{className:"mt-6 text-center",children:(0,Pe.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,Pe.jsx)("a",{href:"/login",className:"font-medium text-purple-600 hover:text-purple-500 transition-colors duration-200",children:"Sign in here"})]})})]}),(0,Pe.jsx)("div",{className:"text-center",children:(0,Pe.jsx)("p",{className:"text-xs text-gray-500",children:"\xa9 2024 Car Sale System. All rights reserved."})})]})})},Ve=[{id:"demo-1",chassisNumber:"DEMO001",brand:"Toyota",model:"Prius",year:2020,grade:"S",country:"Japan",purchasePrice:25e5,cifValue:28e5,lcValue:3e6,sellingPrice:35e5,netProfit:5e5,restPayment:0,advancePayment:35e5,price:35e5,tax:0,duty:0,totalAmount:35e5,status:"available",images:["https://via.placeholder.com/400x300?text=Toyota+Prius"],addedBy:"demo-user",createdAt:new Date,updatedAt:new Date},{id:"demo-2",chassisNumber:"DEMO002",brand:"Honda",model:"Civic",year:2019,grade:"EX",country:"Japan",purchasePrice:22e5,cifValue:25e5,lcValue:27e5,sellingPrice:32e5,netProfit:5e5,restPayment:2e5,advancePayment:3e6,price:32e5,tax:0,duty:0,totalAmount:32e5,status:"sold",images:["https://via.placeholder.com/400x300?text=Honda+Civic"],purchaserName:"John Doe",purchaserPhone:"+94771234567",purchaserIdNumber:"123456789V",purchaserAddress:"123 Main St, Colombo",addedBy:"demo-user",createdAt:new Date,updatedAt:new Date},{id:"demo-3",chassisNumber:"DEMO003",brand:"Nissan",model:"Note",year:2021,grade:"X",country:"Japan",purchasePrice:18e5,cifValue:21e5,lcValue:23e5,sellingPrice:28e5,netProfit:5e5,restPayment:1e5,advancePayment:27e5,price:28e5,tax:0,duty:0,totalAmount:28e5,status:"pending",images:["https://via.placeholder.com/400x300?text=Nissan+Note"],shippingCompany:"Ocean Logistics",shippingDate:new Date("2025-08-15"),arrivalDate:new Date("2025-09-15"),addedBy:"demo-user",createdAt:new Date,updatedAt:new Date}];const ze=e=>({add:async t=>{if(console.log("Mock Firestore add:",e,t),"vehicles"===e){const e=je(je({},t),{},{id:"demo-"+Date.now(),createdAt:new Date,updatedAt:new Date});return Ve.push(e),{id:e.id}}return{id:"mock-doc-"+Date.now()}},get:async()=>"vehicles"===e?{docs:Ve.map(e=>({id:e.id,data:()=>e})),forEach:e=>{Ve.forEach(t=>{e({id:t.id,data:()=>t})})}}:{docs:[],forEach:()=>{}},where:()=>({get:async()=>({docs:[],forEach:()=>{}})})}),Be=e=>({set:async t=>{console.log("Mock Firestore set:",e,t)},get:async()=>{const[t,n]=e.split("/");if("vehicles"===t){const e=Ve.find(e=>e.id===n);return{exists:()=>!!e,data:()=>e,id:n}}return{exists:()=>!1,data:()=>null}},update:async t=>{const[n,r]=e.split("/");if("vehicles"===n){const e=Ve.findIndex(e=>e.id===r);-1!==e&&(Ve[e]=je(je(je({},Ve[e]),t),{},{updatedAt:new Date}))}console.log("Mock Firestore update:",e,t)},delete:async()=>{const[t,n]=e.split("/");if("vehicles"===t){const e=Ve.findIndex(e=>e.id===n);-1!==e&&Ve.splice(e,1)}console.log("Mock Firestore delete:",e)}}),qe=()=>{const{currentUser:e,logout:t,isAdmin:n}=De(),r=ee(),i=J(),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),u=async()=>{try{await t(),r("/login")}catch(e){console.error("Error logging out:",e)}},d=e=>i.pathname===e,h=[{name:"Dashboard",path:"/dashboard",icon:"\ud83c\udfe0"},{name:"Add Vehicle",path:"/add-vehicle",icon:"\u2795"},{name:"Analytics",path:"/analytics",icon:"\ufffd"},{name:"Settings",path:"/settings",icon:"\u2699\ufe0f"}];return e?(0,Pe.jsxs)("nav",{className:"modern-nav",children:[(0,Pe.jsxs)("div",{className:"nav-container",children:[(0,Pe.jsx)("div",{className:"nav-brand",children:(0,Pe.jsxs)("a",{href:"/dashboard",className:"brand-link",children:[(0,Pe.jsx)("div",{className:"brand-icon",children:"\ud83d\ude97"}),(0,Pe.jsx)("div",{className:"brand-text",children:"CarSale"})]})}),(0,Pe.jsx)("div",{className:"nav-menu",children:h.map(e=>(0,Pe.jsxs)("a",{href:e.path,className:"nav-item ".concat(d(e.path)?"nav-item-active":""),children:[(0,Pe.jsx)("span",{className:"nav-item-icon",children:e.icon}),(0,Pe.jsx)("span",{className:"nav-item-text",children:e.name})]},e.path))}),(0,Pe.jsxs)("div",{className:"nav-user",children:[(0,Pe.jsxs)("div",{className:"user-section",children:[(0,Pe.jsx)("div",{className:"user-avatar",children:e.displayName?e.displayName.charAt(0).toUpperCase():"U"}),(0,Pe.jsxs)("div",{className:"user-details",children:[(0,Pe.jsx)("div",{className:"user-name",children:e.displayName||"User"}),(0,Pe.jsx)("div",{className:"user-role",children:n?"Administrator":"User"})]})]}),(0,Pe.jsxs)("div",{className:"nav-actions",children:[(0,Pe.jsx)("button",{onClick:()=>c(!l),className:"user-menu-btn",title:"User menu",children:(0,Pe.jsx)("span",{className:"menu-dots",children:"\u22ee"})}),l&&(0,Pe.jsxs)("div",{className:"user-dropdown",children:[(0,Pe.jsx)("div",{className:"dropdown-item",children:(0,Pe.jsxs)("a",{href:"/settings",className:"dropdown-link",children:[(0,Pe.jsx)("span",{className:"dropdown-icon",children:"\u2699\ufe0f"}),(0,Pe.jsx)("span",{children:"Settings"})]})}),(0,Pe.jsx)("div",{className:"dropdown-divider"}),(0,Pe.jsx)("div",{className:"dropdown-item",children:(0,Pe.jsxs)("button",{onClick:u,className:"dropdown-link logout-btn",children:[(0,Pe.jsx)("span",{className:"dropdown-icon",children:"\ud83d\udeaa"}),(0,Pe.jsx)("span",{children:"Logout"})]})})]})]})]}),(0,Pe.jsx)("button",{className:"mobile-menu-toggle",onClick:()=>o(!a),"aria-label":"Toggle mobile menu",children:(0,Pe.jsxs)("div",{className:"hamburger ".concat(a?"hamburger-open":""),children:[(0,Pe.jsx)("span",{className:"hamburger-line"}),(0,Pe.jsx)("span",{className:"hamburger-line"}),(0,Pe.jsx)("span",{className:"hamburger-line"})]})})]}),a&&(0,Pe.jsx)("div",{className:"mobile-nav-overlay",children:(0,Pe.jsxs)("div",{className:"mobile-nav-content",children:[(0,Pe.jsx)("div",{className:"mobile-nav-header",children:(0,Pe.jsxs)("div",{className:"mobile-user-info",children:[(0,Pe.jsx)("div",{className:"user-avatar large",children:e.displayName?e.displayName.charAt(0).toUpperCase():"U"}),(0,Pe.jsxs)("div",{className:"user-details",children:[(0,Pe.jsx)("div",{className:"user-name",children:e.displayName||"User"}),(0,Pe.jsx)("div",{className:"user-role",children:n?"Administrator":"User"})]})]})}),(0,Pe.jsx)("div",{className:"mobile-nav-menu",children:h.map(e=>(0,Pe.jsxs)("a",{href:e.path,className:"mobile-nav-item ".concat(d(e.path)?"active":""),onClick:()=>o(!1),children:[(0,Pe.jsx)("span",{className:"nav-item-icon",children:e.icon}),(0,Pe.jsx)("span",{className:"nav-item-text",children:e.name}),d(e.path)&&(0,Pe.jsx)("span",{className:"active-indicator",children:"\u25cf"})]},e.path))}),(0,Pe.jsx)("div",{className:"mobile-nav-footer",children:(0,Pe.jsxs)("button",{onClick:()=>{u(),o(!1)},className:"mobile-logout-btn",children:[(0,Pe.jsx)("span",{className:"logout-icon",children:"\ud83d\udeaa"}),(0,Pe.jsx)("span",{children:"Logout"})]})})]})})]}):null},He=e=>{let{children:t}=e;return(0,Pe.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Pe.jsx)(qe,{}),(0,Pe.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-32",children:t})]})},We=()=>{const{currentUser:e,isAdmin:t}=De(),{vehicles:n,loading:r,deleteVehicle:i}=(()=>{const[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)(!0),i=async()=>{try{r(!0),console.log("Loading vehicles using mock data");const e=ze("vehicles"),n=await e.get(),s=[];n.docs.forEach(e=>{const t=e.data();s.push(je(je({},t),{},{id:t.id||e.id}))}),t(s)}catch(e){console.error("Error loading vehicles:",e),t([])}finally{r(!1)}};return(0,s.useEffect)(()=>{i()},[]),{vehicles:e,loading:n,loadVehicles:i,addVehicle:async e=>{try{console.log("Adding vehicle using mock data");const n=ze("vehicles"),r=await n.add(je(je({},e),{},{createdAt:new Date,updatedAt:new Date})),s=je(je({id:r.id},e),{},{createdAt:new Date,updatedAt:new Date});return t(e=>[...e,s]),r.id}catch(n){throw console.error("Error adding vehicle:",n),n}},updateVehicle:async(e,n)=>{try{console.log("Updating vehicle using mock data");const r=Be("vehicles/".concat(e));await r.update(je(je({},n),{},{updatedAt:new Date})),t(t=>t.map(t=>t.id===e?je(je(je({},t),n),{},{updatedAt:new Date}):t))}catch(r){throw console.error("Error updating vehicle:",r),r}},deleteVehicle:async e=>{try{console.log("Deleting vehicle using mock data");const n=Be("vehicles/".concat(e));await n.delete(),t(t=>t.filter(t=>t.id!==e))}catch(n){throw console.error("Error deleting vehicle:",n),n}},getVehicle:async e=>{try{console.log("Getting vehicle using mock data");const t=Be("vehicles/".concat(e)),n=await t.get();if(n.exists()){const e=n.data();if(e)return je(je({},e),{},{id:e.id||n.id})}return null}catch(t){return console.error("Error getting vehicle:",t),null}}}})(),[a,o]=(0,s.useState)(""),[l,c]=(0,s.useState)([]),[u,d]=(0,s.useState)("all");(0,s.useEffect)(()=>{h()},[a,n,u]);const h=()=>{let e=n;a&&(e=e.filter(e=>e.brand.toLowerCase().includes(a.toLowerCase())||e.model.toLowerCase().includes(a.toLowerCase())||e.chassisNumber.toLowerCase().includes(a.toLowerCase())||e.country.toLowerCase().includes(a.toLowerCase()))),"all"!==u&&(e=e.filter(e=>e.status===u)),c(e)},f=e=>{const t=e.price+e.tax+e.duty;return(e.sellingPrice||e.totalAmount||0)-t},p=e=>{switch(e){case"available":return"bg-green-100 text-green-800 border-green-200";case"sold":return"bg-blue-100 text-blue-800 border-blue-200";case"reserved":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return r?(0,Pe.jsx)(He,{children:(0,Pe.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Pe.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,Pe.jsxs)(He,{children:[(0,Pe.jsxs)("div",{className:"mb-8",style:{paddingTop:"70px"},children:[(0,Pe.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Vehicle Inventory"}),(0,Pe.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",(null===e||void 0===e?void 0:e.displayName)||"User","! Here's your vehicle overview."]})]}),(0,Pe.jsx)("div",{className:"mb-8 flex flex-col sm:flex-row gap-4",children:(0,Pe.jsxs)("a",{href:"/add-vehicle",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,Pe.jsx)("span",{className:"mr-2",children:"\u2795"}),"Add New Vehicle"]})}),(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,Pe.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200",children:(0,Pe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Vehicles"}),(0,Pe.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:l.length})]}),(0,Pe.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,Pe.jsx)("span",{className:"text-2xl",children:"\ud83d\ude97"})})]})}),(0,Pe.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200",children:(0,Pe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Available"}),(0,Pe.jsx)("p",{className:"text-3xl font-bold text-green-600",children:l.filter(e=>"available"===e.status).length})]}),(0,Pe.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,Pe.jsx)("span",{className:"text-2xl",children:"\u2705"})})]})}),(0,Pe.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200",children:(0,Pe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Sold"}),(0,Pe.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:l.filter(e=>"sold"===e.status).length})]}),(0,Pe.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,Pe.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"})})]})}),(0,Pe.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200",children:(0,Pe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Profit"}),(0,Pe.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:["Rs. ",l.reduce((e,t)=>e+f(t),0).toLocaleString()]})]}),(0,Pe.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,Pe.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc8"})})]})})]}),(0,Pe.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 mb-6",children:(0,Pe.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,Pe.jsx)("div",{className:"flex-1",children:(0,Pe.jsx)("input",{type:"text",placeholder:"Search by brand, model, chassis number, or country...",value:a,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})}),(0,Pe.jsx)("div",{className:"flex gap-2",children:["all","available","sold","reserved"].map(e=>(0,Pe.jsx)("button",{onClick:()=>d(e),className:"px-4 py-3 rounded-lg font-medium capitalize transition-all duration-200 ".concat(u===e?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]})}),0===l.length?(0,Pe.jsxs)("div",{className:"bg-white rounded-xl p-12 shadow-sm border border-gray-100 text-center",children:[(0,Pe.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Pe.jsx)("span",{className:"text-3xl",children:"\ud83d\ude97"})}),(0,Pe.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No vehicles found"}),(0,Pe.jsx)("p",{className:"text-gray-600 mb-6",children:a||"all"!==u?"Try adjusting your search criteria or filters.":"Get started by adding your first vehicle to the inventory."}),(0,Pe.jsxs)("a",{href:"/add-vehicle",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[(0,Pe.jsx)("span",{className:"mr-2",children:"\u2795"}),"Add First Vehicle"]})]}):(0,Pe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1",children:[(0,Pe.jsx)("div",{className:"aspect-w-16 aspect-h-9 bg-gray-100",children:e.images&&e.images[0]?(0,Pe.jsx)("img",{src:e.images[0],alt:"".concat(e.brand," ").concat(e.model),className:"w-full h-48 object-cover"}):(0,Pe.jsx)("div",{className:"w-full h-48 bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:(0,Pe.jsx)("span",{className:"text-4xl text-gray-400",children:"\ud83d\ude97"})})}),(0,Pe.jsxs)("div",{className:"p-6",children:[(0,Pe.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:[e.brand," ",e.model]}),(0,Pe.jsxs)("p",{className:"text-sm text-gray-600",children:[e.year," \u2022 ",e.country]})]}),(0,Pe.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium border ".concat(p(e.status)),children:e.status})]}),(0,Pe.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,Pe.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Pe.jsx)("span",{className:"text-gray-600",children:"Chassis:"}),(0,Pe.jsx)("span",{className:"font-medium text-gray-900",children:e.chassisNumber})]}),(0,Pe.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Pe.jsx)("span",{className:"text-gray-600",children:"Price:"}),(0,Pe.jsxs)("span",{className:"font-medium text-gray-900",children:["Rs. ",e.price.toLocaleString()]})]}),t&&(0,Pe.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Pe.jsx)("span",{className:"text-gray-600",children:"Profit:"}),(0,Pe.jsxs)("span",{className:"font-medium ".concat(f(e)>=0?"text-green-600":"text-red-600"),children:["Rs. ",f(e).toLocaleString()]})]})]}),(0,Pe.jsxs)("div",{className:"flex gap-2",children:[(0,Pe.jsx)("a",{href:"/vehicle/".concat(e.id),className:"flex-1 px-4 py-2 bg-blue-50 text-blue-700 text-center text-sm font-medium rounded-lg hover:bg-blue-100 transition-colors duration-200",children:"View"}),(0,Pe.jsx)("a",{href:"/edit-vehicle/".concat(e.id),className:"flex-1 px-4 py-2 bg-green-50 text-green-700 text-center text-sm font-medium rounded-lg hover:bg-green-100 transition-colors duration-200",children:"Edit"}),t&&(0,Pe.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this vehicle?"))try{await i(e)}catch(t){console.error("Error deleting vehicle:",t)}})(e.id),className:"px-4 py-2 bg-red-50 text-red-700 text-sm font-medium rounded-lg hover:bg-red-100 transition-colors duration-200",children:"Delete"})]})]})]},e.id))})]})},Ke=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ke(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new Qe;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Qe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ye=function(e){return function(e){const t=Ke(e);return Ge.encodeByteArray(t,!0)}(e).replace(/\./g,"")},$e=function(e){try{return Ge.decodeString(e,!0)}catch(Em){console.error("base64Decode failed: ",Em)}return null};const Xe=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Je=()=>{try{return Xe()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/carsale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Em){return}const t=e&&$e(e[1]);return t&&JSON.parse(t)})()}catch(Em){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Em))}},Ze=e=>{var t,n;return null===(n=null===(t=Je())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},et=e=>{const t=Ze(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},tt=()=>{var e;return null===(e=Je())||void 0===e?void 0:e.config},nt=e=>{var t;return null===(t=Je())||void 0===t?void 0:t["_".concat(e)]};class rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function st(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ye(JSON.stringify({alg:"none",type:"JWT"})),Ye(JSON.stringify(i)),""].join(".")}function it(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function at(){return!function(){var e;const t=null===(e=Je())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Em){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ot(){try{return"object"===typeof indexedDB}catch(Em){return!1}}class lt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,lt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ct.prototype.create)}}class ct{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(ut,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new lt(n,i,t)}}const ut=/\{\$([^}]+)}/g;function dt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(ht(n)&&ht(i)){if(!dt(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ht(e){return null!==e&&"object"===typeof e}function ft(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function pt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function mt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class gt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=yt),void 0===r.error&&(r.error=yt),void 0===r.complete&&(r.complete=yt);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Em){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Em){"undefined"!==typeof console&&console.error&&console.error(Em)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yt(){}function vt(e){return e&&e._delegate?e._delegate:e}class bt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const wt="[DEFAULT]";class xt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new rt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Em){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Em){if(r)return null;throw Em}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:wt})}catch(Em){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Em){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===wt?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.component?this.component.multipleInstances?e:wt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _t{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Nt=[];var Et;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Et||(Et={}));const St={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},kt=Et.INFO,Ct={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},Tt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ct[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class It{constructor(e){this.name=e,this._logLevel=kt,this._logHandler=Tt,this._userLogHandler=null,Nt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?St[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...t),this._logHandler(this,Et.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...t),this._logHandler(this,Et.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Et.INFO,...t),this._logHandler(this,Et.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Et.WARN,...t),this._logHandler(this,Et.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...t),this._logHandler(this,Et.ERROR,...t)}}let jt,At;const Pt=new WeakMap,Rt=new WeakMap,Dt=new WeakMap,Ot=new WeakMap,Lt=new WeakMap;let Mt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Rt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Dt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ut(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(At||(At=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(zt(this),n),Vt(Pt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Vt(e.apply(zt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(zt(this),t,...r);return Dt.set(i,t.sort?t.sort():[t]),Vt(i)}}function Ft(e){return"function"===typeof e?Ut(e):(e instanceof IDBTransaction&&function(e){if(Rt.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});Rt.set(e,t)}(e),t=e,(jt||(jt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Mt):e);var t}function Vt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Vt(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Pt.set(t,e)}).catch(()=>{}),Lt.set(t,e),t}(e);if(Ot.has(e))return Ot.get(e);const t=Ft(e);return t!==e&&(Ot.set(e,t),Lt.set(t,e)),t}const zt=e=>Lt.get(e);const Bt=["get","getKey","getAll","getAllKeys","count"],qt=["put","add","delete","clear"],Ht=new Map;function Wt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ht.get(t))return Ht.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=qt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Bt.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return Ht.set(t,i),i}Mt=(e=>je(je({},e),{},{get:(t,n,r)=>Wt(t,n)||e.get(t,n,r),has:(t,n)=>!!Wt(t,n)||e.has(t,n)}))(Mt);class Kt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Gt="@firebase/app",Qt="0.10.13",Yt=new It("@firebase/app"),$t="@firebase/app-compat",Xt="@firebase/analytics-compat",Jt="@firebase/analytics",Zt="@firebase/app-check-compat",en="@firebase/app-check",tn="@firebase/auth",nn="@firebase/auth-compat",rn="@firebase/database",sn="@firebase/data-connect",an="@firebase/database-compat",on="@firebase/functions",ln="@firebase/functions-compat",cn="@firebase/installations",un="@firebase/installations-compat",dn="@firebase/messaging",hn="@firebase/messaging-compat",fn="@firebase/performance",pn="@firebase/performance-compat",mn="@firebase/remote-config",gn="@firebase/remote-config-compat",yn="@firebase/storage",vn="@firebase/storage-compat",bn="@firebase/firestore",wn="@firebase/vertexai-preview",xn="@firebase/firestore-compat",_n="firebase",Nn="[DEFAULT]",En={[Gt]:"fire-core",[$t]:"fire-core-compat",[Jt]:"fire-analytics",[Xt]:"fire-analytics-compat",[en]:"fire-app-check",[Zt]:"fire-app-check-compat",[tn]:"fire-auth",[nn]:"fire-auth-compat",[rn]:"fire-rtdb",[sn]:"fire-data-connect",[an]:"fire-rtdb-compat",[on]:"fire-fn",[ln]:"fire-fn-compat",[cn]:"fire-iid",[un]:"fire-iid-compat",[dn]:"fire-fcm",[hn]:"fire-fcm-compat",[fn]:"fire-perf",[pn]:"fire-perf-compat",[mn]:"fire-rc",[gn]:"fire-rc-compat",[yn]:"fire-gcs",[vn]:"fire-gcs-compat",[bn]:"fire-fst",[xn]:"fire-fst-compat",[wn]:"fire-vertex","fire-js":"fire-js",[_n]:"fire-js-all"},Sn=new Map,kn=new Map,Cn=new Map;function Tn(e,t){try{e.container.addComponent(t)}catch(Em){Yt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Em)}}function In(e){const t=e.name;if(Cn.has(t))return Yt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Cn.set(t,e);for(const n of Sn.values())Tn(n,e);for(const n of kn.values())Tn(n,e);return!0}function jn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function An(e){return void 0!==e.settings}const Pn=new ct("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Rn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new bt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}}const Dn="10.14.1";function On(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Nn,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Pn.create("bad-app-name",{appName:String(s)});if(n||(n=tt()),!n)throw Pn.create("no-options");const i=Sn.get(s);if(i){if(dt(n,i.options)&&dt(r,i.config))return i;throw Pn.create("duplicate-app",{appName:s})}const a=new _t(s);for(const l of Cn.values())a.addComponent(l);const o=new Rn(n,r,a);return Sn.set(s,o),o}function Ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn;const t=Sn.get(e);if(!t&&e===Nn&&tt())return On();if(!t)throw Pn.create("no-app",{appName:e});return t}function Mn(e,t,n){var r;let s=null!==(r=En[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Yt.warn(e.join(" "))}In(new bt("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Un="firebase-heartbeat-store";let Fn=null;function Vn(){return Fn||(Fn=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Vt(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Vt(a.result),e.oldVersion,e.newVersion,Vt(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Un)}catch(Em){console.warn(Em)}}}).catch(e=>{throw Pn.create("idb-open",{originalErrorMessage:e.message})})),Fn}async function zn(e,t){try{const n=(await Vn()).transaction(Un,"readwrite"),r=n.objectStore(Un);await r.put(t,Bn(e)),await n.done}catch(Em){if(Em instanceof lt)Yt.warn(Em.message);else{const t=Pn.create("idb-set",{originalErrorMessage:null===Em||void 0===Em?void 0:Em.message});Yt.warn(t.message)}}}function Bn(e){return"".concat(e.name,"!").concat(e.options.appId)}class qn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Hn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Em){Yt.warn(Em)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Hn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Kn(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Kn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=Ye(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Em){return Yt.warn(Em),""}}}function Hn(){return(new Date).toISOString().substring(0,10)}class Wn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ot()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Vn()).transaction(Un),n=await t.objectStore(Un).get(Bn(e));return await t.done,n}catch(Em){if(Em instanceof lt)Yt.warn(Em.message);else{const t=Pn.create("idb-get",{originalErrorMessage:null===Em||void 0===Em?void 0:Em.message});Yt.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Kn(e){return Ye(JSON.stringify({version:2,heartbeats:e})).length}var Gn;Gn="",In(new bt("platform-logger",e=>new Kt(e),"PRIVATE")),In(new bt("heartbeat",e=>new qn(e),"PRIVATE")),Mn(Gt,Qt,Gn),Mn(Gt,Qt,"esm2017"),Mn("fire-js","");var Qn,Yn,$n="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Xn={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=l*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Yn=Xn.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},Qn=Xn.Integer=r}).apply("undefined"!==typeof $n?$n:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Jn,Zn,er,tr,nr,rr,sr,ir,ar="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},or={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ar&&ar];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function N(e){s.setTimeout(()=>{throw e},0)}function E(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new k,e=>e.reset());class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,T=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(A)}};var A=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){N(n)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function P(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,R);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=q(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new F(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,n,r,s){if(r&&r.once)return Q(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)K(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!1,r,s)}function G(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Y(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(i=e.g[t],n,r,s))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,s)),(n=-1<e?t[e]:null)&&$(n))}function $(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function X(e){return e in W?W[e]:W[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&$(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var s=t;x(t=new R(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&$(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){R.call(this,"d")}function be(){R.call(this,"c")}d(ve,R),d(be,R);var we={},xe=null;function _e(){return xe=xe||new ne}function Ne(e){R.call(this,we.La,e)}function Ee(e){const t=_e();re(t,new Ne(t))}function Se(e,t){R.call(this,we.STAT_EVENT,e),this.stat=t}function ke(e){const t=_e();re(t,new Se(t,e))}function Ce(e,t){R.call(this,we.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function je(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(Ne,R),we.STAT_EVENT="statevent",d(Se,R),we.Ma="timingevent",d(Ce,R),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Ae,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Ae=new De;var Me={},Ue={};function Fe(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=K(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function We(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),$t(n)}rn(n),ke(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(We(o),qe(o)),r.g=a}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=h||7==t||Ee(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Kt(this.g);e="";var i=r.length,a=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),Ge(this),Ke(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Ue){4==h&&(this.s=4,ke(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,ke(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,ke(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else je(this.i,this.l,o,null),Qe(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=_(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ge(this),Ke(this)}}}catch(lr){}},Oe.prototype.cancel=function(){this.J=!0,Ge(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ee(),ke(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function $e(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}$e.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Nt(this,t),St(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Nt(e,t){_t(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return _t(e),t=kt(e,t),e.g.has(t)}function St(e,t,n){Nt(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),h(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Tt(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Em){throw t.push(r+"type="+encodeURIComponent("_badmap")),Em}}function jt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){_t(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){_t(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){_t(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return _t(this),this.i=null,Et(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(jt,pe),jt.prototype.g=function(){return new At(this.l,this.j)},jt.prototype.i=(mt={},function(){return mt}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Dt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ut=/^https?$/i,Ft=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Ut.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Wt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Ht(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Em){}}}function Ht(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(dr){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Xt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}dn(e)}function $t(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){$t(e),e.u&&(s.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||j(),T||(C(),T=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{It(o,e,"req"+n+"_")}catch(lr){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||j(),T||(C(),T=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=_e(),new Ce(r,n)),Jt(e)}else nn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(s.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ct(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ct(0,0,!1,t)})}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),dn(e),Xt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new jt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?me(this.o):me(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Vt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Vt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),x(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ot(i)))+"&"+t:this.m&&Lt(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Fe(s,n,null)):Fe(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),$t(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,$t(this),rn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},d(yn,ve),d(vn,be),d(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,ir=or.createWebChannelTransport=function(){return new mn},sr=or.getStatEventTarget=function(){return _e()},rr=or.Event=we,nr=or.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,tr=or.ErrorCode=Pe,Re.COMPLETE="complete",er=or.EventType=Re,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Zn=or.WebChannel=ge,or.FetchXmlHttpFactory=jt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Jn=or.XhrIo=Mt}).apply("undefined"!==typeof ar?ar:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const lr="@firebase/firestore";class cr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");let ur="10.14.0";const dr=new It("@firebase/firestore");function hr(){return dr.logLevel}function fr(e){if(dr.logLevel<=Et.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(gr);dr.debug("Firestore (".concat(ur,"): ").concat(e),...s)}}function pr(e){if(dr.logLevel<=Et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(gr);dr.error("Firestore (".concat(ur,"): ").concat(e),...s)}}function mr(e){if(dr.logLevel<=Et.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(gr);dr.warn("Firestore (".concat(ur,"): ").concat(e),...s)}}function gr(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(ur,") INTERNAL ASSERTION FAILED: ")+e;throw pr(t),new Error(t)}function vr(e,t){e||yr()}function br(e,t){return e}const wr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xr extends lt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class _r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Nr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Er{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cr.UNAUTHENTICATED))}shutdown(){}}class Sr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kr{constructor(e){this.t=e,this.currentUser=cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vr(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _r,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{fr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(fr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _r)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(fr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(vr("string"==typeof t.accessToken),new Nr(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vr(null===e||"string"==typeof e),new cr(e)}}class Cr{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Tr{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Cr(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ir{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jr{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){vr(void 0===this.o);const n=e=>{null!=e.error&&fr("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,fr("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{fr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):fr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(vr("string"==typeof e.token),this.R=e.token,new Ir(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ar(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Pr{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Ar(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function Rr(e,t){return e<t?-1:e>t?1:0}function Dr(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xr(wr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xr(wr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xr(wr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xr(wr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Or.fromMillis(Date.now())}static fromDate(e){return Or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Or(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rr(this.nanoseconds,e.nanoseconds):Rr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lr(e)}static min(){return new Lr(new Or(0,0))}static max(){return new Lr(new Or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mr{constructor(e,t,n){void 0===t?t=0:t>e.length&&yr(),void 0===n?n=e.length-t:n>e.length-t&&yr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Mr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ur extends Mr{construct(e,t,n){return new Ur(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new xr(wr.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new Ur(e)}static emptyPath(){return new Ur([])}}const Fr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vr extends Mr{construct(e,t,n){return new Vr(e,t,n)}static isValidIdentifier(e){return Fr.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vr(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new xr(wr.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new xr(wr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new xr(wr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new xr(wr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vr(t)}static emptyPath(){return new Vr([])}}class zr{constructor(e){this.path=e}static fromPath(e){return new zr(Ur.fromString(e))}static fromName(e){return new zr(Ur.fromString(e).popFirst(5))}static empty(){return new zr(Ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ur.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ur.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zr(new Ur(e.slice()))}}class Br{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Br.UNKNOWN_ID=-1;function qr(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Lr.fromTimestamp(1e9===r?new Or(n+1,0):new Or(n,r));return new Wr(s,zr.empty(),t)}function Hr(e){return new Wr(e.readTime,e.key,-1)}class Wr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Wr(Lr.min(),zr.empty(),-1)}static max(){return new Wr(Lr.max(),zr.empty(),-1)}}function Kr(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=zr.comparator(e.documentKey,t.documentKey),0!==n?n:Rr(e.largestBatchId,t.largestBatchId))}const Gr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Yr(e){if(e.code!==wr.FAILED_PRECONDITION||e.message!==Gr)throw e;fr("LocalStore","Unexpectedly lost primary lease")}class $r{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $r((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $r?t:$r.resolve(t)}catch(e){return $r.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$r.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$r.reject(t)}static resolve(e){return new $r((t,n)=>{t(e)})}static reject(e){return new $r((t,n)=>{n(e)})}static waitFor(e){return new $r((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=$r.resolve(!1);for(const n of e)t=t.next(e=>e?$r.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new $r((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new $r((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Xr(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jr(e){return"IndexedDbTransactionError"===e.name}class Zr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function es(e){return null==e}function ts(e){return 0===e&&1/e==-1/0}function ns(e){return"number"==typeof e&&Number.isInteger(e)&&!ts(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Zr.oe=-1;const rs=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ss=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],is=ss,as=[...is,"indexConfiguration","indexState","indexEntries"];function os(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ls(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function cs(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class us{constructor(e,t){this.comparator=e,this.root=t||hs.EMPTY}insert(e,t){return new us(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hs.BLACK,null,null))}remove(e){return new us(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ds(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ds(this.root,e,this.comparator,!1)}getReverseIterator(){return new ds(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ds(this.root,e,this.comparator,!0)}}class ds{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hs{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:hs.RED,this.left=null!=r?r:hs.EMPTY,this.right=null!=s?s:hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new hs(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return hs.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yr();if(this.right.isRed())throw yr();const e=this.left.check();if(e!==this.right.check())throw yr();return e+(this.isRed()?0:1)}}hs.EMPTY=null,hs.RED=!0,hs.BLACK=!1,hs.EMPTY=new class{constructor(){this.size=0}get key(){throw yr()}get value(){throw yr()}get color(){throw yr()}get left(){throw yr()}get right(){throw yr()}copy(e,t,n,r,s){return this}insert(e,t,n){return new hs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fs{constructor(e){this.comparator=e,this.data=new us(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ps(this.data.getIterator())}getIteratorFrom(e){return new ps(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof fs))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fs(this.comparator);return t.data=e,t}}class ps{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ms{constructor(e){this.fields=e,e.sort(Vr.comparator)}static empty(){return new ms([])}unionWith(e){let t=new fs(Vr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Dr(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class gs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ys{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new gs("Invalid base64 string: "+e):e}}(e);return new ys(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ys(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ys.EMPTY_BYTE_STRING=new ys("");const vs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(e){if(vr(!!e),"string"==typeof e){let t=0;const n=vs.exec(e);if(vr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ws(e.seconds),nanos:ws(e.nanos)}}function ws(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xs(e){return"string"==typeof e?ys.fromBase64String(e):ys.fromUint8Array(e)}function _s(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ns(e){const t=e.mapValue.fields.__previous_value__;return _s(t)?Ns(t):t}function Es(e){const t=bs(e.mapValue.fields.__local_write_time__.timestampValue);return new Or(t.seconds,t.nanos)}class Ss{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class ks{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ks("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ks&&e.projectId===this.projectId&&e.database===this.database}}const Cs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ts(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_s(e)?4:Hs(e)?9007199254740991:Bs(e)?10:11:yr()}function Is(e,t){if(e===t)return!0;const n=Ts(e);if(n!==Ts(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Es(e).isEqual(Es(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=bs(e.timestampValue),r=bs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xs(e.bytesValue).isEqual(xs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ws(e.geoPointValue.latitude)===ws(t.geoPointValue.latitude)&&ws(e.geoPointValue.longitude)===ws(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ws(e.integerValue)===ws(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ws(e.doubleValue),r=ws(t.doubleValue);return n===r?ts(n)===ts(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Dr(e.arrayValue.values||[],t.arrayValue.values||[],Is);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(os(n)!==os(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Is(n[s],r[s])))return!1;return!0}(e,t);default:return yr()}}function js(e,t){return void 0!==(e.values||[]).find(e=>Is(e,t))}function As(e,t){if(e===t)return 0;const n=Ts(e),r=Ts(t);if(n!==r)return Rr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ws(e.integerValue||e.doubleValue),r=ws(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ps(e.timestampValue,t.timestampValue);case 4:return Ps(Es(e),Es(t));case 5:return Rr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=xs(e),r=xs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Rr(n[s],r[s]);if(0!==e)return e}return Rr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Rr(ws(e.latitude),ws(t.latitude));return 0!==n?n:Rr(ws(e.longitude),ws(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Rs(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=Rr((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Rs(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Cs.mapValue&&t===Cs.mapValue)return 0;if(e===Cs.mapValue)return 1;if(t===Cs.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Rr(r[a],i[a]);if(0!==e)return e;const t=As(n[r[a]],s[i[a]]);if(0!==t)return t}return Rr(r.length,i.length)}(e.mapValue,t.mapValue);default:throw yr()}}function Ps(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Rr(e,t);const n=bs(e),r=bs(t),s=Rr(n.seconds,r.seconds);return 0!==s?s:Rr(n.nanos,r.nanos)}function Rs(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=As(n[s],r[s]);if(e)return e}return Rr(n.length,r.length)}function Ds(e){return Os(e)}function Os(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=bs(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return xs(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return zr.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Os(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Os(e.fields[s]));return n+"}"}(e.mapValue):yr()}function Ls(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ms(e){return!!e&&"integerValue"in e}function Us(e){return!!e&&"arrayValue"in e}function Fs(e){return!!e&&"nullValue"in e}function Vs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zs(e){return!!e&&"mapValue"in e}function Bs(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ls(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=qs(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qs(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Hs(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ws{constructor(e){this.value=e}static empty(){return new Ws({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!zs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qs(t)}setAll(e){let t=Vr.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=qs(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());zs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];zs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ls(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ws(qs(this.value))}}function Ks(e){const t=[];return ls(e.fields,(e,n)=>{const r=new Vr([e]);if(zs(n)){const e=Ks(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ms(t)}class Gs{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Gs(e,0,Lr.min(),Lr.min(),Lr.min(),Ws.empty(),0)}static newFoundDocument(e,t,n,r){return new Gs(e,1,t,Lr.min(),n,r,0)}static newNoDocument(e,t){return new Gs(e,2,t,Lr.min(),Lr.min(),Ws.empty(),0)}static newUnknownDocument(e,t){return new Gs(e,3,t,Lr.min(),Lr.min(),Ws.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Lr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ws.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ws.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Qs{constructor(e,t){this.position=e,this.inclusive=t}}function Ys(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?zr.comparator(zr.fromName(a.referenceValue),n.key):As(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function $s(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Is(e.position[n],t.position[n]))return!1;return!0}class Xs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Js(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Zs{}class ei extends Zs{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new li(e,t,n):"array-contains"===t?new hi(e,n):"in"===t?new fi(e,n):"not-in"===t?new pi(e,n):"array-contains-any"===t?new mi(e,n):new ei(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ci(e,n):new ui(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(As(t,this.value)):null!==t&&Ts(this.value)===Ts(t)&&this.matchesComparison(As(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends Zs{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ti(e,t)}matches(e){return ni(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ni(e){return"and"===e.op}function ri(e){return si(e)&&ni(e)}function si(e){for(const t of e.filters)if(t instanceof ti)return!1;return!0}function ii(e){if(e instanceof ei)return e.field.canonicalString()+e.op.toString()+Ds(e.value);if(ri(e))return e.filters.map(e=>ii(e)).join(",");{const t=e.filters.map(e=>ii(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function ai(e,t){return e instanceof ei?function(e,t){return t instanceof ei&&e.op===t.op&&e.field.isEqual(t.field)&&Is(e.value,t.value)}(e,t):e instanceof ti?function(e,t){return t instanceof ti&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&ai(n,t.filters[r]),!0)}(e,t):void yr()}function oi(e){return e instanceof ei?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ds(e.value))}(e):e instanceof ti?function(e){return e.op.toString()+" {"+e.getFilters().map(oi).join(" ,")+"}"}(e):"Filter"}class li extends ei{constructor(e,t,n){super(e,t,n),this.key=zr.fromName(n.referenceValue)}matches(e){const t=zr.comparator(e.key,this.key);return this.matchesComparison(t)}}class ci extends ei{constructor(e,t){super(e,"in",t),this.keys=di("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ui extends ei{constructor(e,t){super(e,"not-in",t),this.keys=di("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function di(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>zr.fromName(e.referenceValue))}class hi extends ei{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Us(t)&&js(t.arrayValue,this.value)}}class fi extends ei{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&js(this.value.arrayValue,t)}}class pi extends ei{constructor(e,t){super(e,"not-in",t)}matches(e){if(js(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!js(this.value.arrayValue,t)}}class mi extends ei{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Us(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>js(this.value.arrayValue,e))}}class gi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function yi(e){return new gi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function vi(e){const t=br(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ii(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),es(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ds(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ds(e)).join(",")),t.ue=e}return t.ue}function bi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Js(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ai(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$s(e.startAt,t.startAt)&&$s(e.endAt,t.endAt)}function wi(e){return zr.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class xi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _i(e,t,n,r,s,i,a,o){return new xi(e,t,n,r,s,i,a,o)}function Ni(e){return new xi(e)}function Ei(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Si(e){return null!==e.collectionGroup}function ki(e){const t=br(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new fs(Vr.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Xs(r,n))}),e.has(Vr.keyField().canonicalString())||t.ce.push(new Xs(Vr.keyField(),n))}return t.ce}function Ci(e){const t=br(e);return t.le||(t.le=Ti(t,ki(e))),t.le}function Ti(e,t){if("F"===e.limitType)return yi(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Xs(e.field,t)});const n=e.endAt?new Qs(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Qs(e.startAt.position,e.startAt.inclusive):null;return yi(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ii(e,t){const n=e.filters.concat([t]);return new xi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ji(e,t,n){return new xi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ai(e,t){return bi(Ci(e),Ci(t))&&e.limitType===t.limitType}function Pi(e){return"".concat(vi(Ci(e)),"|lt:").concat(e.limitType)}function Ri(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>oi(e)).join(", "),"]")),es(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ds(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ds(e)).join(",")),"Target(".concat(t,")")}(Ci(e)),"; limitType=").concat(e.limitType,")")}function Di(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zr.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ki(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ys(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ki(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ys(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ki(e),t))}(e,t)}function Oi(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Li(e){return(t,n)=>{let r=!1;for(const s of ki(e)){const e=Mi(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Mi(e,t,n){const r=e.field.isKeyField()?zr.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?As(r,s):yr()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yr()}}class Ui{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ls(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return cs(this.inner)}size(){return this.innerSize}}const Fi=new us(zr.comparator);function Vi(){return Fi}const zi=new us(zr.comparator);function Bi(){let e=zi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function qi(e){let t=zi;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Hi(){return Ki()}function Wi(){return Ki()}function Ki(){return new Ui(e=>e.toString(),(e,t)=>e.isEqual(t))}const Gi=new us(zr.comparator),Qi=new fs(zr.comparator);function Yi(){let e=Qi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const $i=new fs(Rr);function Xi(){return $i}function Ji(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ts(t)?"-0":t}}function Zi(e){return{integerValue:""+e}}function ea(e,t){return ns(t)?Zi(t):Ji(e,t)}class ta{constructor(){this._=void 0}}function na(e,t,n){return e instanceof ia?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&_s(t)&&(t=Ns(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof aa?oa(e,t):e instanceof la?ca(e,t):function(e,t){const n=sa(e,t),r=da(n)+da(e.Pe);return Ms(n)&&Ms(e.Pe)?Zi(r):Ji(e.serializer,r)}(e,t)}function ra(e,t,n){return e instanceof aa?oa(e,t):e instanceof la?ca(e,t):n}function sa(e,t){return e instanceof ua?function(e){return Ms(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ia extends ta{}class aa extends ta{constructor(e){super(),this.elements=e}}function oa(e,t){const n=ha(t);for(const r of e.elements)n.some(e=>Is(e,r))||n.push(r);return{arrayValue:{values:n}}}class la extends ta{constructor(e){super(),this.elements=e}}function ca(e,t){let n=ha(t);for(const r of e.elements)n=n.filter(e=>!Is(e,r));return{arrayValue:{values:n}}}class ua extends ta{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function da(e){return ws(e.integerValue||e.doubleValue)}function ha(e){return Us(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class fa{constructor(e,t){this.version=e,this.transformResults=t}}class pa{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pa}static exists(e){return new pa(void 0,e)}static updateTime(e){return new pa(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ma(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ga{}function ya(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ca(e.key,pa.none()):new _a(e.key,e.data,pa.none());{const n=e.data,r=Ws.empty();let s=new fs(Vr.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Na(e.key,r,new ms(s.toArray()),pa.none())}}function va(e,t,n){e instanceof _a?function(e,t,n){const r=e.value.clone(),s=Sa(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Na?function(e,t,n){if(!ma(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Sa(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Ea(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ba(e,t,n,r){return e instanceof _a?function(e,t,n,r){if(!ma(e.precondition,t))return n;const s=e.value.clone(),i=ka(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Na?function(e,t,n,r){if(!ma(e.precondition,t))return n;const s=ka(e.fieldTransforms,r,t),i=t.data;return i.setAll(Ea(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return ma(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function wa(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=sa(r.transform,e||null);null!=s&&(null===n&&(n=Ws.empty()),n.set(r.field,s))}return n||null}function xa(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Dr(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof aa&&t instanceof aa||e instanceof la&&t instanceof la?Dr(e.elements,t.elements,Is):e instanceof ua&&t instanceof ua?Is(e.Pe,t.Pe):e instanceof ia&&t instanceof ia}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class _a extends ga{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Na extends ga{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ea(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Sa(e,t,n){const r=new Map;vr(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,ra(a,o,n[s]))}return r}function ka(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,na(e,i,t))}return r}class Ca extends ga{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ta extends ga{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ia{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&va(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ba(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ba(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Wi();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=ya(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Lr.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yi())}isEqual(e){return this.batchId===e.batchId&&Dr(this.mutations,e.mutations,(e,t)=>xa(e,t))&&Dr(this.baseMutations,e.baseMutations,(e,t)=>xa(e,t))}}class ja{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){vr(e.mutations.length===n.length);let r=Gi;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new ja(e,t,n,r)}}class Aa{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Pa{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ra,Da;function Oa(e){switch(e){default:return yr();case wr.CANCELLED:case wr.UNKNOWN:case wr.DEADLINE_EXCEEDED:case wr.RESOURCE_EXHAUSTED:case wr.INTERNAL:case wr.UNAVAILABLE:case wr.UNAUTHENTICATED:return!1;case wr.INVALID_ARGUMENT:case wr.NOT_FOUND:case wr.ALREADY_EXISTS:case wr.PERMISSION_DENIED:case wr.FAILED_PRECONDITION:case wr.ABORTED:case wr.OUT_OF_RANGE:case wr.UNIMPLEMENTED:case wr.DATA_LOSS:return!0}}function La(e){if(void 0===e)return pr("GRPC error has no .code"),wr.UNKNOWN;switch(e){case Ra.OK:return wr.OK;case Ra.CANCELLED:return wr.CANCELLED;case Ra.UNKNOWN:return wr.UNKNOWN;case Ra.DEADLINE_EXCEEDED:return wr.DEADLINE_EXCEEDED;case Ra.RESOURCE_EXHAUSTED:return wr.RESOURCE_EXHAUSTED;case Ra.INTERNAL:return wr.INTERNAL;case Ra.UNAVAILABLE:return wr.UNAVAILABLE;case Ra.UNAUTHENTICATED:return wr.UNAUTHENTICATED;case Ra.INVALID_ARGUMENT:return wr.INVALID_ARGUMENT;case Ra.NOT_FOUND:return wr.NOT_FOUND;case Ra.ALREADY_EXISTS:return wr.ALREADY_EXISTS;case Ra.PERMISSION_DENIED:return wr.PERMISSION_DENIED;case Ra.FAILED_PRECONDITION:return wr.FAILED_PRECONDITION;case Ra.ABORTED:return wr.ABORTED;case Ra.OUT_OF_RANGE:return wr.OUT_OF_RANGE;case Ra.UNIMPLEMENTED:return wr.UNIMPLEMENTED;case Ra.DATA_LOSS:return wr.DATA_LOSS;default:return yr()}}(Da=Ra||(Ra={}))[Da.OK=0]="OK",Da[Da.CANCELLED=1]="CANCELLED",Da[Da.UNKNOWN=2]="UNKNOWN",Da[Da.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Da[Da.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Da[Da.NOT_FOUND=5]="NOT_FOUND",Da[Da.ALREADY_EXISTS=6]="ALREADY_EXISTS",Da[Da.PERMISSION_DENIED=7]="PERMISSION_DENIED",Da[Da.UNAUTHENTICATED=16]="UNAUTHENTICATED",Da[Da.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Da[Da.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Da[Da.ABORTED=10]="ABORTED",Da[Da.OUT_OF_RANGE=11]="OUT_OF_RANGE",Da[Da.UNIMPLEMENTED=12]="UNIMPLEMENTED",Da[Da.INTERNAL=13]="INTERNAL",Da[Da.UNAVAILABLE=14]="UNAVAILABLE",Da[Da.DATA_LOSS=15]="DATA_LOSS";let Ma=null;function Ua(){return new TextEncoder}const Fa=new Qn([4294967295,4294967295],0);function Va(e){const t=Ua().encode(e),n=new Yn;return n.update(t),new Uint8Array(n.digest())}function za(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Qn([n,r],0),new Qn([s,i],0)]}class Ba{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new qa("Invalid padding: ".concat(t));if(n<0)throw new qa("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new qa("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new qa("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Qn.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Qn.fromNumber(n)));return 1===r.compare(Fa)&&(r=new Qn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Va(e),[n,r]=za(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Ba(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=Va(e),[n,r]=za(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ha{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Wa.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ha(Lr.min(),r,new us(Rr),Vi(),Yi())}}class Wa{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Wa(n,t,Yi(),Yi(),Yi())}}class Ka{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Ga{constructor(e,t){this.targetId=e,this.me=t}}class Qa{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ys.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ya{constructor(){this.fe=0,this.ge=Ja(),this.pe=ys.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Yi(),t=Yi(),n=Yi();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:yr()}}),new Wa(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Ja()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,vr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $a{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vi(),this.qe=Xa(),this.Qe=new us(Rr)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:yr()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(wi(s))if(0===n){const e=new zr(s.path);this.Ue(t,e,Gs.newNoDocument(e,Lr.min()))}else vr(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Ma||Ma.et(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=xs(n).toUint8Array()}catch(e){if(e instanceof gs)return mr("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Ba(i,r,s)}catch(e){return mr(e instanceof qa?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&wi(s.target)){const t=new zr(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Gs.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=Yi();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new Ha(e,t,this.Qe,this.ke,n);return this.ke=Vi(),this.qe=Xa(),this.Qe=new us(Rr),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ya,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new fs(Rr),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||fr("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ya),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Xa(){return new us(zr.comparator)}function Ja(){return new us(zr.comparator)}const Za={asc:"ASCENDING",desc:"DESCENDING"},eo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},to={and:"AND",or:"OR"};class no{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ro(e,t){return e.useProto3Json||es(t)?t:{value:t}}function so(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function io(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ao(e,t){return so(e,t.toTimestamp())}function oo(e){return vr(!!e),Lr.fromTimestamp(function(e){const t=bs(e);return new Or(t.seconds,t.nanos)}(e))}function lo(e,t){return co(e,t).canonicalString()}function co(e,t){const n=function(e){return new Ur(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function uo(e){const t=Ur.fromString(e);return vr(Ao(t)),t}function ho(e,t){return lo(e.databaseId,t.path)}function fo(e,t){const n=uo(t);if(n.get(1)!==e.databaseId.projectId)throw new xr(wr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new xr(wr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zr(yo(n))}function po(e,t){return lo(e.databaseId,t)}function mo(e){const t=uo(e);return 4===t.length?Ur.emptyPath():yo(t)}function go(e){return new Ur(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yo(e){return vr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function vo(e,t,n){return{name:ho(e,t),fields:n.value.mapValue.fields}}function bo(e,t){let n;if(t instanceof _a)n={update:vo(e,t.key,t.value)};else if(t instanceof Ca)n={delete:ho(e,t.key)};else if(t instanceof Na)n={update:vo(e,t.key,t.data),updateMask:jo(t.fieldMask)};else{if(!(t instanceof Ta))return yr();n={verify:ho(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ia)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof aa)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof la)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ua)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw yr()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ao(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:yr()}(e,t.precondition)),n}function wo(e,t){return{documents:[po(e,t.path)]}}function xo(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=po(e,s);const i=function(e){if(0!==e.length)return Io(ti.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Co(e.field),direction:Eo(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=ro(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function _o(e){let t=mo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){vr(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=No(e);return t instanceof ti&&ri(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Xs(To(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,es(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Qs(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Qs(n,t)}(n.endAt)),_i(t,s,a,i,o,"F",l,c)}function No(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=To(e.unaryFilter.field);return ei.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=To(e.unaryFilter.field);return ei.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=To(e.unaryFilter.field);return ei.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=To(e.unaryFilter.field);return ei.create(s,"!=",{nullValue:"NULL_VALUE"});default:return yr()}}(e):void 0!==e.fieldFilter?function(e){return ei.create(To(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yr()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ti.create(e.compositeFilter.filters.map(e=>No(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return yr()}}(e.compositeFilter.op))}(e):yr()}function Eo(e){return Za[e]}function So(e){return eo[e]}function ko(e){return to[e]}function Co(e){return{fieldPath:e.canonicalString()}}function To(e){return Vr.fromServerFormat(e.fieldPath)}function Io(e){return e instanceof ei?function(e){if("=="===e.op){if(Vs(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NAN"}};if(Fs(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Vs(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NOT_NAN"}};if(Fs(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(e.field),op:So(e.op),value:e.value}}}(e):e instanceof ti?function(e){const t=e.getFilters().map(e=>Io(e));return 1===t.length?t[0]:{compositeFilter:{op:ko(e.op),filters:t}}}(e):yr()}function jo(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ao(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Po{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Lr.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Lr.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ys.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Po(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Po(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ro{constructor(e){this.ct=e}}function Do(e){const t=_o({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ji(t,t.limit,"L"):t}class Oo{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ws(e.integerValue));else if("doubleValue"in e){const n=ws(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),ts(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=bs(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(xs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Hs(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Bs(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):yr()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(ws(a)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),zr.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Oo.vt=new Oo;class Lo{constructor(){this.un=new Mo}addToCollectionParentIndex(e,t){return this.un.add(t),$r.resolve()}getCollectionParents(e,t){return $r.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return $r.resolve()}deleteFieldIndex(e,t){return $r.resolve()}deleteAllFieldIndexes(e){return $r.resolve()}createTargetIndexes(e,t){return $r.resolve()}getDocumentsMatchingTarget(e,t){return $r.resolve(null)}getIndexType(e,t){return $r.resolve(0)}getFieldIndexes(e,t){return $r.resolve([])}getNextCollectionGroupToUpdate(e){return $r.resolve(null)}getMinOffset(e,t){return $r.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,t){return $r.resolve(Wr.min())}updateCollectionGroup(e,t,n){return $r.resolve()}updateIndexEntries(e,t){return $r.resolve()}}class Mo{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fs(Ur.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new fs(Ur.comparator)).toArray()}}new Uint8Array(0);class Uo{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Uo(e,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Uo.DEFAULT_COLLECTION_PERCENTILE=10,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uo.DEFAULT=new Uo(41943040,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uo.DISABLED=new Uo(-1,0,0);class Fo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Fo(0)}static kn(){return new Fo(-1)}}class Vo{constructor(){this.changes=new Ui(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?$r.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zo{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bo{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&ba(n.mutation,e,ms.empty(),Or.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Yi()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yi();const r=Hi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Bi();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Hi();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Yi()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Vi();const i=Ki(),a=Ki();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Na)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),ba(a.mutation,t,a.mutation.getFieldMask(),Or.now())):i.set(t.key,ms.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new zo(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Ki();let r=new us((e,t)=>e-t),s=Yi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||ms.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Yi()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Wi();l.forEach(e=>{if(!s.has(e)){const r=ya(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return $r.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return zr.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Si(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):$r.resolve(Hi());let a=-1,o=s;return i.next(t=>$r.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?$r.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,Yi())).next(e=>({batchId:a,changes:qi(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zr(t)).next(e=>{let t=Bi();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Bi();return this.indexManager.getCollectionParents(e,s).next(a=>$r.forEach(a,a=>{const o=function(e,t){return new xi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Gs.newInvalidDocument(r)))});let n=Bi();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&ba(i.mutation,r,ms.empty(),Or.now()),Di(t,r)&&(n=n.insert(e,r))}),n})}}class qo{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return $r.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:oo(e.createTime)}}(t)),$r.resolve()}getNamedQuery(e,t){return $r.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Do(e.bundledQuery),readTime:oo(e.readTime)}}(t)),$r.resolve()}}class Ho{constructor(){this.overlays=new us(zr.comparator),this.Ir=new Map}getOverlay(e,t){return $r.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Hi();return $r.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),$r.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),$r.resolve()}getOverlaysForCollection(e,t,n){const r=Hi(),s=t.length+1,i=new zr(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return $r.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new us((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Hi(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Hi(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return $r.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Aa(t,n));let s=this.Ir.get(t);void 0===s&&(s=Yi(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class Wo{constructor(){this.sessionToken=ys.EMPTY_BYTE_STRING}getSessionToken(e){return $r.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$r.resolve()}}class Ko{constructor(){this.Tr=new fs(Go.Er),this.dr=new fs(Go.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Go(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Go(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new zr(new Ur([])),n=new Go(t,e),r=new Go(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new zr(new Ur([])),n=new Go(t,e),r=new Go(t,e+1);let s=Yi();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Go(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Go{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return zr.comparator(e.key,t.key)||Rr(e.wr,t.wr)}static Ar(e,t){return Rr(e.wr,t.wr)||zr.comparator(e.key,t.key)}}class Qo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new fs(Go.Er)}checkEmpty(e){return $r.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Ia(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new Go(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $r.resolve(i)}lookupMutationBatch(e,t){return $r.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return $r.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $r.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return $r.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Go(t,0),r=new Go(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),$r.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fs(Rr);return t.forEach(e=>{const t=new Go(e,0),r=new Go(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),$r.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;zr.isDocumentKey(s)||(s=s.child(""));const i=new Go(new zr(s),0);let a=new fs(Rr);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),$r.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){vr(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return $r.forEach(t.mutations,r=>{const s=new Go(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Go(t,0),r=this.br.firstAfterOrEqual(n);return $r.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,$r.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Yo{constructor(e){this.Mr=e,this.docs=new us(zr.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return $r.resolve(n?n.document.mutableCopy():Gs.newInvalidDocument(t))}getEntries(e,t){let n=Vi();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Gs.newInvalidDocument(e))}),$r.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Vi();const i=t.path,a=new zr(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Kr(Hr(a),n)<=0||(r.has(a.key)||Di(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return $r.resolve(s)}getAllFromCollectionGroup(e,t,n,r){yr()}Or(e,t){return $r.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new $o(this)}getSize(e){return $r.resolve(this.size)}}class $o extends Vo{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),$r.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Xo{constructor(e){this.persistence=e,this.Nr=new Ui(e=>vi(e),bi),this.lastRemoteSnapshotVersion=Lr.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ko,this.targetCount=0,this.kr=Fo.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),$r.resolve()}getLastRemoteSnapshotVersion(e){return $r.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $r.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$r.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),$r.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Fo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,$r.resolve()}updateTargetData(e,t){return this.Kn(t),$r.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,$r.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),$r.waitFor(s).next(()=>r)}getTargetCount(e){return $r.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return $r.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),$r.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),$r.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),$r.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return $r.resolve(n)}containsKey(e,t){return $r.resolve(this.Br.containsKey(t))}}class Jo{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Zr(0),this.Kr=!1,this.Kr=!0,this.$r=new Wo,this.referenceDelegate=e(this),this.Ur=new Xo(this),this.indexManager=new Lo,this.remoteDocumentCache=function(e){return new Yo(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Ro(t),this.Gr=new qo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ho,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Qo(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){fr("MemoryPersistence","Starting transaction:",e);const r=new Zo(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return $r.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Zo extends Qr{constructor(e){super(),this.currentSequenceNumber=e}}class el{constructor(e){this.persistence=e,this.Jr=new Ko,this.Yr=null}static Zr(e){return new el(e)}get Xr(){if(this.Yr)return this.Yr;throw yr()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),$r.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),$r.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),$r.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $r.forEach(this.Xr,n=>{const r=zr.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Lr.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return $r.or([()=>$r.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class tl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Yi(),r=Yi();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new tl(e,t.fromCache,n,r)}}class nl{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rl{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=at()?8:Xr(it())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new nl;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(hr()<=Et.DEBUG&&fr("QueryEngine","SDK will not create cache indexes for query:",Ri(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$r.resolve()):(hr()<=Et.DEBUG&&fr("QueryEngine","Query:",Ri(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(hr()<=Et.DEBUG&&fr("QueryEngine","The SDK decides to create cache indexes for query:",Ri(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ci(t))):$r.resolve())}Yi(e,t){if(Ei(t))return $r.resolve(null);let n=Ci(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ji(t,null,"F"),n=Ci(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Yi(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,ji(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return Ei(t)||r.isEqual(Lr.min())?$r.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?$r.resolve(null):(hr()<=Et.DEBUG&&fr("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ri(t)),this.rs(e,i,t,qr(r,-1)).next(e=>e))})}ts(e,t){let n=new fs(Li(e));return t.forEach((t,r)=>{Di(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return hr()<=Et.DEBUG&&fr("QueryEngine","Using full collection scan to execute query:",Ri(t)),this.Ji.getDocumentsMatchingQuery(e,t,Wr.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class sl{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new us(Rr),this._s=new Ui(e=>vi(e),bi),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bo(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function il(e,t,n,r){return new sl(e,t,n,r)}async function al(e,t){const n=br(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=Yi();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function ol(e){const t=br(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function ll(e,t,n){let r=Yi(),s=Yi();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Vi();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Lr.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):fr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function cl(e,t){const n=br(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function ul(e,t){const n=br(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,$r.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new Po(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function dl(e,t,n){const r=br(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Jr(e))throw e;fr("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(s.target)}function hl(e,t,n){const r=br(e);let s=Lr.min(),i=Yi();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=br(e),s=r._s.get(n);return void 0!==s?$r.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,Ci(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:Lr.min(),n?i:Yi())).next(e=>(fl(r,Oi(t),e),{documents:e,Ts:i})))}function fl(e,t,n){let r=e.us.get(t)||Lr.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class pl{constructor(){this.activeTargetIds=Xi()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ml{constructor(){this.so=new pl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pl,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gl{_o(e){}shutdown(){}}class yl{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){fr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){fr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vl=null;function bl(){return null===vl?vl=268435456+Math.round(2147483648*Math.random()):vl++,"0x"+vl.toString(16)}const wl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xl{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const _l="WebChannelConnection";class Nl extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,s){const i=bl(),a=this.xo(e,t.toUriEncodedString());fr("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,s),this.No(e,a,o,n).then(t=>(fr("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw mr("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ur,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=wl[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=bl();return new Promise((i,a)=>{const o=new Jn;o.setWithCredentials(!0),o.listenOnce(er.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case tr.NO_ERROR:const t=o.getResponseJson();fr(_l,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case tr.TIMEOUT:fr(_l,"RPC '".concat(e,"' ").concat(s," timed out")),a(new xr(wr.DEADLINE_EXCEEDED,"Request time out"));break;case tr.HTTP_ERROR:const n=o.getStatus();if(fr(_l,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(wr).indexOf(t)>=0?t:wr.UNKNOWN}(t.status);a(new xr(e,t.message))}else a(new xr(wr.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new xr(wr.UNAVAILABLE,"Connection failed."));break;default:yr()}}finally{fr(_l,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);fr(_l,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=bl(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ir(),a=sr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");fr(_l,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);let d=!1,h=!1;const f=new xl({Io:t=>{h?fr(_l,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(fr(_l,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),fr(_l,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Zn.EventType.OPEN,()=>{h||(fr(_l,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),p(u,Zn.EventType.CLOSE,()=>{h||(h=!0,fr(_l,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),p(u,Zn.EventType.ERROR,t=>{h||(h=!0,mr(_l,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new xr(wr.UNAVAILABLE,"The operation could not be completed")))}),p(u,Zn.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];vr(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){fr(_l,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Ra[e];if(void 0!==t)return La(t)}(t),s=a.message;void 0===n&&(n=wr.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new xr(n,s)),u.close()}else fr(_l,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.bo(s)}}),p(a,rr.STAT_EVENT,t=>{t.stat===nr.PROXY?fr(_l,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===nr.NOPROXY&&fr(_l,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function El(){return"undefined"!=typeof document?document:null}function Sl(e){return new no(e,!0)}class kl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&fr("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Cl{constructor(e,t,n,r,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kl(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===wr.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===wr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new xr(wr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return fr("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(fr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Tl extends Cl{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:yr()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(vr(void 0===t||"string"==typeof t),ys.fromBase64String(t||"")):(vr(void 0===t||t instanceof Buffer||t instanceof Uint8Array),ys.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?wr.UNKNOWN:La(e.code);return new xr(t,e.message||"")}(a);n=new Qa(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=fo(e,r.document.name),i=oo(r.document.updateTime),a=r.document.createTime?oo(r.document.createTime):Lr.min(),o=new Ws({mapValue:{fields:r.document.fields}}),l=Gs.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ka(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=fo(e,r.document),i=r.readTime?oo(r.readTime):Lr.min(),a=Gs.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Ka([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=fo(e,r.document),i=r.removedTargetIds||[];n=new Ka([],i,s,null)}else{if(!("filter"in t))return yr();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Pa(r,s),a=e.targetId;n=new Ga(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Lr.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Lr.min():t.readTime?oo(t.readTime):Lr.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=go(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=wi(r)?{documents:wo(e,r)}:{query:xo(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=io(e,t.resumeToken);const r=ro(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Lr.min())>0){n.readTime=so(e,t.snapshotVersion.toTimestamp());const r=ro(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yr()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=go(this.serializer),t.removeTarget=e,this.a_(t)}}class Il extends Cl{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return vr(!!e.streamToken),this.lastStreamToken=e.streamToken,vr(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){vr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(vr(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?oo(e.updateTime):oo(t);return n.isEqual(Lr.min())&&(n=oo(t)),new fa(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=oo(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=go(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>bo(this.serializer,e))};this.a_(t)}}class jl extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new xr(wr.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Mo(e,co(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===wr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xr(wr.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Lo(e,co(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===wr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xr(wr.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Al{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(pr(t),this.D_=!1):fr("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Pl{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{zl(this)&&(fr("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=br(e);t.L_.add(4),await Dl(t),t.q_.set("Unknown"),t.L_.delete(4),await Rl(t)}(this))})}),this.q_=new Al(n,r)}}async function Rl(e){if(zl(e))for(const t of e.B_)await t(!0)}async function Dl(e){for(const t of e.B_)await t(!1)}function Ol(e,t){const n=br(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Vl(n)?Fl(n):ac(n).r_()&&Ml(n,t))}function Ll(e,t){const n=br(e),r=ac(n);n.N_.delete(t),r.r_()&&Ul(n,t),0===n.N_.size&&(r.r_()?r.o_():zl(n)&&n.q_.set("Unknown"))}function Ml(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Lr.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ac(e).A_(t)}function Ul(e,t){e.Q_.xe(t),ac(e).R_(t)}function Fl(e){e.Q_=new $a({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),ac(e).start(),e.q_.v_()}function Vl(e){return zl(e)&&!ac(e).n_()&&e.N_.size>0}function zl(e){return 0===br(e).L_.size}function Bl(e){e.Q_=void 0}async function ql(e){e.q_.set("Online")}async function Hl(e){e.N_.forEach((t,n)=>{Ml(e,t)})}async function Wl(e,t){Bl(e),Vl(e)?(e.q_.M_(t),Fl(e)):e.q_.set("Unknown")}async function Kl(e,t,n){if(e.q_.set("Online"),t instanceof Qa&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){fr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Gl(e,n)}else if(t instanceof Ka?e.Q_.Ke(t):t instanceof Ga?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Lr.min()))try{const t=await ol(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(ys.EMPTY_BYTE_STRING,r.snapshotVersion)),Ul(e,t);const s=new Po(r.target,t,n,r.sequenceNumber);Ml(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){fr("RemoteStore","Failed to raise snapshot:",t),await Gl(e,t)}}async function Gl(e,t,n){if(!Jr(t))throw t;e.L_.add(1),await Dl(e),e.q_.set("Offline"),n||(n=()=>ol(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{fr("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Rl(e)})}function Ql(e,t){return t().catch(n=>Gl(e,n,t))}async function Yl(e){const t=br(e),n=oc(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;$l(t);)try{const e=await cl(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Xl(t,e)}catch(e){await Gl(t,e)}Jl(t)&&Zl(t)}function $l(e){return zl(e)&&e.O_.length<10}function Xl(e,t){e.O_.push(t);const n=oc(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Jl(e){return zl(e)&&!oc(e).n_()&&e.O_.length>0}function Zl(e){oc(e).start()}async function ec(e){oc(e).p_()}async function tc(e){const t=oc(e);for(const n of e.O_)t.m_(n.mutations)}async function nc(e,t,n){const r=e.O_.shift(),s=ja.from(r,t,n);await Ql(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Yl(e)}async function rc(e,t){t&&oc(e).V_&&await async function(e,t){if(function(e){return Oa(e)&&e!==wr.ABORTED}(t.code)){const n=e.O_.shift();oc(e).s_(),await Ql(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Yl(e)}}(e,t),Jl(e)&&Zl(e)}async function sc(e,t){const n=br(e);n.asyncQueue.verifyOperationInProgress(),fr("RemoteStore","RemoteStore received new credentials");const r=zl(n);n.L_.add(3),await Dl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Rl(n)}async function ic(e,t){const n=br(e);t?(n.L_.delete(2),await Rl(n)):t||(n.L_.add(2),await Dl(n),n.q_.set("Unknown"))}function ac(e){return e.K_||(e.K_=function(e,t,n){const r=br(e);return r.w_(),new Tl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:ql.bind(null,e),Ro:Hl.bind(null,e),mo:Wl.bind(null,e),d_:Kl.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Vl(e)?Fl(e):e.q_.set("Unknown")):(await e.K_.stop(),Bl(e))})),e.K_}function oc(e){return e.U_||(e.U_=function(e,t,n){const r=br(e);return r.w_(),new Il(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ec.bind(null,e),mo:rc.bind(null,e),f_:tc.bind(null,e),g_:nc.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Yl(e)):(await e.U_.stop(),e.O_.length>0&&(fr("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class lc{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new lc(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xr(wr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cc(e,t){if(pr("AsyncQueue","".concat(t,": ").concat(e)),Jr(e))return new xr(wr.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class uc{constructor(e){this.comparator=e?(t,n)=>e(t,n)||zr.comparator(t.key,n.key):(e,t)=>zr.comparator(e.key,t.key),this.keyedMap=Bi(),this.sortedSet=new us(this.comparator)}static emptySet(e){return new uc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof uc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new uc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class dc{constructor(){this.W_=new us(zr.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):yr():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class hc{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new hc(e,t,uc.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ai(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class fc{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class pc{constructor(){this.queries=mc(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=br(e),r=n.queries;n.queries=mc(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new xr(wr.ABORTED,"Firestore shutting down"))}}function mc(){return new Ui(e=>Pi(e),Ai)}async function gc(e,t){const n=br(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new fc,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=cc(e,"Initialization of query '".concat(Ri(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&wc(n)}async function yc(e,t){const n=br(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vc(e,t){const n=br(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&wc(n)}function bc(e,t,n){const r=br(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function wc(e){e.Y_.forEach(e=>{e.next()})}var xc,_c;(_c=xc||(xc={})).ea="default",_c.Cache="cache";class Nc{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new hc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==xc.Cache}}class Ec{constructor(e){this.key=e}}class Sc{constructor(e){this.key=e}}class kc{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Yi(),this.mutatedKeys=Yi(),this.Aa=Li(e),this.Ra=new uc(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new dc,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Di(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yr()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==i.length||l?{snapshot:new hc(this.query,e.Ra,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new dc,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Yi(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Sc(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Ec(n))}),t}ba(e){this.Ta=e.Ts,this.da=Yi();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return hc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Cc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Tc{constructor(e){this.key=e,this.va=!1}}class Ic{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new Ui(e=>Pi(e),Ai),this.Ma=new Map,this.xa=new Set,this.Oa=new us(zr.comparator),this.Na=new Map,this.La=new Ko,this.Ba={},this.ka=new Map,this.qa=Fo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function jc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Xc(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Pc(r,t,n,!0),s}async function Ac(e,t){const n=Xc(e);await Pc(n,t,!0,!1)}async function Pc(e,t,n,r){const s=await ul(e.localStore,Ci(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Rc(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Ol(e.remoteStore,s),o}async function Rc(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await hl(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Wc(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const i=await hl(e.localStore,t,!0),a=new kc(t,i.Ts),o=a.ma(i.documents),l=Wa.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Wc(e,n,c.wa);const u=new Cc(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Dc(e,t,n){const r=br(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!Ai(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ll(r.remoteStore,s.targetId),qc(r,s.targetId)}).catch(Yr)):(qc(r,s.targetId),await dl(r.localStore,s.targetId,!0))}async function Oc(e,t){const n=br(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ll(n.remoteStore,r.targetId))}async function Lc(e,t){const n=br(e);try{const e=await function(e,t){const n=br(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(ys.EMPTY_BYTE_STRING,Lr.min()).withLastLimboFreeSnapshotVersion(Lr.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Ur.updateTargetData(e,c))});let o=Vi(),l=Yi();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(ll(e,i,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(Lr.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return $r.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(vr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?vr(r.va):e.removedDocuments.size>0&&(vr(r.va),r.va=!1))}),await Qc(n,e,t)}catch(e){await Yr(e)}}function Mc(e,t,n){const r=br(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=br(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&wc(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Uc(e,t,n){const r=br(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new us(zr.comparator);e=e.insert(i,Gs.newNoDocument(i,Lr.min()));const n=Yi().add(i),s=new Ha(Lr.min(),new Map,new us(Rr),e,n);await Lc(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),Gc(r)}else await dl(r.localStore,t,!1).then(()=>qc(r,t,n)).catch(Yr)}async function Fc(e,t){const n=br(e),r=t.batch.batchId;try{const e=await function(e,t){const n=br(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=$r.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);vr(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Yi();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Bc(n,r,null),zc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qc(n,e)}catch(e){await Yr(e)}}async function Vc(e,t,n){const r=br(e);try{const e=await function(e,t){const n=br(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(vr(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Bc(r,t,n),zc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Qc(r,e)}catch(n){await Yr(n)}}function zc(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Bc(e,t,n){const r=br(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function qc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Hc(e,t)})}function Hc(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Ll(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Gc(e))}function Wc(e,t,n){for(const r of n)r instanceof Ec?(e.La.addReference(r.key,t),Kc(e,r)):r instanceof Sc?(fr("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Hc(e,r.key)):yr()}function Kc(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(fr("SyncEngine","New document in limbo: "+n),e.xa.add(r),Gc(e))}function Gc(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new zr(Ur.fromString(t)),r=e.qa.next();e.Na.set(r,new Tc(n)),e.Oa=e.Oa.insert(n,r),Ol(e.remoteStore,new Po(Ci(Ni(n.path)),r,"TargetPurposeLimboResolution",Zr.oe))}}async function Qc(e,t,n){const r=br(e),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=tl.Wi(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(e,t){const n=br(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>$r.forEach(t,t=>$r.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>$r.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Jr(e))throw e;fr("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function Yc(e,t){const n=br(e);if(!n.currentUser.isEqual(t)){fr("SyncEngine","User change. New user:",t.toKey());const e=await al(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new xr(wr.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Qc(n,e.hs)}}function $c(e,t){const n=br(e),r=n.Na.get(t);if(r&&r.va)return Yi().add(r.key);{let e=Yi();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Xc(e){const t=br(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Lc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$c.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Uc.bind(null,t),t.Ca.d_=vc.bind(null,t.eventManager),t.Ca.$a=bc.bind(null,t.eventManager),t}function Jc(e){const t=br(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vc.bind(null,t),t}class Zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sl(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return il(this.persistence,new rl,e.initialUser,this.serializer)}Ga(e){return new Jo(el.Zr,this.serializer)}Wa(e){return new ml}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zc.provider={build:()=>new Zc};class eu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Mc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yc.bind(null,this.syncEngine),await ic(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new pc}createDatastore(e){const t=Sl(e.databaseInfo.databaseId),n=function(e){return new Nl(e)}(e.databaseInfo);return function(e,t,n,r){return new jl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Pl(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Mc(this.syncEngine,e,0),yl.D()?new yl:new gl)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Ic(e,t,n,r,s,i);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=br(e);fr("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Dl(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}eu.provider={build:()=>new eu};class tu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class nu{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=cr.UNAUTHENTICATED,this.clientId=Pr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{fr("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(fr("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=cc(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ru(e,t){e.asyncQueue.verifyOperationInProgress(),fr("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await al(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function su(e,t){e.asyncQueue.verifyOperationInProgress();const n=await iu(e);fr("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>sc(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>sc(t.remoteStore,n)),e._onlineComponents=t}async function iu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){fr("FirestoreClient","Using user provided OfflineComponentProvider");try{await ru(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===wr.FAILED_PRECONDITION||e.code===wr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;mr("Error using user provided cache. Falling back to memory cache: "+n),await ru(e,new Zc)}}else fr("FirestoreClient","Using default OfflineComponentProvider"),await ru(e,new Zc);return e._offlineComponents}async function au(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(fr("FirestoreClient","Using user provided OnlineComponentProvider"),await su(e,e._uninitializedComponentsProvider._online)):(fr("FirestoreClient","Using default OnlineComponentProvider"),await su(e,new eu))),e._onlineComponents}function ou(e){return au(e).then(e=>e.syncEngine)}async function lu(e){const t=await au(e),n=t.eventManager;return n.onListen=jc.bind(null,t.syncEngine),n.onUnlisten=Dc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ac.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Oc.bind(null,t.syncEngine),n}function cu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new _r;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new tu({next:o=>{i.Za(),t.enqueueAndForget(()=>yc(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new xr(wr.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new xr(wr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Nc(Ni(n.path),i,{includeMetadataChanges:!0,_a:!0});return gc(e,a)}(await lu(e),e.asyncQueue,t,n,r)),r.promise}function uu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new _r;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new tu({next:n=>{i.Za(),t.enqueueAndForget(()=>yc(e,a)),n.fromCache&&"server"===r.source?s.reject(new xr(wr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Nc(n,i,{includeMetadataChanges:!0,_a:!0});return gc(e,a)}(await lu(e),e.asyncQueue,t,n,r)),r.promise}function du(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const hu=new Map;function fu(e,t,n){if(!n)throw new xr(wr.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function pu(e){if(!zr.isDocumentKey(e))throw new xr(wr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function mu(e){if(zr.isDocumentKey(e))throw new xr(wr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function gu(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":yr()}function yu(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xr(wr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gu(e);throw new xr(wr.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class vu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new xr(wr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xr(wr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new xr(wr.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=du(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new xr(wr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new xr(wr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new xr(wr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vu({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xr(wr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xr(wr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vu(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Er;switch(e.type){case"firstParty":return new Tr(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xr(wr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hu.get(e);t&&(fr("ComponentProvider","Removing Datastore"),hu.delete(e),t.terminate())}(this),Promise.resolve()}}class wu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new wu(this.firestore,e,this._query)}}class xu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xu(this.firestore,e,this._key)}}class _u extends wu{constructor(e,t,n){super(e,t,Ni(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xu(this.firestore,null,new zr(e))}withConverter(e){return new _u(this.firestore,e,this._path)}}function Nu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=vt(e),fu("collection","path",t),e instanceof bu){const n=Ur.fromString(t,...r);return mu(n),new _u(e,null,n)}{if(!(e instanceof xu||e instanceof _u))throw new xr(wr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ur.fromString(t,...r));return mu(n),new _u(e.firestore,null,n)}}function Eu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=vt(e),1===arguments.length&&(t=Pr.newId()),fu("doc","path",t),e instanceof bu){const n=Ur.fromString(t,...r);return pu(n),new xu(e,null,new zr(n))}{if(!(e instanceof xu||e instanceof _u))throw new xr(wr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ur.fromString(t,...r));return pu(n),new xu(e.firestore,e instanceof _u?e.converter:null,new zr(n))}}class Su{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kl(this,"async_queue_retry"),this.Vu=()=>{const e=El();e&&fr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=El();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=El();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new _r;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Em){if(!Jr(Em))throw Em;fr("AsyncQueue","Operation failed with retryable error: "+Em)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw pr("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=lc.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&yr()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class ku extends bu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Su,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Su(e),this._firestoreClient=void 0,await e}}}function Cu(e){if(e._terminated)throw new xr(wr.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Tu(e),e._firestoreClient}function Tu(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Ss(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,du(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new nu(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Iu(ys.fromBase64String(e))}catch(e){throw new xr(wr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Iu(ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ju{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new xr(wr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vr(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Au{constructor(e){this._methodName=e}}class Pu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xr(wr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xr(wr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rr(this._lat,e._lat)||Rr(this._long,e._long)}}class Ru{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Du=/^__.*__$/;class Ou{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Na(e,this.data,this.fieldMask,t,this.fieldTransforms):new _a(e,this.data,t,this.fieldTransforms)}}class Lu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Na(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Mu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yr()}}class Uu{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Uu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Mu(this.Cu)&&Du.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Fu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Sl(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Uu({Cu:e,methodName:t,qu:n,path:Vr.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vu(e){const t=e._freezeSettings(),n=Sl(e._databaseId);return new Fu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function zu(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);Yu("Data must be an object, but it was:",a,r);const o=Gu(r,a);let l,c;if(i.merge)l=new ms(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=$u(t,r,n);if(!a.contains(s))throw new xr(wr.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));ed(e,s)||e.push(s)}l=new ms(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Ou(new Ws(o),l,c)}class Bu extends Au{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bu}}function qu(e,t,n,r){const s=e.Qu(1,t,n);Yu("Data must be an object, but it was:",s,r);const i=[],a=Ws.empty();ls(r,(e,r)=>{const o=Ju(t,e,n);r=vt(r);const l=s.Nu(o);if(r instanceof Bu)i.push(o);else{const e=Ku(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new ms(i);return new Lu(a,o,s.fieldTransforms)}function Hu(e,t,n,r,s,i){const a=e.Qu(1,t,n),o=[$u(t,r,n)],l=[s];if(i.length%2!=0)throw new xr(wr.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push($u(t,i[h])),l.push(i[h+1]);const c=[],u=Ws.empty();for(let h=o.length-1;h>=0;--h)if(!ed(c,o[h])){const e=o[h];let t=l[h];t=vt(t);const n=a.Nu(e);if(t instanceof Bu)c.push(e);else{const r=Ku(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new ms(c);return new Lu(u,d,a.fieldTransforms)}function Wu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ku(n,e.Qu(r?4:3,t))}function Ku(e,t){if(Qu(e=vt(e)))return Yu("Unsupported field value:",t,e),Gu(e,t);if(e instanceof Au)return function(e,t){if(!Mu(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Ku(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=vt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ea(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Or.fromDate(e);return{timestampValue:so(t.serializer,n)}}if(e instanceof Or){const n=new Or(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:so(t.serializer,n)}}if(e instanceof Pu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Iu)return{bytesValue:io(t.serializer,e._byteString)};if(e instanceof xu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:lo(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Ru)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Ji(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(gu(e)))}(e,t)}function Gu(e,t){const n={};return cs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ls(e,(e,r)=>{const s=Ku(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Qu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Or||e instanceof Pu||e instanceof Iu||e instanceof xu||e instanceof Au||e instanceof Ru)}function Yu(e,t,n){if(!Qu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=gu(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function $u(e,t,n){if((t=vt(t))instanceof ju)return t._internalPath;if("string"==typeof t)return Ju(e,t);throw Zu("Field path arguments must be of type string or ",e,!1,void 0,n)}const Xu=new RegExp("[~\\*/\\[\\]]");function Ju(e,t,n){if(t.search(Xu)>=0)throw Zu("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new ju(...t.split("."))._internalPath}catch(r){throw Zu("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Zu(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new xr(wr.INVALID_ARGUMENT,o+e+l)}function ed(e,t){return e.some(e=>e.isEqual(t))}class td{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nd extends td{data(){return super.data()}}function rd(e,t){return"string"==typeof t?Ju(e,t):t instanceof ju?t._internalPath:t._delegate._internalPath}function sd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new xr(wr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class id{}class ad extends id{}class od extends ad{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new od(e,t,n)}_apply(e){const t=this._parse(e);return dd(e._query,t),new wu(e.firestore,e.converter,Ii(e._query,t))}_parse(e){const t=Vu(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new xr(wr.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){ud(a,i);const t=[];for(const n of a)t.push(cd(r,e,n));o={arrayValue:{values:t}}}else o=cd(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||ud(a,i),o=Wu(n,t,a,"in"===i||"not-in"===i);return ei.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class ld extends id{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ld(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ti.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)dd(n,s),n=Ii(n,s)}(e._query,t),new wu(e.firestore,e.converter,Ii(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function cd(e,t,n){if("string"==typeof(n=vt(n))){if(""===n)throw new xr(wr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Si(t)&&-1!==n.indexOf("/"))throw new xr(wr.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ur.fromString(n));if(!zr.isDocumentKey(r))throw new xr(wr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ls(e,new zr(r))}if(n instanceof xu)return Ls(e,n._key);throw new xr(wr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(gu(n),"."))}function ud(e,t){if(!Array.isArray(e)||0===e.length)throw new xr(wr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function dd(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new xr(wr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new xr(wr.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class hd{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ws(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw yr()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ls(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>ws(e.doubleValue));return new Ru(s)}convertGeoPoint(e){return new Pu(ws(e.latitude),ws(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ns(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Es(e));default:return null}}convertTimestamp(e){const t=bs(e);return new Or(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ur.fromString(e);vr(Ao(n));const r=new ks(n.get(1),n.get(3)),s=new zr(n.popFirst(5));return r.isEqual(t)||pr("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function fd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class pd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class md extends td{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(rd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class gd extends md{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class yd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new pd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new gd(this._firestore,this._userDataWriter,n.key,n,new pd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xr(wr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new gd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new pd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new gd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:vd(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yr()}}function bd(e){e=yu(e,xu);const t=yu(e.firestore,ku);return cu(Cu(t),e._key).then(n=>Ed(t,e,n))}class wd extends hd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xu(this.firestore,null,t)}}function xd(e){e=yu(e,wu);const t=yu(e.firestore,ku),n=Cu(t),r=new wd(t);return sd(e._query),uu(n,e._query).then(n=>new yd(t,r,e,n))}function _d(e,t,n){e=yu(e,xu);const r=yu(e.firestore,ku),s=Vu(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=vt(t))||t instanceof ju?Hu(s,"updateDoc",e._key,t,n,o):qu(s,"updateDoc",e._key,t),Nd(r,[i.toMutation(e._key,pa.exists(!0))])}function Nd(e,t){return function(e,t){const n=new _r;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Jc(e);try{const e=await function(e,t){const n=br(e),r=Or.now(),s=t.reduce((e,t)=>e.add(t.key),Yi());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Vi(),l=Yi();return n.cs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=wa(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Na(e.key,t,Ks(t.value.mapValue),pa.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:qi(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new us(Rr)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await Qc(r,e.changes),await Yl(r.remoteStore)}catch(e){const t=cc(e,"Failed to persist write");n.reject(t)}}(await ou(e),t,n)),n.promise}(Cu(e),t)}function Ed(e,t,n){const r=n.docs.get(t._key),s=new wd(e);return new md(e,s,t._key,r,new pd(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ur=e}(Dn),In(new bt("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new ku(new kr(e.getProvider("auth-internal")),new jr(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xr(wr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ks(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Mn(lr,"4.7.3",e),Mn(lr,"4.7.3","esm2017")}();Mn("firebase","10.14.1","app");function Sd(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function kd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Cd=kd,Td=new ct("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Id=new It("@firebase/auth");function jd(e){if(Id.logLevel<=Et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Id.error("Auth (".concat(Dn,"): ").concat(e),...n)}}function Ad(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Od(e,...n)}function Pd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Od(e,...n)}function Rd(e,t,n){const r=Object.assign(Object.assign({},Cd()),{[t]:n});return new ct("auth","Firebase",r).create(t,{appName:e.name})}function Dd(e){return Rd(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Od(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Td.create(e,...n)}function Ld(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Od(t,...r)}}function Md(e){const t="INTERNAL ASSERTION FAILED: "+e;throw jd(t),new Error(t)}function Ud(e,t){e||Md(t)}function Fd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Vd(){return"http:"===zd()||"https:"===zd()}function zd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Bd(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Vd()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class qd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ud(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Bd()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hd(e,t){Ud(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Wd{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Md("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Md("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Md("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Gd=new qd(3e4,6e4);function Qd(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Yd(e,t,n,r){return $d(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=ft(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Wd.fetch()(Jd(e,e.config.apiHost,n,a),l)})}async function $d(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Kd),t);try{const t=new eh(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw th(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw th(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw th(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw th(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Rd(e,o,a);Ad(e,o)}}catch(Em){if(Em instanceof lt)throw Em;Ad(e,"network-request-failed",{message:String(Em)})}}async function Xd(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Yd(e,t,n,r,s);return"mfaPendingCredential"in i&&Ad(e,"multi-factor-auth-required",{_serverResponse:i}),i}function Jd(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Hd(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}function Zd(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eh{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Pd(this.auth,"network-request-failed")),Gd.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function th(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Pd(e,t,r);return s.customData._tokenResponse=n,s}function nh(e){return void 0!==e&&void 0!==e.enterprise}class rh{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Zd(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function sh(e,t){return Yd(e,"GET","/v2/recaptchaConfig",Qd(e,t))}async function ih(e,t){return Yd(e,"POST","/v1/accounts:lookup",t)}function ah(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Em){}}function oh(e){return 1e3*Number(e)}function lh(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return jd("JWT malformed, contained fewer than 3 sections"),null;try{const e=$e(n);return e?JSON.parse(e):(jd("Failed to decode base64 JWT payload"),null)}catch(Em){return jd("Caught error parsing JWT payload as JSON",null===Em||void 0===Em?void 0:Em.toString()),null}}function ch(e){const t=lh(e);return Ld(t,"internal-error"),Ld("undefined"!==typeof t.exp,"internal-error"),Ld("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function uh(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Em){throw Em instanceof lt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Em)&&e.auth.currentUser===e&&await e.auth.signOut(),Em}}class dh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Em){return void((null===Em||void 0===Em?void 0:Em.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class hh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ah(this.lastLoginAt),this.creationTime=ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function fh(e){var t;const n=e.auth,r=await e.getIdToken(),s=await uh(e,ih(n,{idToken:r}));Ld(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?ph(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new hh(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function ph(e){return e.map(e=>{var{providerId:t}=e,n=Sd(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class mh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ld(e.idToken,"internal-error"),Ld("undefined"!==typeof e.idToken,"internal-error"),Ld("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ch(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ld(0!==e.length,"internal-error");const t=ch(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ld(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await $d(e,{},async()=>{const n=ft({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=Jd(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Wd.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new mh;return n&&(Ld("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Ld("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Ld("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mh,this.toJSON())}_performRefresh(){return Md("not implemented")}}function gh(e,t){Ld("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class yh{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=Sd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await uh(this,this.stsTokenManager.getToken(this.auth,e));return Ld(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=vt(e),r=await n.getIdToken(t),s=lh(r);Ld(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ah(oh(s.auth_time)),issuedAtTime:ah(oh(s.iat)),expirationTime:ah(oh(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=vt(e);await fh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ld(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ld(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await fh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(Dd(this.auth));const e=await this.getIdToken();return await uh(this,async function(e,t){return Yd(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:_}=t;Ld(v&&_,e,"internal-error");const N=mh.fromJSON(this.name,_);Ld("string"===typeof v,e,"internal-error"),gh(u,e.name),gh(d,e.name),Ld("boolean"===typeof b,e,"internal-error"),Ld("boolean"===typeof w,e,"internal-error"),gh(h,e.name),gh(f,e.name),gh(p,e.name),gh(m,e.name),gh(g,e.name),gh(y,e.name);const E=new yh({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:N,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(E.providerData=x.map(e=>Object.assign({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new mh;r.updateFromServerResponse(t);const s=new yh({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await fh(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ld(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?ph(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new mh;a.updateFromIdToken(n);const o=new yh({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new hh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const vh=new Map;function bh(e){Ud(e instanceof Function,"Expected a class definition");let t=vh.get(e);return t?(Ud(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vh.set(e,t),t)}class wh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wh.type="NONE";const xh=wh;function _h(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Nh{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=_h(this.userKey,r.apiKey,s),this.fullPersistenceKey=_h("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?yh._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Nh(bh(xh),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||bh(xh);const i=_h(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=yh._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new Nh(s,e,n)):new Nh(s,e,n)}}function Eh(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Th(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Sh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(jh(t))return"Blackberry";if(Ah(t))return"Webos";if(kh(t))return"Safari";if((t.includes("chrome/")||Ch(t))&&!t.includes("edge/"))return"Chrome";if(Ih(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Sh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();return/firefox\//i.test(e)}function kh(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:it()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();return/crios\//i.test(e)}function Th(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();return/iemobile/i.test(e)}function Ih(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();return/android/i.test(e)}function jh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();return/blackberry/i.test(e)}function Ah(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();return/webos/i.test(e)}function Ph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Rh(){return function(){const e=it();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Dh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();return Ph(e)||Ih(e)||Ah(e)||jh(e)||/windows phone/i.test(e)||Th(e)}function Oh(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Eh(it());break;case"Worker":t="".concat(Eh(it()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Dn,"/").concat(r)}class Lh{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Em){r(Em)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Em){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Em||void 0===Em?void 0:Em.message})}}}class Mh{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Uh{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vh(this),this.idTokenSubscription=new Vh(this),this.beforeStateQueue=new Lh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Td,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bh(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Nh.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Em){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ih(this,{idToken:e}),n=await yh._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(An(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Em){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Em))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ld(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Em){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await fh(e)}catch(Em){if((null===Em||void 0===Em?void 0:Em.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(Dd(this));const t=e?vt(e):null;return t&&Ld(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ld(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(Dd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(Dd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bh(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Yd(e,"GET","/v2/passwordPolicy",Qd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Mh(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ct("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Yd(e,"POST","/v2/accounts:revokeToken",Qd(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bh(e)||this._popupRedirectResolver;Ld(t,this,"argument-error"),this.redirectPersistenceManager=await Nh.create(this,[bh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ld(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ld(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Oh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Id.logLevel<=Et.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Id.warn("Auth (".concat(Dn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Fh(e){return vt(e)}class Vh{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new gt(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Ld(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bh(e){return zh.loadJS(e)}function qh(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Hh{constructor(e){this.type="recaptcha-enterprise",this.auth=Fh(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;nh(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{sh(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new rh(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&nh(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=zh.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Bh(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Wh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new Hh(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Kh(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Wh(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Wh(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function Gh(e,t,n){const r=Fh(e);Ld(r._canInitEmulator,r,"emulator-config-failed"),Ld(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Qh(t),{host:a,port:o}=function(e){const t=Qh(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Yh(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Yh(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Qh(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Yh(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class $h{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Md("not implemented")}_getIdTokenResponse(e){return Md("not implemented")}_linkToIdToken(e,t){return Md("not implemented")}_getReauthenticationResolver(e){return Md("not implemented")}}async function Xh(e,t){return Yd(e,"POST","/v1/accounts:signUp",t)}async function Jh(e,t){return Xd(e,"POST","/v1/accounts:signInWithPassword",Qd(e,t))}class Zh extends $h{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Zh(e,t,"password")}static _fromEmailAndCode(e,t){return new Zh(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Kh(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Jh);case"emailLink":return async function(e,t){return Xd(e,"POST","/v1/accounts:signInWithEmailLink",Qd(e,t))}(e,{email:this._email,oobCode:this._password});default:Ad(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Kh(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xh);case"emailLink":return async function(e,t){return Xd(e,"POST","/v1/accounts:signInWithEmailLink",Qd(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ad(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ef(e,t){return Xd(e,"POST","/v1/accounts:signInWithIdp",Qd(e,t))}class tf extends $h{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new tf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ad("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=Sd(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new tf(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return ef(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ef(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ef(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ft(t)}return e}}const nf={USER_NOT_FOUND:"user-not-found"};class rf extends $h{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new rf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new rf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Xd(e,"POST","/v1/accounts:signInWithPhoneNumber",Qd(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Xd(e,"POST","/v1/accounts:signInWithPhoneNumber",Qd(e,t));if(n.temporaryProof)throw th(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Xd(e,"POST","/v1/accounts:signInWithPhoneNumber",Qd(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),nf)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new rf({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class sf{constructor(e){var t,n,r,s,i,a;const o=pt(mt(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Ld(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=pt(mt(e)).link,n=t?pt(mt(t)).deep_link_id:null,r=pt(mt(e)).deep_link_id;return(r?pt(mt(r)).link:null)||r||n||t||e}(e);try{return new sf(t)}catch(n){return null}}}class af{constructor(){this.providerId=af.PROVIDER_ID}static credential(e,t){return Zh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=sf.parseLink(t);return Ld(n,"argument-error"),Zh._fromEmailAndCode(e,n.code,n.tenantId)}}af.PROVIDER_ID="password",af.EMAIL_PASSWORD_SIGN_IN_METHOD="password",af.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class of{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class lf extends of{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cf extends lf{constructor(){super("facebook.com")}static credential(e){return tf._fromParams({providerId:cf.PROVIDER_ID,signInMethod:cf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cf.credentialFromTaggedObject(e)}static credentialFromError(e){return cf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return cf.credential(t.oauthAccessToken)}catch(n){return null}}}cf.FACEBOOK_SIGN_IN_METHOD="facebook.com",cf.PROVIDER_ID="facebook.com";class uf extends lf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return tf._fromParams({providerId:uf.PROVIDER_ID,signInMethod:uf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return uf.credentialFromTaggedObject(e)}static credentialFromError(e){return uf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return uf.credential(n,r)}catch(s){return null}}}uf.GOOGLE_SIGN_IN_METHOD="google.com",uf.PROVIDER_ID="google.com";class df extends lf{constructor(){super("github.com")}static credential(e){return tf._fromParams({providerId:df.PROVIDER_ID,signInMethod:df.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return df.credentialFromTaggedObject(e)}static credentialFromError(e){return df.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return df.credential(t.oauthAccessToken)}catch(n){return null}}}df.GITHUB_SIGN_IN_METHOD="github.com",df.PROVIDER_ID="github.com";class hf extends lf{constructor(){super("twitter.com")}static credential(e,t){return tf._fromParams({providerId:hf.PROVIDER_ID,signInMethod:hf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hf.credentialFromTaggedObject(e)}static credentialFromError(e){return hf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return hf.credential(n,r)}catch(s){return null}}}hf.TWITTER_SIGN_IN_METHOD="twitter.com",hf.PROVIDER_ID="twitter.com";class ff{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await yh._fromIdTokenResponse(e,n,r),i=pf(n);return new ff({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=pf(n);return new ff({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function pf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class mf extends lt{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new mf(e,t,n,r)}}function gf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw mf._fromErrorAndOperation(e,n,t,r);throw n})}async function yf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await uh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ff._forOperation(e,"link",r)}async function vf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(An(r.app))return Promise.reject(Dd(r));const s="reauthenticate";try{const i=await uh(e,gf(r,s,t,e),n);Ld(i.idToken,r,"internal-error");const a=lh(i.idToken);Ld(a,r,"internal-error");const{sub:o}=a;return Ld(e.uid===o,r,"user-mismatch"),ff._forOperation(e,s,i)}catch(Em){throw(null===Em||void 0===Em?void 0:Em.code)==="auth/".concat("user-not-found")&&Ad(r,"user-mismatch"),Em}}async function bf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(An(e.app))return Promise.reject(Dd(e));const r="signIn",s=await gf(e,r,t),i=await ff._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}new WeakMap;const wf="__sak";class xf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wf,"1"),this.storage.removeItem(wf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class _f extends xf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dh(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Rh()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_f.type="LOCAL";const Nf=_f;class Ef extends xf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ef.type="SESSION";const Sf=Ef;class kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new kf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Cf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}kf.receivers=[];class Tf{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Cf("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function If(){return window}function jf(){return"undefined"!==typeof If().WorkerGlobalScope&&"function"===typeof If().importScripts}const Af="firebaseLocalStorageDb",Pf="firebaseLocalStorage",Rf="fbase_key";class Df{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Of(e,t){return e.transaction([Pf],t?"readwrite":"readonly").objectStore(Pf)}function Lf(){const e=indexedDB.open(Af,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Pf,{keyPath:Rf})}catch(Em){n(Em)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Pf)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Af);return new Df(e).toPromise()}(),t(await Lf()))})})}async function Mf(e,t,n){const r=Of(e,!0).put({[Rf]:t,value:n});return new Df(r).toPromise()}function Uf(e,t){const n=Of(e,!0).delete(t);return new Df(n).toPromise()}class Ff{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Lf()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Em){if(t++>3)throw Em;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kf._getInstance(jf()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Tf(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lf();return await Mf(e,wf,"1"),await Uf(e,wf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Mf(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Of(e,!1).get(t),r=await new Df(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Uf(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Of(e,!1).getAll();return new Df(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ff.type="LOCAL";const Vf=Ff;qh("rcb"),new qd(3e4,6e4);const zf="recaptcha";async function Bf(e,t,n){var r;const s=await n.verify();try{let i;if(Ld("string"===typeof s,e,"argument-error"),Ld(n.type===zf,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Ld("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Yd(e,"POST","/v2/accounts/mfaEnrollment:start",Qd(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Ld("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Ld(n,e,"missing-multi-factor-info");const a=await function(e,t){return Yd(e,"POST","/v2/accounts/mfaSignIn:start",Qd(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Yd(e,"POST","/v1/accounts:sendVerificationCode",Qd(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class qf{constructor(e){this.providerId=qf.PROVIDER_ID,this.auth=Fh(e)}verifyPhoneNumber(e,t){return Bf(this.auth,e,vt(t))}static credential(e,t){return rf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return qf.credentialFromTaggedObject(t)}static credentialFromError(e){return qf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?rf._fromTokenResponse(n,r):null}}function Hf(e,t){return t?bh(t):(Ld(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}qf.PROVIDER_ID="phone",qf.PHONE_SIGN_IN_METHOD="phone";class Wf extends $h{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ef(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ef(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ef(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Kf(e){return bf(e.auth,new Wf(e),e.bypassAuthState)}function Gf(e){const{auth:t,user:n}=e;return Ld(n,t,"internal-error"),vf(n,new Wf(e),e.bypassAuthState)}async function Qf(e){const{auth:t,user:n}=e;return Ld(n,t,"internal-error"),yf(n,new Wf(e),e.bypassAuthState)}class Yf{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Em){this.reject(Em)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Em){this.reject(Em)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Kf;case"linkViaPopup":case"linkViaRedirect":return Qf;case"reauthViaPopup":case"reauthViaRedirect":return Gf;default:Ad(this.auth,"internal-error")}}resolve(e){Ud(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ud(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $f=new qd(2e3,1e4);class Xf extends Yf{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Xf.currentPopupAction&&Xf.currentPopupAction.cancel(),Xf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ld(e,this.auth,"internal-error"),e}async onExecution(){Ud(1===this.filter.length,"Popup operations only handle one event");const e=Cf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Pd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Pd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pd(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,$f.get())};e()}}Xf.currentPopupAction=null;const Jf=new Map;class Zf extends Yf{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Jf.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=np(t),r=tp(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Em){e=()=>Promise.reject(Em)}Jf.set(this.auth._key(),e)}return this.bypassAuthState||Jf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ep(e,t){Jf.set(e._key(),t)}function tp(e){return bh(e._redirectPersistence)}function np(e){return _h("pendingRedirect",e.config.apiKey,e.name)}async function rp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(An(e.app))return Promise.reject(Dd(e));const r=Fh(e),s=Hf(r,t),i=new Zf(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class sp{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ap(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ap(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Pd(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ip(e))}saveEventToCache(e){this.cachedEventUids.add(ip(e)),this.lastProcessedEventTime=Date.now()}}function ip(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ap(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const op=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lp=/^https?/;async function cp(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Yd(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(up(r))return}catch(n){}Ad(e,"unauthorized-domain")}function up(e){const t=Fd(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!lp.test(n))return!1;if(op.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const dp=new qd(3e4,6e4);function hp(){const e=If().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function fp(e){return new Promise((t,n)=>{var r,s,i;function a(){hp(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hp(),n(Pd(e,"network-request-failed"))},timeout:dp.get()})}if(null===(s=null===(r=If().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=If().gapi)||void 0===i?void 0:i.load)){const t=qh("iframefcb");return If()[t]=()=>{gapi.load?a():n(Pd(e,"network-request-failed"))},Bh("".concat(zh.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw pp=null,e})}let pp=null;const mp=new qd(5e3,15e3),gp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vp(e){const t=e.config;Ld(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Hd(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Dn},s=yp.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(ft(r).slice(1))}async function bp(e){const t=await function(e){return pp=pp||fp(e),pp}(e),n=If().gapi;return Ld(n,e,"internal-error"),t.open({where:document.body,url:vp(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gp,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Pd(e,"network-request-failed"),i=If().setTimeout(()=>{r(s)},mp.get());function a(){If().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const wp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Em){}}}function _p(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},wp),{width:r.toString(),height:s.toString(),top:i,left:a}),c=it().toLowerCase();n&&(o=Ch(c)?"_blank":n),Sh(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Ph(arguments.length>0&&void 0!==arguments[0]?arguments[0]:it())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new xp(null);const d=window.open(t||"",o,u);Ld(d,e,"popup-blocked");try{d.focus()}catch(Em){}return new xp(d)}const Np="__/auth/handler",Ep="emulator/auth/handler",Sp=encodeURIComponent("fac");async function kp(e,t,n,r,s,i){Ld(e.config.authDomain,e,"auth-domain-config-required"),Ld(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Dn,eventId:s};if(t instanceof of){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof lf){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Sp,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Np);return Hd(t,Ep)}(e),"?").concat(ft(o).slice(1)).concat(c)}const Cp="webStorageSupport";const Tp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sf,this._completeRedirectFn=rp,this._overrideRedirectResult=ep}async _openPopup(e,t,n,r){var s;Ud(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return _p(e,await kp(e,t,n,Fd(),r),Cf())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){If().location.href=e}(await kp(e,t,n,Fd(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ud(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await bp(e),n=new sp(e);return t.register("authEvent",t=>{Ld(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cp,{type:Cp},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Cp];void 0!==s&&t(!!s),Ad(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cp(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Dh()||kh()||Ph()}};var Ip="@firebase/auth",jp="1.7.9";class Ap{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ld(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Pp=nt("authIdTokenMaxAge")||300;let Rp=null;var Dp;zh={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Pd("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Dp="Browser",In(new bt("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Ld(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Dp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oh(Dp)},c=new Uh(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(bh);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),In(new bt("auth-internal",e=>(e=>new Ap(e))(Fh(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(Ip,jp,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Dp)),Mn(Ip,jp,"esm2017");const Op="firebasestorage.googleapis.com",Lp="storageBucket";class Mp extends lt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Vp(e),"Firebase Storage: ".concat(t," (").concat(Vp(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mp.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Up,Fp;function Vp(e){return"storage/"+e}function zp(){return new Mp(Up.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Bp(){return new Mp(Up.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qp(){return new Mp(Up.CANCELED,"User canceled the upload/download.")}function Hp(e){return new Mp(Up.INVALID_ARGUMENT,e)}function Wp(){return new Mp(Up.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Up||(Up={}));class Kp{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Kp.makeFromUrl(e,t)}catch(Em){return new Kp(e,"")}if(""===n.path)return n;throw r=e,new Mp(Up.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===Op?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new Kp(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new Mp(Up.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Gp{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Qp(e,t,n,r){if(r<t)throw Hp("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Hp("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Yp(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function $p(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Fp||(Fp={}));class Xp{constructor(e,t,n,r,s,i,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Jp(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Fp.NO_ERROR,s=n.getStatus();if(!t||$p(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Fp.ABORT;return void e(!1,new Jp(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new Jp(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Em){r(Em)}else if(null!==s){const e=zp();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?Wp():qp())}else{r(Bp())}};this.canceled_?t(0,new Jp(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){s=setTimeout(()=>{s=null,e(f,l())},t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),d(i)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==s?(e||(o=2),clearTimeout(s),d(0)):e||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Jp{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Zp(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class em{constructor(e,t){this._service=e,this._location=t instanceof Kp?t:Kp.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new em(e,t)}get root(){const e=new Kp(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Zp(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Kp(this._location.bucket,e);return new em(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Mp(Up.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function tm(e,t){const n=null===t||void 0===t?void 0:t[Lp];return null==n?null:Kp.makeFromBucketSpec(n,e)}class nm{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=Op,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Kp.makeFromBucketSpec(r,this._host):tm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Kp.makeFromBucketSpec(this._url,e):this._bucket=tm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Qp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Qp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new em(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Gp(Wp());{const i=function(e,t,n,r,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=Yp(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Xp(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a)}(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const rm="@firebase/storage",sm="0.13.2",im="storage";function am(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new nm(r,s,i,n,Dn)}In(new bt(im,am,"PUBLIC").setMultipleInstances(!0)),Mn(rm,sm,""),Mn(rm,sm,"esm2017");const om={apiKey:"AIzaSyDZt974FbKhjcsj_rXUnrXhDiHT7rLInC4",authDomain:"carsale-5904d.firebaseapp.com",projectId:"carsale-5904d",storageBucket:"carsale-5904d.firebasestorage.app",messagingSenderId:"142438520030",appId:"1:142438520030:web:f629deb2fbe1f312361e4f",measurementId:"G-LCRGD7Q1VW"};let lm;try{lm=On(om),console.log("Firebase initialized successfully")}catch(Sm){throw console.error("Firebase initialization error:",Sm),Sm}!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln();const t=jn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=jn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(dt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ad(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Tp,persistence:[Vf,Nf,Sf]}),r=nt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Pp)return;const r=null===t||void 0===t?void 0:t.token;Rp!==r&&(Rp=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){vt(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){vt(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=Ze("auth");i&&Gh(n,"http://".concat(i))}(lm);const cm=function(e,t){const n="string"==typeof e?e:t||"(default)",r=jn("object"==typeof e?e:Ln(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=et("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=yu(e,bu))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=cr.MOCK_USER;else{t=st(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new xr(wr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new cr(i)}e._authCredentials=new Sr(new Nr(t,n))}}(r,...e)}return r}(lm),um=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln(),t=arguments.length>1?arguments[1]:void 0;e=vt(e);const n=jn(e,im).getImmediate({identifier:t}),r=et("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:st(s,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(lm),"dduecixeg"),dm=async e=>new Promise((t,n)=>{const r=new FormData;r.append("file",e),r.append("upload_preset","car_images"),r.append("folder","car_sale_system"),console.log("Uploading image:",e.name,"Size:",e.size),fetch("https://api.cloudinary.com/v1_1/".concat(um,"/image/upload"),{method:"POST",body:r}).then(e=>(console.log("Cloudinary response status:",e.status),e.json())).then(r=>{if(console.log("Cloudinary response data:",r),r.secure_url)t(r.secure_url);else{if(r.error&&r.error.message.includes("upload_preset")){console.log("Custom preset not found, trying with default preset...");const t=new FormData;return t.append("file",e),t.append("upload_preset","ml_default"),fetch("https://api.cloudinary.com/v1_1/".concat(um,"/image/upload"),{method:"POST",body:t})}var s;n(new Error((null===(s=r.error)||void 0===s?void 0:s.message)||"Upload failed - no secure URL returned"))}}).then(e=>{if(e)return e.json()}).then(e=>{if(e&&e.secure_url)console.log("Upload successful with fallback preset"),t(e.secure_url);else if(e){var r;n(new Error((null===(r=e.error)||void 0===r?void 0:r.message)||"Upload failed with fallback preset"))}}).catch(e=>{console.error("Cloudinary upload error:",e),n(e)})}),hm=async e=>{console.log("Starting upload of",e.length,"images to Cloudinary");for(const n of e){if(n.size>10485760)throw new Error("File ".concat(n.name," is too large. Maximum size is 10MB."));if(!n.type.startsWith("image/"))throw new Error("File ".concat(n.name," is not an image."))}const t=e.map((e,t)=>dm(e).catch(n=>{throw console.error("Error uploading file ".concat(t+1," (").concat(e.name,"):"),n),new Error("Failed to upload ".concat(e.name,": ").concat(n.message))}));try{const e=await Promise.all(t);return console.log("All uploads completed successfully to Cloudinary:",e),e}catch(Sm){throw console.error("Cloudinary upload batch failed:",Sm),Sm}},fm=async e=>{console.log("Using base64 upload for development (small images only)");for(const n of e)if(n.size>512e3)throw new Error("File ".concat(n.name," is too large for development mode. Please configure Cloudinary for files over 500KB."));const t=e.map(e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)}));return Promise.all(t)},pm=()=>{const{currentUser:e}=De(),[t,n]=(0,s.useState)({chassisNumber:"",brand:"",model:"",year:(new Date).getFullYear(),grade:"",country:"",purchasePrice:0,cifValue:0,lcValue:0,sellingPrice:0,advancePayment:0,shippingCompany:"",shippingDate:"",arrivalDate:"",purchaserName:"",purchaserPhone:"",purchaserIdNumber:"",purchaserAddress:"",price:0,images:[]}),[r,i]=(0,s.useState)(!1),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(0),[u,d]=(0,s.useState)(""),[h,f]=(0,s.useState)(""),p=t.sellingPrice-t.cifValue,m=t.sellingPrice-t.advancePayment,g=e=>{const{name:r,value:s}=e.target;n(je(je({},t),{},{[r]:["purchasePrice","cifValue","lcValue","sellingPrice","advancePayment","price","year"].includes(r)?parseFloat(s)||0:s}))};return(0,Pe.jsx)(He,{children:(0,Pe.jsxs)("div",{className:"max-w-6xl mx-auto",style:{paddingTop:"75px"},children:[(0,Pe.jsxs)("div",{className:"mb-8",children:[(0,Pe.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Add New Vehicle"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Fill in the complete vehicle details including financial and shipping information"})]}),u&&(0,Pe.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[(0,Pe.jsx)("span",{className:"text-red-500 mr-2",children:"\u26a0\ufe0f"}),u]}),h&&(0,Pe.jsxs)("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[(0,Pe.jsx)("span",{className:"text-green-500 mr-2",children:"\u2705"}),h]}),(0,Pe.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),i(!0),d(""),f("");try{if(!t.chassisNumber||!t.brand||!t.model)throw new Error("Please fill in all required fields (Chassis Number, Brand, Model)");if(0===t.images.length)throw new Error("Please upload at least one image");if(t.images.length>4)throw new Error("Maximum 4 images allowed");let r;o(!0);try{r=await hm(t.images),console.log("Images uploaded to Cloudinary successfully")}catch(s){console.warn("Cloudinary upload failed:",s);try{r=await fm(t.images),console.log("Images converted to base64 for development"),d("Note: Using development mode for images. Some features may be limited.")}catch(a){throw new Error("Upload failed: ".concat(s.message,". Please check your Cloudinary configuration or use smaller images."))}}o(!1);const i={chassisNumber:t.chassisNumber,brand:t.brand,model:t.model,year:t.year,grade:t.grade,country:t.country,purchasePrice:t.purchasePrice,cifValue:t.cifValue,lcValue:t.lcValue,sellingPrice:t.sellingPrice,netProfit:p,advancePayment:t.advancePayment,restPayment:m,shippingCompany:t.shippingCompany,shippingDate:t.shippingDate?new Date(t.shippingDate):null,arrivalDate:t.arrivalDate?new Date(t.arrivalDate):null,purchaserName:t.purchaserName,purchaserPhone:t.purchaserPhone,purchaserIdNumber:t.purchaserIdNumber,purchaserAddress:t.purchaserAddress,price:t.purchasePrice||t.price,images:r,addedBy:null===e||void 0===e?void 0:e.uid,createdAt:new Date,updatedAt:new Date,status:"available"};await function(e,t){const n=yu(e.firestore,ku),r=Eu(e),s=fd(e.converter,t);return Nd(n,[zu(Vu(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,pa.exists(!1))]).then(()=>r)}(Nu(cm,"vehicles"),i),f("Vehicle added successfully!"),n({chassisNumber:"",brand:"",model:"",year:(new Date).getFullYear(),grade:"",country:"",purchasePrice:0,cifValue:0,lcValue:0,sellingPrice:0,advancePayment:0,shippingCompany:"",shippingDate:"",arrivalDate:"",purchaserName:"",purchaserPhone:"",purchaserIdNumber:"",purchaserAddress:"",price:0,images:[]})}catch(u){d(u.message||"Failed to add vehicle")}finally{i(!1),o(!1)}},className:"space-y-8",children:[(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Pe.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,Pe.jsx)("span",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:"\ufffd"}),"Basic Vehicle Information"]}),(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Chassis Number ",(0,Pe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Pe.jsx)("input",{type:"text",name:"chassisNumber",required:!0,value:t.chassisNumber,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter unique chassis number"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Brand ",(0,Pe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Pe.jsx)("input",{type:"text",name:"brand",required:!0,value:t.brand,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Toyota, Honda, BMW..."})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Model ",(0,Pe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Pe.jsx)("input",{type:"text",name:"model",required:!0,value:t.model,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Camry, Civic, X5..."})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Year ",(0,Pe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Pe.jsx)("input",{type:"number",name:"year",value:t.year,onChange:g,min:"1900",max:(new Date).getFullYear()+1,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vehicle Grade"}),(0,Pe.jsx)("input",{type:"text",name:"grade",value:t.grade,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"A, B, C, D, or custom grade"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Country ",(0,Pe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Pe.jsxs)("select",{name:"country",required:!0,value:t.country,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,Pe.jsx)("option",{value:"",children:"Select Country"}),(0,Pe.jsx)("option",{value:"Japan",children:"Japan"}),(0,Pe.jsx)("option",{value:"Germany",children:"Germany"}),(0,Pe.jsx)("option",{value:"USA",children:"USA"}),(0,Pe.jsx)("option",{value:"UK",children:"UK"}),(0,Pe.jsx)("option",{value:"South Korea",children:"South Korea"}),(0,Pe.jsx)("option",{value:"Other",children:"Other"})]})]})]})]}),(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Pe.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,Pe.jsx)("span",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:"\ud83d\udcb0"}),"Financial Information"]}),(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Price (LKR)"}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("span",{className:"absolute left-3 top-3 text-gray-500",children:"Rs."}),(0,Pe.jsx)("input",{type:"number",name:"purchasePrice",value:t.purchasePrice,onChange:g,min:"0",step:"0.01",className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"0.00"})]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CIF Value (LKR)"}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("span",{className:"absolute left-3 top-3 text-gray-500",children:"Rs."}),(0,Pe.jsx)("input",{type:"number",name:"cifValue",value:t.cifValue,onChange:g,min:"0",step:"0.01",className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"0.00"})]}),(0,Pe.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Cost, Insurance, and Freight"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LC Value (LKR)"}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("span",{className:"absolute left-3 top-3 text-gray-500",children:"Rs."}),(0,Pe.jsx)("input",{type:"number",name:"lcValue",value:t.lcValue,onChange:g,min:"0",step:"0.01",className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"0.00"})]}),(0,Pe.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Letter of Credit Value"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Price (LKR)"}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("span",{className:"absolute left-3 top-3 text-gray-500",children:"Rs."}),(0,Pe.jsx)("input",{type:"number",name:"sellingPrice",value:t.sellingPrice,onChange:g,min:"0",step:"0.01",className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"0.00"})]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Advance Payment (LKR)"}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("span",{className:"absolute left-3 top-3 text-gray-500",children:"Rs."}),(0,Pe.jsx)("input",{type:"number",name:"advancePayment",value:t.advancePayment,onChange:g,min:"0",step:"0.01",className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"0.00"})]})]}),(0,Pe.jsx)("div",{className:"lg:col-span-1 grid grid-cols-1 gap-4",children:(0,Pe.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Net Profit (Auto-calculated)"}),(0,Pe.jsxs)("div",{className:"text-lg font-semibold text-green-600",children:["Rs. ",p.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,Pe.jsx)("p",{className:"text-xs text-gray-500",children:"Selling Price - CIF Value"})]})}),(0,Pe.jsx)("div",{className:"lg:col-span-3",children:(0,Pe.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rest Payment (Auto-calculated)"}),(0,Pe.jsxs)("div",{className:"text-lg font-semibold text-blue-600",children:["Rs. ",m.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,Pe.jsx)("p",{className:"text-xs text-gray-500",children:"Selling Price - Advance Payment"})]})})]})]}),(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Pe.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,Pe.jsx)("span",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:"\ud83d\udea2"}),"Shipping Information"]}),(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Company"}),(0,Pe.jsx)("input",{type:"text",name:"shippingCompany",value:t.shippingCompany,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter shipping company name"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Date"}),(0,Pe.jsx)("input",{type:"date",name:"shippingDate",value:t.shippingDate,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Arrival Date"}),(0,Pe.jsx)("input",{type:"date",name:"arrivalDate",value:t.arrivalDate,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]})]}),(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Pe.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,Pe.jsx)("span",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mr-3",children:"\ud83d\udc64"}),"Purchaser Details ",(0,Pe.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"(Optional)"})]}),(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Person Name"}),(0,Pe.jsx)("input",{type:"text",name:"purchaserName",value:t.purchaserName,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter purchaser's full name"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,Pe.jsx)("input",{type:"tel",name:"purchaserPhone",value:t.purchaserPhone,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter phone number"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID Number"}),(0,Pe.jsx)("input",{type:"text",name:"purchaserIdNumber",value:t.purchaserIdNumber,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter ID/NIC number"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,Pe.jsx)("textarea",{name:"purchaserAddress",value:t.purchaserAddress,onChange:g,rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none",placeholder:"Enter complete address"})]})]})]}),(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Pe.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,Pe.jsx)("span",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center mr-3",children:"\ud83d\udcf7"}),"Vehicle Images"]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload Images (Maximum 4 images) ",(0,Pe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Pe.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){const r=Array.from(e.target.files);if(r.length>4)return void d("Maximum 4 images allowed");for(const e of r){if(e.size>10485760)return void d("File ".concat(e.name," is too large. Maximum size is 10MB."));if(!e.type.startsWith("image/"))return void d("File ".concat(e.name," is not an image."))}d(""),n(je(je({},t),{},{images:r}))}},className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(0,Pe.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Upload 1-4 high-quality images of the vehicle. Maximum 10MB per image."}),t.images.length>0&&(0,Pe.jsxs)("div",{className:"mt-4",children:[(0,Pe.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"Selected files:"}),(0,Pe.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:Array.from(t.images).map((e,t)=>(0,Pe.jsxs)("div",{className:"flex items-center text-sm bg-gray-50 px-3 py-2 rounded-lg",children:[(0,Pe.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),(0,Pe.jsx)("span",{className:"flex-1 truncate",children:e.name}),(0,Pe.jsxs)("span",{className:"text-gray-500 text-xs",children:["(",(e.size/1024/1024).toFixed(2)," MB)"]})]},t))})]})]})]}),(r||a)&&l>0&&(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Pe.jsx)("span",{className:"text-sm font-medium text-gray-700",children:a?"Uploading Images...":"Processing..."}),(0,Pe.jsxs)("span",{className:"text-sm text-gray-600",children:[l,"%"]})]}),(0,Pe.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Pe.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(l,"%")}})})]}),(0,Pe.jsxs)("div",{className:"flex justify-end space-x-4 pt-6",children:[(0,Pe.jsx)("a",{href:"/dashboard",className:"px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),(0,Pe.jsx)("button",{type:"submit",disabled:r||a,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:a?(0,Pe.jsxs)("span",{className:"flex items-center",children:[(0,Pe.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Pe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Pe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading Images..."]}):r?(0,Pe.jsxs)("span",{className:"flex items-center",children:[(0,Pe.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Pe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Pe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding Vehicle..."]}):"Add Vehicle"})]})]})]})})},mm=()=>{const{id:e}=te(),t=ee(),{currentUser:n,isAdmin:r}=De(),[i,a]=(0,s.useState)({chassisNumber:"",brand:"",model:"",year:(new Date).getFullYear(),grade:"",country:"",purchasePrice:0,cifValue:0,lcValue:0,sellingPrice:0,advancePayment:0,shippingCompany:"",shippingDate:"",arrivalDate:"",purchaserName:"",purchaserPhone:"",purchaserIdNumber:"",purchaserAddress:"",price:0,images:[]}),[o,l]=(0,s.useState)([]),[c,u]=(0,s.useState)(null),[d,h]=(0,s.useState)(0),[f,p]=(0,s.useState)(0),[m,g]=(0,s.useState)("available"),[y,v]=(0,s.useState)(!0),[b,w]=(0,s.useState)(!1),[x,_]=(0,s.useState)(!1),[N,E]=(0,s.useState)(""),[S,k]=(0,s.useState)("");(0,s.useEffect)(()=>{e&&C()},[e]),(0,s.useEffect)(()=>{i.country&&T()},[i.country]);const C=async()=>{if(e)try{v(!0);const t=await bd(Eu(cm,"vehicles",e));if(t.exists()){const e=t.data();if(!r&&e.addedBy!==(null===n||void 0===n?void 0:n.uid))return void E("You do not have permission to edit this vehicle");a({chassisNumber:e.chassisNumber,brand:e.brand,model:e.model,year:e.year,grade:e.grade||"",country:e.country,purchasePrice:e.purchasePrice||e.price||0,cifValue:e.cifValue||0,lcValue:e.lcValue||0,sellingPrice:e.sellingPrice||e.totalAmount||0,advancePayment:e.advancePayment||0,shippingCompany:e.shippingCompany||"",shippingDate:e.shippingDate?new Date(e.shippingDate).toISOString().split("T")[0]:"",arrivalDate:e.arrivalDate?new Date(e.arrivalDate).toISOString().split("T")[0]:"",purchaserName:e.purchaserName||"",purchaserPhone:e.purchaserPhone||"",purchaserIdNumber:e.purchaserIdNumber||"",purchaserAddress:e.purchaserAddress||"",price:e.price||0,images:[]}),l(e.images||[]),h(e.advancePayment||0),p(e.sellingPrice||e.totalAmount||0),g(e.status||"available")}else E("Vehicle not found")}catch(N){console.error("Error loading vehicle:",N),E("Failed to load vehicle details")}finally{v(!1)}},T=async()=>{try{const e=function(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof id&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof ld).length,n=e.filter(e=>e instanceof od).length;if(t>1||t>0&&n>0)throw new xr(wr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}(Nu(cm,"taxDutyConfig"),function(e,t,n){const r=t,s=rd("where",e);return od._create(s,r,n)}("country","==",i.country)),t=await xd(e);if(t.empty)u(null);else{const e=t.docs[0].data();u(e)}}catch(N){console.error("Error loading tax/duty config:",N)}},I=()=>{const e=i.price||0,t=e*((null===c||void 0===c?void 0:c.taxPercentage)||15)/100,n=e*((null===c||void 0===c?void 0:c.dutyPercentage)||10)/100;return{tax:t,duty:n,totalAmount:e+t+n}},j=e=>{const{name:t,value:n}=e.target;a(je(je({},i),{},{[t]:"price"===t||"year"===t?parseInt(n)||0:n}))};if(y)return(0,Pe.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,Pe.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"})});if(N&&!i.chassisNumber)return(0,Pe.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),(0,Pe.jsx)("p",{className:"text-gray-600 mb-4",children:N}),(0,Pe.jsx)("button",{onClick:()=>t("/dashboard"),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Back to Dashboard"})]})});const{tax:A,duty:P,totalAmount:R}=I();return(0,Pe.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,Pe.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Pe.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,Pe.jsxs)("div",{className:"mb-6",children:[(0,Pe.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Vehicle"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Update vehicle details below"})]}),N&&(0,Pe.jsx)("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:N}),S&&(0,Pe.jsx)("div",{className:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:S}),(0,Pe.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),e){w(!0),E(""),k("");try{if(!i.chassisNumber||!i.brand||!i.model)throw new Error("Please fill in all required fields");const{tax:n,duty:l,totalAmount:c}=I();let u=o;if(i.images.length>0){if(i.images.length>4)throw new Error("Maximum 4 images allowed");_(!0);try{const e=await hm(i.images);u=[...o,...e].slice(0,4)}catch(s){console.warn("Cloudinary upload failed:",s);try{const e=await fm(i.images);u=[...o,...e].slice(0,4),E("Note: Using development mode for new images. Some features may be limited.")}catch(a){throw new Error("Upload failed: ".concat(s.message,". Please check your Cloudinary configuration or use smaller images."))}}_(!1)}const h={chassisNumber:i.chassisNumber,brand:i.brand,model:i.model,year:i.year,grade:i.grade,country:i.country,price:i.price,tax:n,duty:l,totalAmount:f||c,advancePayment:d,fullAmount:f||c,images:u,updatedAt:new Date};r&&(h.status=m),await _d(Eu(cm,"vehicles",e),h),k("Vehicle updated successfully!"),setTimeout(()=>{t("/vehicle/".concat(e))},2e3)}catch(N){E(N.message||"Failed to update vehicle")}finally{w(!1),_(!1)}}},className:"space-y-6",children:[(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Chassis Number *"}),(0,Pe.jsx)("input",{type:"text",name:"chassisNumber",required:!0,value:i.chassisNumber,onChange:j,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Brand *"}),(0,Pe.jsx)("input",{type:"text",name:"brand",required:!0,value:i.brand,onChange:j,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Model *"}),(0,Pe.jsx)("input",{type:"text",name:"model",required:!0,value:i.model,onChange:j,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Year"}),(0,Pe.jsx)("input",{type:"number",name:"year",value:i.year,onChange:j,min:"1900",max:(new Date).getFullYear()+1,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Vehicle Grade"}),(0,Pe.jsxs)("select",{name:"grade",value:i.grade,onChange:j,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,Pe.jsx)("option",{value:"",children:"Select Grade"}),(0,Pe.jsx)("option",{value:"A",children:"Grade A"}),(0,Pe.jsx)("option",{value:"B",children:"Grade B"}),(0,Pe.jsx)("option",{value:"C",children:"Grade C"}),(0,Pe.jsx)("option",{value:"D",children:"Grade D"})]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Country *"}),(0,Pe.jsxs)("select",{name:"country",required:!0,value:i.country,onChange:j,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,Pe.jsx)("option",{value:"",children:"Select Country"}),(0,Pe.jsx)("option",{value:"Japan",children:"Japan"}),(0,Pe.jsx)("option",{value:"Germany",children:"Germany"}),(0,Pe.jsx)("option",{value:"USA",children:"USA"}),(0,Pe.jsx)("option",{value:"UK",children:"UK"}),(0,Pe.jsx)("option",{value:"South Korea",children:"South Korea"}),(0,Pe.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Price (USD) *"}),(0,Pe.jsx)("input",{type:"number",name:"price",required:!0,value:i.price,onChange:j,min:"0",step:"0.01",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),r&&(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,Pe.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[(0,Pe.jsx)("option",{value:"available",children:"Available"}),(0,Pe.jsx)("option",{value:"sold",children:"Sold"}),(0,Pe.jsx)("option",{value:"reserved",children:"Reserved"})]})]})]}),(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Advance Payment (USD)"}),(0,Pe.jsx)("input",{type:"number",value:d,onChange:e=>h(parseFloat(e.target.value)||0),min:"0",step:"0.01",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Full Amount (USD)"}),(0,Pe.jsx)("input",{type:"number",value:f,onChange:e=>p(parseFloat(e.target.value)||0),min:"0",step:"0.01",placeholder:"Auto-calculated: $".concat(R.toLocaleString()),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),(0,Pe.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Leave empty to use auto-calculated amount including tax and duty"})]})]}),c&&(0,Pe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,Pe.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tax & Duty Calculation"}),(0,Pe.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-gray-600",children:"Base Price:"}),(0,Pe.jsxs)("p",{className:"font-medium",children:["$",i.price.toLocaleString()]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("span",{className:"text-gray-600",children:["Tax (",c.taxPercentage,"%):"]}),(0,Pe.jsxs)("p",{className:"font-medium",children:["$",A.toLocaleString()]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("span",{className:"text-gray-600",children:["Duty (",c.dutyPercentage,"%):"]}),(0,Pe.jsxs)("p",{className:"font-medium",children:["$",P.toLocaleString()]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-gray-600",children:"Total:"}),(0,Pe.jsxs)("p",{className:"font-medium",children:["$",R.toLocaleString()]})]})]})]}),o.length>0&&(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Images"}),(0,Pe.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:o.map((e,t)=>(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("img",{src:e,alt:"Vehicle ".concat(t+1),className:"w-full h-32 object-cover rounded-lg"}),(0,Pe.jsx)("button",{type:"button",onClick:()=>(e=>{const t=o.filter((t,n)=>n!==e);l(t)})(t),className:"absolute top-2 right-2 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-700",children:"\xd7"})]},t))})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Add New Images (Max ",4-o.length," more)"]}),(0,Pe.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){const t=Array.from(e.target.files);if(o.length+t.length>4)return void E("Maximum 4 images allowed in total");for(const e of t){if(e.size>10485760)return void E("File ".concat(e.name," is too large. Maximum size is 10MB."));if(!e.type.startsWith("image/"))return void E("File ".concat(e.name," is not an image."))}E(""),a(je(je({},i),{},{images:t}))}},disabled:o.length>=4,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100"}),(0,Pe.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Upload additional high-quality images of the vehicle (total max: 4)"}),i.images.length>0&&(0,Pe.jsxs)("div",{className:"mt-2",children:[(0,Pe.jsxs)("p",{className:"text-sm text-gray-600",children:["Selected: ",i.images.length," new image(s)"]}),(0,Pe.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:Array.from(i.images).map((e,t)=>(0,Pe.jsx)("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:e.name},t))})]})]}),(0,Pe.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Pe.jsx)("button",{type:"button",onClick:()=>t("/vehicle/".concat(e)),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,Pe.jsx)("button",{type:"submit",disabled:b||x,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:x?"Uploading Images...":b?"Saving Changes...":"Save Changes"})]})]})]})})})},gm=()=>{var e;const{currentUser:t,updateUserProfile:n,updateUserEmail:r,updateUserPassword:i}=De(),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(""),[u,d]=(0,s.useState)(""),[h,f]=(0,s.useState)({displayName:(null===t||void 0===t?void 0:t.displayName)||"",email:(null===t||void 0===t?void 0:t.email)||""}),[p,m]=(0,s.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),g=e=>{f(je(je({},h),{},{[e.target.name]:e.target.value}))},y=e=>{m(je(je({},p),{},{[e.target.name]:e.target.value}))};return(0,Pe.jsx)(He,{children:(0,Pe.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",style:{paddingTop:"70px"},children:[(0,Pe.jsxs)("div",{className:"mb-8",children:[(0,Pe.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Account Settings"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Manage your profile and security settings"})]}),l&&(0,Pe.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[(0,Pe.jsx)("span",{className:"text-green-500 mr-2",children:"\u2705"}),l]}),u&&(0,Pe.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[(0,Pe.jsx)("span",{className:"text-red-500 mr-2",children:"\u26a0\ufe0f"}),u]}),(0,Pe.jsxs)("div",{className:"bg-white shadow-lg rounded-xl border border-gray-100 p-8",children:[(0,Pe.jsxs)("div",{className:"flex items-center mb-6",children:[(0,Pe.jsx)("div",{className:"h-12 w-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center mr-4",children:(0,Pe.jsx)("span",{className:"text-xl text-white",children:"\ud83d\udc64"})}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Profile Information"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Update your account details"})]})]}),(0,Pe.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0),d(""),c("");try{h.displayName!==(null===t||void 0===t?void 0:t.displayName)&&await n({displayName:h.displayName}),h.email!==(null===t||void 0===t?void 0:t.email)&&await r(h.email),c("Profile updated successfully!")}catch(u){d(u.message||"Failed to update profile")}finally{o(!1)}},className:"space-y-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,Pe.jsx)("input",{id:"displayName",name:"displayName",type:"text",value:h.displayName,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your full name"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,Pe.jsx)("input",{id:"email",name:"email",type:"email",value:h.email,onChange:g,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email"}),(0,Pe.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"You may need to verify your new email address"})]}),(0,Pe.jsx)("div",{className:"flex justify-end",children:(0,Pe.jsx)("button",{type:"submit",disabled:a,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-medium rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:a?"Updating...":"Update Profile"})})]})]}),(0,Pe.jsxs)("div",{className:"bg-white shadow-lg rounded-xl border border-gray-100 p-8",children:[(0,Pe.jsxs)("div",{className:"flex items-center mb-6",children:[(0,Pe.jsx)("div",{className:"h-12 w-12 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg flex items-center justify-center mr-4",children:(0,Pe.jsx)("span",{className:"text-xl text-white",children:"\ud83d\udd12"})}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Change Password"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Update your account password"})]})]}),(0,Pe.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o(!0),d(""),c(""),p.newPassword!==p.confirmPassword)return d("New passwords do not match"),void o(!1);if(p.newPassword.length<6)return d("Password must be at least 6 characters long"),void o(!1);try{await i(p.newPassword),c("Password updated successfully!"),m({currentPassword:"",newPassword:"",confirmPassword:""})}catch(u){d(u.message||"Failed to update password")}finally{o(!1)}},className:"space-y-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),(0,Pe.jsx)("input",{id:"currentPassword",name:"currentPassword",type:"password",value:p.currentPassword,onChange:y,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your current password"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,Pe.jsx)("input",{id:"newPassword",name:"newPassword",type:"password",value:p.newPassword,onChange:y,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your new password"}),(0,Pe.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Must be at least 6 characters long"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,Pe.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:p.confirmPassword,onChange:y,className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-200",placeholder:"Confirm your new password"})]}),(0,Pe.jsx)("div",{className:"flex justify-end",children:(0,Pe.jsx)("button",{type:"submit",disabled:a,className:"px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white font-medium rounded-lg hover:from-red-700 hover:to-orange-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:a?"Updating...":"Update Password"})})]})]}),(0,Pe.jsxs)("div",{className:"bg-white shadow-lg rounded-xl border border-gray-100 p-8",children:[(0,Pe.jsxs)("div",{className:"flex items-center mb-6",children:[(0,Pe.jsx)("div",{className:"h-12 w-12 bg-gradient-to-r from-green-500 to-teal-500 rounded-lg flex items-center justify-center mr-4",children:(0,Pe.jsx)("span",{className:"text-xl text-white",children:"\u2139\ufe0f"})}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Account Information"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"View your account details"})]})]}),(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User ID"}),(0,Pe.jsx)("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-gray-900",children:null===t||void 0===t?void 0:t.uid})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type"}),(0,Pe.jsx)("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-gray-900",children:"admin@carsale.com"===(null===t||void 0===t?void 0:t.email)?"Administrator":"Standard User"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Verified"}),(0,Pe.jsx)("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg",children:(0,Pe.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(null!==t&&void 0!==t&&t.emailVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:null!==t&&void 0!==t&&t.emailVerified?"\u2705 Verified":"\u26a0\ufe0f Unverified"})})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Created"}),(0,Pe.jsx)("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-gray-900",children:null!==t&&void 0!==t&&null!==(e=t.metadata)&&void 0!==e&&e.creationTime?new Date(t.metadata.creationTime).toLocaleDateString():"Unknown"})]})]})]})]})})},ym=()=>{const{isAdmin:e}=De(),[t,n]=(0,s.useState)(null),[r,i]=(0,s.useState)(!0),[a,o]=(0,s.useState)("");(0,s.useEffect)(()=>{l()},[]);const l=async()=>{try{i(!0);const e=Nu(cm,"vehicles"),t=(await xd(e)).docs.map(e=>je({id:e.id},e.data())),r=c(t);n(r)}catch(a){console.error("Error fetching analytics:",a),o("Failed to load analytics data")}finally{i(!1)}},c=e=>{const t=e.length,n=e.reduce((e,t)=>e+t.price,0),r=e.reduce((e,t)=>e+((t.totalAmount||t.price)-t.price),0),s=t>0?n/t:0,i=e.reduce((e,t)=>{const n=t.status||"available";return e[n]=(e[n]||0)+1,e},{available:0,sold:0,pending:0}),a=e.reduce((e,t)=>{const n="".concat(t.brand," ").concat(t.model);return e[n]||(e[n]={make:t.brand,model:t.model,count:0,revenue:0}),e[n].count+=1,e[n].revenue+=t.totalAmount||t.price,e},{}),o=Object.values(a).sort((e,t)=>t.revenue-e.revenue).slice(0,5);return{totalVehicles:t,totalInventoryValue:n,totalPotentialProfit:r,averagePrice:s,vehiclesByStatus:i,salesByMonth:[{month:"Jan",sales:15,revenue:45e4},{month:"Feb",sales:22,revenue:66e4},{month:"Mar",sales:18,revenue:54e4},{month:"Apr",sales:25,revenue:75e4},{month:"May",sales:20,revenue:6e5},{month:"Jun",sales:28,revenue:84e4}],topPerformingVehicles:o,profitMargins:[{category:"Luxury Cars",margin:25},{category:"SUVs",margin:18},{category:"Sedans",margin:15},{category:"Sports Cars",margin:30},{category:"Trucks",margin:20}]}};return e?r?(0,Pe.jsx)(He,{children:(0,Pe.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,Pe.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a?(0,Pe.jsxs)(He,{children:[(0,Pe.jsxs)("div",{className:"mb-8",children:[(0,Pe.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Analytics"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Business insights and performance metrics"})]}),(0,Pe.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a})]}):t?(0,Pe.jsx)(He,{children:(0,Pe.jsxs)("div",{className:"analytics-dashboard",style:{paddingTop:"70px"},children:[(0,Pe.jsxs)("div",{className:"mb-8",children:[(0,Pe.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Analytics Dashboard"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Business insights and performance metrics"})]}),(0,Pe.jsxs)("div",{className:"analytics-metrics-grid",children:[(0,Pe.jsx)("div",{className:"analytics-metric-card primary",children:(0,Pe.jsxs)("div",{className:"metric-content",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{className:"metric-label",children:"Total Vehicles"}),(0,Pe.jsx)("p",{className:"metric-value",children:t.totalVehicles})]}),(0,Pe.jsx)("div",{className:"metric-icon",children:"\ud83d\ude97"})]})}),(0,Pe.jsx)("div",{className:"analytics-metric-card success",children:(0,Pe.jsxs)("div",{className:"metric-content",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{className:"metric-label",children:"Inventory Value"}),(0,Pe.jsxs)("p",{className:"metric-value",children:["$",t.totalInventoryValue.toLocaleString()]})]}),(0,Pe.jsx)("div",{className:"metric-icon",children:"\ud83d\udcb0"})]})}),(0,Pe.jsx)("div",{className:"analytics-metric-card accent",children:(0,Pe.jsxs)("div",{className:"metric-content",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{className:"metric-label",children:"Potential Profit"}),(0,Pe.jsxs)("p",{className:"metric-value",children:["$",t.totalPotentialProfit.toLocaleString()]})]}),(0,Pe.jsx)("div",{className:"metric-icon",children:"\ud83d\udcc8"})]})}),(0,Pe.jsx)("div",{className:"analytics-metric-card warning",children:(0,Pe.jsxs)("div",{className:"metric-content",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{className:"metric-label",children:"Average Price"}),(0,Pe.jsxs)("p",{className:"metric-value",children:["$",t.averagePrice.toLocaleString()]})]}),(0,Pe.jsx)("div",{className:"metric-icon",children:"\ud83c\udff7\ufe0f"})]})})]}),(0,Pe.jsxs)("div",{className:"analytics-charts-grid",children:[(0,Pe.jsxs)("div",{className:"analytics-chart-card",children:[(0,Pe.jsxs)("h3",{className:"chart-title",children:[(0,Pe.jsx)("span",{className:"chart-icon",children:"\ud83d\udcca"}),"Vehicle Status Distribution"]}),(0,Pe.jsx)("div",{className:"status-distribution",children:Object.entries(t.vehiclesByStatus).map(e=>{let[n,r]=e;return(0,Pe.jsxs)("div",{className:"status-item",children:[(0,Pe.jsxs)("div",{className:"status-label",children:[(0,Pe.jsx)("div",{className:"status-indicator ".concat(n)}),(0,Pe.jsx)("span",{className:"status-name",children:n})]}),(0,Pe.jsxs)("div",{className:"status-value",children:[(0,Pe.jsx)("span",{className:"count",children:r}),(0,Pe.jsxs)("span",{className:"percentage",children:["(",(r/t.totalVehicles*100).toFixed(1),"%)"]})]})]},n)})})]}),(0,Pe.jsxs)("div",{className:"analytics-chart-card",children:[(0,Pe.jsxs)("h3",{className:"chart-title",children:[(0,Pe.jsx)("span",{className:"chart-icon",children:"\ud83c\udfc6"}),"Top Performing Models"]}),(0,Pe.jsx)("div",{className:"performance-list",children:t.topPerformingVehicles.map((e,t)=>(0,Pe.jsxs)("div",{className:"performance-item",children:[(0,Pe.jsxs)("div",{className:"vehicle-info",children:[(0,Pe.jsxs)("p",{className:"vehicle-name",children:[e.make," ",e.model]}),(0,Pe.jsxs)("p",{className:"vehicle-count",children:[e.count," vehicles"]})]}),(0,Pe.jsxs)("div",{className:"revenue-info",children:[(0,Pe.jsxs)("p",{className:"revenue-amount",children:["$",e.revenue.toLocaleString()]}),(0,Pe.jsx)("p",{className:"revenue-label",children:"Total Revenue"})]})]},t))})]})]}),(0,Pe.jsxs)("div",{className:"analytics-chart-card full-width",children:[(0,Pe.jsxs)("h3",{className:"chart-title",children:[(0,Pe.jsx)("span",{className:"chart-icon",children:"\ud83d\udcc8"}),"Sales Performance (Last 6 Months)"]}),(0,Pe.jsx)("div",{className:"sales-chart",children:t.salesByMonth.map((e,t)=>(0,Pe.jsxs)("div",{className:"chart-bar",children:[(0,Pe.jsx)("div",{className:"bar-container",children:(0,Pe.jsx)("div",{className:"bar-fill",style:{height:"".concat(e.sales/30*120,"px")}})}),(0,Pe.jsxs)("div",{className:"bar-data",children:[(0,Pe.jsx)("p",{className:"sales-count",children:e.sales}),(0,Pe.jsx)("p",{className:"sales-label",children:"Sales"})]}),(0,Pe.jsx)("p",{className:"month-label",children:e.month}),(0,Pe.jsxs)("p",{className:"revenue-label",children:["$",(e.revenue/1e3).toFixed(0),"K"]})]},t))})]}),(0,Pe.jsxs)("div",{className:"analytics-chart-card full-width",children:[(0,Pe.jsxs)("h3",{className:"chart-title",children:[(0,Pe.jsx)("span",{className:"chart-icon",children:"\ud83d\udcb9"}),"Profit Margins by Category"]}),(0,Pe.jsx)("div",{className:"profit-margins",children:t.profitMargins.map((e,t)=>(0,Pe.jsxs)("div",{className:"margin-item",children:[(0,Pe.jsx)("div",{className:"category-name",children:e.category}),(0,Pe.jsx)("div",{className:"margin-bar",children:(0,Pe.jsx)("div",{className:"bar-background",children:(0,Pe.jsx)("div",{className:"bar-progress",style:{width:"".concat(e.margin/35*100,"%")},children:(0,Pe.jsxs)("span",{className:"margin-value",children:[e.margin,"%"]})})})})]},t))})]}),(0,Pe.jsxs)("div",{className:"analytics-actions",children:[(0,Pe.jsx)("h3",{className:"actions-title",children:"Quick Actions"}),(0,Pe.jsxs)("div",{className:"actions-grid",children:[(0,Pe.jsxs)("a",{href:"/add-vehicle",className:"action-button primary",children:[(0,Pe.jsx)("span",{className:"action-icon",children:"\ud83d\ude97"}),"Add New Vehicle"]}),(0,Pe.jsxs)("a",{href:"/dashboard",className:"action-button success",children:[(0,Pe.jsx)("span",{className:"action-icon",children:"\ud83d\udccb"}),"View Inventory"]}),(0,Pe.jsxs)("button",{onClick:l,className:"action-button accent",children:[(0,Pe.jsx)("span",{className:"action-icon",children:"\ud83d\udd04"}),"Refresh Data"]})]})]})]})}):null:(0,Pe.jsx)(He,{children:(0,Pe.jsxs)("div",{className:"text-center py-12",children:[(0,Pe.jsx)("div",{className:"mx-auto h-24 w-24 bg-red-100 rounded-full flex items-center justify-center mb-6",children:(0,Pe.jsx)("span",{className:"text-4xl text-red-600",children:"\ud83d\udeab"})}),(0,Pe.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Access Denied"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"You need administrator privileges to view analytics."})]})})},vm=e=>{let{vehicleId:t}=e;const{currentUser:n,isAdmin:r}=De(),[i,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(!0),[c,u]=(0,s.useState)(""),[d,h]=(0,s.useState)(null),[f,p]=(0,s.useState)({});(0,s.useEffect)(()=>{m()},[t]);const m=async()=>{try{l(!0);const e=await bd(Eu(cm,"vehicles",t));if(e.exists()){const t=je({id:e.id},e.data());a(t),p(t)}else u("Vehicle not found")}catch(c){console.error("Error loading vehicle:",c),u("Failed to load vehicle details")}finally{l(!1)}},g=e=>{h(e),p(i||{})},y=async e=>{if(i)try{const n={updatedAt:new Date};"basic"===e?(n.brand=f.brand,n.model=f.model,n.year=f.year,n.chassisNumber=f.chassisNumber,n.grade=f.grade,n.status=f.status):"financial"===e?(n.purchasePrice=f.purchasePrice||0,n.cifValue=f.cifValue||0,n.lcValue=f.lcValue||0,n.sellingPrice=f.sellingPrice||0,n.advancePayment=f.advancePayment||0,n.netProfit=(f.sellingPrice||0)-(f.cifValue||0),n.restPayment=(f.sellingPrice||0)-(f.advancePayment||0)):"shipping"===e?(n.shippingCompany=f.shippingCompany,n.shippingDate=f.shippingDate,n.arrivalDate=f.arrivalDate):"purchaser"===e&&(n.purchaserName=f.purchaserName,n.purchaserPhone=f.purchaserPhone,n.purchaserIdNumber=f.purchaserIdNumber,n.purchaserAddress=f.purchaserAddress),await _d(Eu(cm,"vehicles",t),n),a(je(je({},i),n)),h(null)}catch(c){console.error("Error updating vehicle:",c),u("Failed to update vehicle")}},v=()=>{h(null),p(i||{})},b=()=>i?(i.sellingPrice||0)-(i.cifValue||0):0;if(o)return(0,Pe.jsx)(He,{children:(0,Pe.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Pe.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})});if(c||!i)return(0,Pe.jsx)(He,{children:(0,Pe.jsx)("div",{className:"max-w-2xl mx-auto p-6",children:(0,Pe.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,Pe.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"Error"}),(0,Pe.jsx)("p",{className:"text-red-600",children:c||"Vehicle not found"})]})})});const w=r||i.addedBy===(null===n||void 0===n?void 0:n.uid);return(0,Pe.jsx)(He,{children:(0,Pe.jsxs)("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[i.brand," ",i.model," ",i.year]}),(0,Pe.jsx)("p",{className:"text-gray-600 mt-1",children:"Vehicle Details"})]}),(0,Pe.jsx)("span",{className:"px-4 py-2 rounded-full text-sm font-medium border ".concat((e=>{switch(e){case"sold":return"bg-green-100 text-green-800 border-green-300";case"available":return"bg-blue-100 text-blue-800 border-blue-300";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"reserved":return"bg-purple-100 text-purple-800 border-purple-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}})(i.status)),children:i.status})]}),i.images&&i.images.length>0&&(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Pe.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Vehicle Images"}),(0,Pe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.images.map((e,t)=>(0,Pe.jsx)("div",{className:"relative aspect-video bg-gray-100 rounded-lg overflow-hidden",children:(0,Pe.jsx)("img",{src:e,alt:"Vehicle ".concat(t+1),className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200"})},t))})]}),(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Pe.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Basic Vehicle Information"}),w&&"basic"!==d&&(0,Pe.jsx)("button",{onClick:()=>g("basic"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit"})]}),"basic"===d?(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),(0,Pe.jsx)("input",{type:"text",value:f.brand||"",onChange:e=>p(je(je({},f),{},{brand:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),(0,Pe.jsx)("input",{type:"text",value:f.model||"",onChange:e=>p(je(je({},f),{},{model:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),(0,Pe.jsx)("input",{type:"number",value:f.year||"",onChange:e=>p(je(je({},f),{},{year:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chassis Number"}),(0,Pe.jsx)("input",{type:"text",value:f.chassisNumber||"",onChange:e=>p(je(je({},f),{},{chassisNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grade"}),(0,Pe.jsx)("input",{type:"text",value:f.grade||"",onChange:e=>p(je(je({},f),{},{grade:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,Pe.jsxs)("select",{value:f.status||"",onChange:e=>p(je(je({},f),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Pe.jsx)("option",{value:"available",children:"Available"}),(0,Pe.jsx)("option",{value:"sold",children:"Sold"}),(0,Pe.jsx)("option",{value:"pending",children:"Pending"}),(0,Pe.jsx)("option",{value:"reserved",children:"Reserved"})]})]}),(0,Pe.jsxs)("div",{className:"md:col-span-2 flex gap-2",children:[(0,Pe.jsx)("button",{onClick:()=>y("basic"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save"}),(0,Pe.jsx)("button",{onClick:v,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]}):(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Brand:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.brand})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Model:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.model})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Year:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.year})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Chassis Number:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.chassisNumber})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Grade:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.grade||"Not specified"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Status:"}),(0,Pe.jsx)("p",{className:"font-semibold capitalize",children:i.status})]})]})]}),(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Pe.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Financial Information"}),w&&"financial"!==d&&(0,Pe.jsx)("button",{onClick:()=>g("financial"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit"})]}),"financial"===d?(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchase Price (LKR)"}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("span",{className:"absolute left-3 top-3 text-gray-500",children:"Rs."}),(0,Pe.jsx)("input",{type:"number",value:f.purchasePrice||"",onChange:e=>p(je(je({},f),{},{purchasePrice:parseFloat(e.target.value)||0})),className:"w-full pl-12 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CIF Value (LKR)"}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("span",{className:"absolute left-3 top-3 text-gray-500",children:"Rs."}),(0,Pe.jsx)("input",{type:"number",value:f.cifValue||"",onChange:e=>p(je(je({},f),{},{cifValue:parseFloat(e.target.value)||0})),className:"w-full pl-12 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LC Value (LKR)"}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("span",{className:"absolute left-3 top-3 text-gray-500",children:"Rs."}),(0,Pe.jsx)("input",{type:"number",value:f.lcValue||"",onChange:e=>p(je(je({},f),{},{lcValue:parseFloat(e.target.value)||0})),className:"w-full pl-12 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Price (LKR)"}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("span",{className:"absolute left-3 top-3 text-gray-500",children:"Rs."}),(0,Pe.jsx)("input",{type:"number",value:f.sellingPrice||"",onChange:e=>p(je(je({},f),{},{sellingPrice:parseFloat(e.target.value)||0})),className:"w-full pl-12 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Advance Payment (LKR)"}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("span",{className:"absolute left-3 top-3 text-gray-500",children:"Rs."}),(0,Pe.jsx)("input",{type:"number",value:f.advancePayment||"",onChange:e=>p(je(je({},f),{},{advancePayment:parseFloat(e.target.value)||0})),className:"w-full pl-12 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Pe.jsxs)("div",{className:"md:col-span-2 flex gap-2 mt-4",children:[(0,Pe.jsx)("button",{onClick:()=>y("financial"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save"}),(0,Pe.jsx)("button",{onClick:v,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]}):(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Purchase Price:"}),(0,Pe.jsxs)("p",{className:"font-semibold",children:["Rs. ",(i.purchasePrice||0).toLocaleString()]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"CIF Value:"}),(0,Pe.jsxs)("p",{className:"font-semibold",children:["Rs. ",(i.cifValue||0).toLocaleString()]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"LC Value:"}),(0,Pe.jsxs)("p",{className:"font-semibold",children:["Rs. ",(i.lcValue||0).toLocaleString()]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Selling Price:"}),(0,Pe.jsxs)("p",{className:"font-semibold",children:["Rs. ",(i.sellingPrice||0).toLocaleString()]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Advance Payment:"}),(0,Pe.jsxs)("p",{className:"font-semibold",children:["Rs. ",(i.advancePayment||0).toLocaleString()]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Rest Payment:"}),(0,Pe.jsxs)("p",{className:"font-semibold",children:["Rs. ",(i?(i.sellingPrice||0)-(i.advancePayment||0):0).toLocaleString()]})]}),(0,Pe.jsxs)("div",{className:"md:col-span-2",children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Net Profit:"}),(0,Pe.jsxs)("p",{className:"font-semibold text-lg ".concat(b()>=0?"text-green-600":"text-red-600"),children:["Rs. ",b().toLocaleString()]})]})]})]}),(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Pe.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Shipping Information"}),w&&"shipping"!==d&&(0,Pe.jsx)("button",{onClick:()=>g("shipping"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit"})]}),"shipping"===d?(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Company"}),(0,Pe.jsx)("input",{type:"text",value:f.shippingCompany||"",onChange:e=>p(je(je({},f),{},{shippingCompany:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Date"}),(0,Pe.jsx)("input",{type:"date",value:f.shippingDate?f.shippingDate instanceof Date?f.shippingDate.toISOString().split("T")[0]:f.shippingDate:"",onChange:e=>p(je(je({},f),{},{shippingDate:new Date(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Arrival Date"}),(0,Pe.jsx)("input",{type:"date",value:f.arrivalDate?f.arrivalDate instanceof Date?f.arrivalDate.toISOString().split("T")[0]:f.arrivalDate:"",onChange:e=>p(je(je({},f),{},{arrivalDate:new Date(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{className:"md:col-span-2 flex gap-2 mt-4",children:[(0,Pe.jsx)("button",{onClick:()=>y("shipping"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save"}),(0,Pe.jsx)("button",{onClick:v,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]}):(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Shipping Company:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.shippingCompany||"Not specified"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Shipping Date:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.shippingDate?new Date(i.shippingDate).toLocaleDateString():"Not specified"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Arrival Date:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.arrivalDate?new Date(i.arrivalDate).toLocaleDateString():"Not specified"})]})]})]}),(0,Pe.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Pe.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Purchaser Details"}),w&&"purchaser"!==d&&(0,Pe.jsx)("button",{onClick:()=>g("purchaser"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit"})]}),"purchaser"===d?(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purchaser Name"}),(0,Pe.jsx)("input",{type:"text",value:f.purchaserName||"",onChange:e=>p(je(je({},f),{},{purchaserName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),(0,Pe.jsx)("input",{type:"text",value:f.purchaserPhone||"",onChange:e=>p(je(je({},f),{},{purchaserPhone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID Number"}),(0,Pe.jsx)("input",{type:"text",value:f.purchaserIdNumber||"",onChange:e=>p(je(je({},f),{},{purchaserIdNumber:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{className:"md:col-span-2",children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,Pe.jsx)("textarea",{value:f.purchaserAddress||"",onChange:e=>p(je(je({},f),{},{purchaserAddress:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Pe.jsxs)("div",{className:"md:col-span-2 flex gap-2 mt-4",children:[(0,Pe.jsx)("button",{onClick:()=>y("purchaser"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save"}),(0,Pe.jsx)("button",{onClick:v,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]}):(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Purchaser Name:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.purchaserName||"Not specified"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Contact Number:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.purchaserPhone||"Not specified"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"ID Number:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.purchaserIdNumber||"Not specified"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("span",{className:"text-sm text-gray-600",children:"Address:"}),(0,Pe.jsx)("p",{className:"font-semibold",children:i.purchaserAddress||"Not specified"})]})]})]})]})})},bm=()=>{const{id:e}=te();return e?(0,Pe.jsx)(vm,{vehicleId:e}):(0,Pe.jsx)(me,{to:"/dashboard"})},wm=e=>{let{children:t}=e;const{currentUser:n}=De();return n?(0,Pe.jsx)(Pe.Fragment,{children:t}):(0,Pe.jsx)(me,{to:"/login"})},xm=e=>{let{children:t}=e;const{currentUser:n}=De();return n?(0,Pe.jsx)(me,{to:"/dashboard"}):(0,Pe.jsx)(Pe.Fragment,{children:t})},_m=()=>(0,Pe.jsx)(Ne,{children:(0,Pe.jsxs)(ve,{children:[(0,Pe.jsx)(ge,{path:"/",element:(0,Pe.jsx)(Me,{})}),(0,Pe.jsx)(ge,{path:"/login",element:(0,Pe.jsx)(xm,{children:(0,Pe.jsx)(Ue,{})})}),(0,Pe.jsx)(ge,{path:"/register",element:(0,Pe.jsx)(xm,{children:(0,Pe.jsx)(Fe,{})})}),(0,Pe.jsx)(ge,{path:"/dashboard",element:(0,Pe.jsx)(wm,{children:(0,Pe.jsx)(We,{})})}),(0,Pe.jsx)(ge,{path:"/add-vehicle",element:(0,Pe.jsx)(wm,{children:(0,Pe.jsx)(pm,{})})}),(0,Pe.jsx)(ge,{path:"/vehicle/:id",element:(0,Pe.jsx)(wm,{children:(0,Pe.jsx)(bm,{})})}),(0,Pe.jsx)(ge,{path:"/edit-vehicle/:id",element:(0,Pe.jsx)(wm,{children:(0,Pe.jsx)(mm,{})})}),(0,Pe.jsx)(ge,{path:"/settings",element:(0,Pe.jsx)(wm,{children:(0,Pe.jsx)(gm,{})})}),(0,Pe.jsx)(ge,{path:"/analytics",element:(0,Pe.jsx)(wm,{children:(0,Pe.jsx)(ym,{})})}),(0,Pe.jsx)(ge,{path:"*",element:(0,Pe.jsx)(me,{to:"/"})})]})}),Nm=()=>(0,Pe.jsx)("div",{className:"App",children:(0,Pe.jsx)(Le,{children:(0,Pe.jsx)(_m,{})})});a.createRoot(document.getElementById("root")).render((0,Pe.jsx)(s.StrictMode,{children:(0,Pe.jsx)(Nm,{})}))})();
//# sourceMappingURL=main.86adc52f.js.map